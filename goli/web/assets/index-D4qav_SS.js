(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();function Ma(i){const e=Object.create(null);for(const t of i.split(","))e[t]=1;return t=>t in e}const Se={},Ms=[],ri=()=>{},Iu=()=>!1,ho=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),Pa=i=>i.startsWith("onUpdate:"),qe=Object.assign,Ta=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},lg=Object.prototype.hasOwnProperty,pe=(i,e)=>lg.call(i,e),Y=Array.isArray,Ps=i=>Hr(i)==="[object Map]",qs=i=>Hr(i)==="[object Set]",Ah=i=>Hr(i)==="[object Date]",re=i=>typeof i=="function",Ie=i=>typeof i=="string",It=i=>typeof i=="symbol",xe=i=>i!==null&&typeof i=="object",Nu=i=>(xe(i)||re(i))&&re(i.then)&&re(i.catch),Vu=Object.prototype.toString,Hr=i=>Vu.call(i),ag=i=>Hr(i).slice(8,-1),Fu=i=>Hr(i)==="[object Object]",_a=i=>Ie(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,hr=Ma(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),co=i=>{const e=Object.create(null);return(t=>e[t]||(e[t]=i(t)))},hg=/-\w/g,Vi=co(i=>i.replace(hg,e=>e.slice(1).toUpperCase())),cg=/\B([A-Z])/g,ms=co(i=>i.replace(cg,"-$1").toLowerCase()),Hu=co(i=>i.charAt(0).toUpperCase()+i.slice(1)),Vo=co(i=>i?`on${Hu(i)}`:""),Ii=(i,e)=>!Object.is(i,e),xn=(i,...e)=>{for(let t=0;t<i.length;t++)i[t](...e)},ju=(i,e,t,s=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:s,value:t})},uo=i=>{const e=parseFloat(i);return isNaN(e)?i:e},ug=i=>{const e=Ie(i)?Number(i):NaN;return isNaN(e)?i:e};let Mh;const fo=()=>Mh||(Mh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Da(i){if(Y(i)){const e={};for(let t=0;t<i.length;t++){const s=i[t],r=Ie(s)?gg(s):Da(s);if(r)for(const n in r)e[n]=r[n]}return e}else if(Ie(i)||xe(i))return i}const dg=/;(?![^(]*\))/g,fg=/:([^]+)/,pg=/\/\*[^]*?\*\//g;function gg(i){const e={};return i.replace(pg,"").split(dg).forEach(t=>{if(t){const s=t.split(fg);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function me(i){let e="";if(Ie(i))e=i;else if(Y(i))for(let t=0;t<i.length;t++){const s=me(i[t]);s&&(e+=s+" ")}else if(xe(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}const mg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yg=Ma(mg);function Wu(i){return!!i||i===""}function bg(i,e){if(i.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<i.length;s++)t=jr(i[s],e[s]);return t}function jr(i,e){if(i===e)return!0;let t=Ah(i),s=Ah(e);if(t||s)return t&&s?i.getTime()===e.getTime():!1;if(t=It(i),s=It(e),t||s)return i===e;if(t=Y(i),s=Y(e),t||s)return t&&s?bg(i,e):!1;if(t=xe(i),s=xe(e),t||s){if(!t||!s)return!1;const r=Object.keys(i).length,n=Object.keys(e).length;if(r!==n)return!1;for(const o in i){const l=i.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!jr(i[o],e[o]))return!1}}return String(i)===String(e)}function Ba(i,e){return i.findIndex(t=>jr(t,e))}const zu=i=>!!(i&&i.__v_isRef===!0),L=i=>Ie(i)?i:i==null?"":Y(i)||xe(i)&&(i.toString===Vu||!re(i.toString))?zu(i)?L(i.value):JSON.stringify(i,Qu,2):String(i),Qu=(i,e)=>zu(e)?Qu(i,e.value):Ps(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],n)=>(t[Fo(s,n)+" =>"]=r,t),{})}:qs(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Fo(t))}:It(e)?Fo(e):xe(e)&&!Y(e)&&!Fu(e)?String(e):e,Fo=(i,e="")=>{var t;return It(i)?`Symbol(${(t=i.description)!=null?t:e})`:i};let dt;class xg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!e&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=dt;try{return dt=this,e()}finally{dt=t}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function vg(){return dt}let Oe;const Ho=new WeakSet;class Uu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ho.has(this)&&(Ho.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ku(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ph(this),Xu(this);const e=Oe,t=Lt;Oe=this,Lt=!0;try{return this.fn()}finally{Gu(this),Oe=e,Lt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ra(e);this.deps=this.depsTail=void 0,Ph(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ho.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){vl(this)&&this.run()}get dirty(){return vl(this)}}let qu=0,cr,ur;function Ku(i,e=!1){if(i.flags|=8,e){i.next=ur,ur=i;return}i.next=cr,cr=i}function $a(){qu++}function Ea(){if(--qu>0)return;if(ur){let e=ur;for(ur=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let i;for(;cr;){let e=cr;for(cr=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){i||(i=s)}e=t}}if(i)throw i}function Xu(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Gu(i){let e,t=i.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),Ra(s),kg(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}i.deps=e,i.depsTail=t}function vl(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Yu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function Yu(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===kr)||(i.globalVersion=kr,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!vl(i))))return;i.flags|=2;const e=i.dep,t=Oe,s=Lt;Oe=i,Lt=!0;try{Xu(i);const r=i.fn(i._value);(e.version===0||Ii(r,i._value))&&(i.flags|=128,i._value=r,e.version++)}catch(r){throw e.version++,r}finally{Oe=t,Lt=s,Gu(i),i.flags&=-3}}function Ra(i,e=!1){const{dep:t,prevSub:s,nextSub:r}=i;if(s&&(s.nextSub=r,i.prevSub=void 0),r&&(r.prevSub=s,i.nextSub=void 0),t.subs===i&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let n=t.computed.deps;n;n=n.nextDep)Ra(n,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function kg(i){const{prevDep:e,nextDep:t}=i;e&&(e.nextDep=t,i.prevDep=void 0),t&&(t.prevDep=e,i.nextDep=void 0)}let Lt=!0;const Ju=[];function vi(){Ju.push(Lt),Lt=!1}function ki(){const i=Ju.pop();Lt=i===void 0?!0:i}function Ph(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const t=Oe;Oe=void 0;try{e()}finally{Oe=t}}}let kr=0;class wg{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class La{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Oe||!Lt||Oe===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Oe)t=this.activeLink=new wg(Oe,this),Oe.deps?(t.prevDep=Oe.depsTail,Oe.depsTail.nextDep=t,Oe.depsTail=t):Oe.deps=Oe.depsTail=t,Zu(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Oe.depsTail,t.nextDep=void 0,Oe.depsTail.nextDep=t,Oe.depsTail=t,Oe.deps===t&&(Oe.deps=s)}return t}trigger(e){this.version++,kr++,this.notify(e)}notify(e){$a();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Ea()}}}function Zu(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Zu(s)}const t=i.dep.subs;t!==i&&(i.prevSub=t,t&&(t.nextSub=i)),i.dep.subs=i}}const kl=new WeakMap,hs=Symbol(""),wl=Symbol(""),wr=Symbol("");function Ge(i,e,t){if(Lt&&Oe){let s=kl.get(i);s||kl.set(i,s=new Map);let r=s.get(t);r||(s.set(t,r=new La),r.map=s,r.key=t),r.track()}}function fi(i,e,t,s,r,n){const o=kl.get(i);if(!o){kr++;return}const l=a=>{a&&a.trigger()};if($a(),e==="clear")o.forEach(l);else{const a=Y(i),h=a&&_a(t);if(a&&t==="length"){const c=Number(s);o.forEach((u,f)=>{(f==="length"||f===wr||!It(f)&&f>=c)&&l(u)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),h&&l(o.get(wr)),e){case"add":a?h&&l(o.get("length")):(l(o.get(hs)),Ps(i)&&l(o.get(wl)));break;case"delete":a||(l(o.get(hs)),Ps(i)&&l(o.get(wl)));break;case"set":Ps(i)&&l(o.get(hs));break}}Ea()}function bs(i){const e=fe(i);return e===i?e:(Ge(e,"iterate",wr),Mt(i)?e:e.map(ze))}function po(i){return Ge(i=fe(i),"iterate",wr),i}const Sg={__proto__:null,[Symbol.iterator](){return jo(this,Symbol.iterator,ze)},concat(...i){return bs(this).concat(...i.map(e=>Y(e)?bs(e):e))},entries(){return jo(this,"entries",i=>(i[1]=ze(i[1]),i))},every(i,e){return li(this,"every",i,e,void 0,arguments)},filter(i,e){return li(this,"filter",i,e,t=>t.map(ze),arguments)},find(i,e){return li(this,"find",i,e,ze,arguments)},findIndex(i,e){return li(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return li(this,"findLast",i,e,ze,arguments)},findLastIndex(i,e){return li(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return li(this,"forEach",i,e,void 0,arguments)},includes(...i){return Wo(this,"includes",i)},indexOf(...i){return Wo(this,"indexOf",i)},join(i){return bs(this).join(i)},lastIndexOf(...i){return Wo(this,"lastIndexOf",i)},map(i,e){return li(this,"map",i,e,void 0,arguments)},pop(){return Js(this,"pop")},push(...i){return Js(this,"push",i)},reduce(i,...e){return Th(this,"reduce",i,e)},reduceRight(i,...e){return Th(this,"reduceRight",i,e)},shift(){return Js(this,"shift")},some(i,e){return li(this,"some",i,e,void 0,arguments)},splice(...i){return Js(this,"splice",i)},toReversed(){return bs(this).toReversed()},toSorted(i){return bs(this).toSorted(i)},toSpliced(...i){return bs(this).toSpliced(...i)},unshift(...i){return Js(this,"unshift",i)},values(){return jo(this,"values",ze)}};function jo(i,e,t){const s=po(i),r=s[e]();return s!==i&&!Mt(i)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.done||(n.value=t(n.value)),n}),r}const Cg=Array.prototype;function li(i,e,t,s,r,n){const o=po(i),l=o!==i&&!Mt(i),a=o[e];if(a!==Cg[e]){const u=a.apply(i,n);return l?ze(u):u}let h=t;o!==i&&(l?h=function(u,f){return t.call(this,ze(u),f,i)}:t.length>2&&(h=function(u,f){return t.call(this,u,f,i)}));const c=a.call(o,h,s);return l&&r?r(c):c}function Th(i,e,t,s){const r=po(i);let n=t;return r!==i&&(Mt(i)?t.length>3&&(n=function(o,l,a){return t.call(this,o,l,a,i)}):n=function(o,l,a){return t.call(this,o,ze(l),a,i)}),r[e](n,...s)}function Wo(i,e,t){const s=fe(i);Ge(s,"iterate",wr);const r=s[e](...t);return(r===-1||r===!1)&&Fa(t[0])?(t[0]=fe(t[0]),s[e](...t)):r}function Js(i,e,t=[]){vi(),$a();const s=fe(i)[e].apply(i,t);return Ea(),ki(),s}const Og=Ma("__proto__,__v_isRef,__isVue"),ed=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(It));function Ag(i){It(i)||(i=String(i));const e=fe(this);return Ge(e,"has",i),e.hasOwnProperty(i)}class td{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,n=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return n;if(t==="__v_raw")return s===(r?n?Lg:nd:n?rd:sd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Y(e);if(!r){let a;if(o&&(a=Sg[t]))return a;if(t==="hasOwnProperty")return Ag}const l=Reflect.get(e,t,et(e)?e:s);if((It(t)?ed.has(t):Og(t))||(r||Ge(e,"get",t),n))return l;if(et(l)){const a=o&&_a(t)?l:l.value;return r&&xe(a)?Cl(a):a}return xe(l)?r?Cl(l):Na(l):l}}class id extends td{constructor(e=!1){super(!1,e)}set(e,t,s,r){let n=e[t];if(!this._isShallow){const a=Fi(n);if(!Mt(s)&&!Fi(s)&&(n=fe(n),s=fe(s)),!Y(e)&&et(n)&&!et(s))return a||(n.value=s),!0}const o=Y(e)&&_a(t)?Number(t)<e.length:pe(e,t),l=Reflect.set(e,t,s,et(e)?e:r);return e===fe(r)&&(o?Ii(s,n)&&fi(e,"set",t,s):fi(e,"add",t,s)),l}deleteProperty(e,t){const s=pe(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&fi(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!It(t)||!ed.has(t))&&Ge(e,"has",t),s}ownKeys(e){return Ge(e,"iterate",Y(e)?"length":hs),Reflect.ownKeys(e)}}class Mg extends td{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Pg=new id,Tg=new Mg,_g=new id(!0);const Sl=i=>i,Gr=i=>Reflect.getPrototypeOf(i);function Dg(i,e,t){return function(...s){const r=this.__v_raw,n=fe(r),o=Ps(n),l=i==="entries"||i===Symbol.iterator&&o,a=i==="keys"&&o,h=r[i](...s),c=t?Sl:e?$n:ze;return!e&&Ge(n,"iterate",a?wl:hs),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:l?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function Yr(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function Bg(i,e){const t={get(r){const n=this.__v_raw,o=fe(n),l=fe(r);i||(Ii(r,l)&&Ge(o,"get",r),Ge(o,"get",l));const{has:a}=Gr(o),h=e?Sl:i?$n:ze;if(a.call(o,r))return h(n.get(r));if(a.call(o,l))return h(n.get(l));n!==o&&n.get(r)},get size(){const r=this.__v_raw;return!i&&Ge(fe(r),"iterate",hs),r.size},has(r){const n=this.__v_raw,o=fe(n),l=fe(r);return i||(Ii(r,l)&&Ge(o,"has",r),Ge(o,"has",l)),r===l?n.has(r):n.has(r)||n.has(l)},forEach(r,n){const o=this,l=o.__v_raw,a=fe(l),h=e?Sl:i?$n:ze;return!i&&Ge(a,"iterate",hs),l.forEach((c,u)=>r.call(n,h(c),h(u),o))}};return qe(t,i?{add:Yr("add"),set:Yr("set"),delete:Yr("delete"),clear:Yr("clear")}:{add(r){!e&&!Mt(r)&&!Fi(r)&&(r=fe(r));const n=fe(this);return Gr(n).has.call(n,r)||(n.add(r),fi(n,"add",r,r)),this},set(r,n){!e&&!Mt(n)&&!Fi(n)&&(n=fe(n));const o=fe(this),{has:l,get:a}=Gr(o);let h=l.call(o,r);h||(r=fe(r),h=l.call(o,r));const c=a.call(o,r);return o.set(r,n),h?Ii(n,c)&&fi(o,"set",r,n):fi(o,"add",r,n),this},delete(r){const n=fe(this),{has:o,get:l}=Gr(n);let a=o.call(n,r);a||(r=fe(r),a=o.call(n,r)),l&&l.call(n,r);const h=n.delete(r);return a&&fi(n,"delete",r,void 0),h},clear(){const r=fe(this),n=r.size!==0,o=r.clear();return n&&fi(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Dg(r,i,e)}),t}function Ia(i,e){const t=Bg(i,e);return(s,r,n)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?s:Reflect.get(pe(t,r)&&r in s?t:s,r,n)}const $g={get:Ia(!1,!1)},Eg={get:Ia(!1,!0)},Rg={get:Ia(!0,!1)};const sd=new WeakMap,rd=new WeakMap,nd=new WeakMap,Lg=new WeakMap;function Ig(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ng(i){return i.__v_skip||!Object.isExtensible(i)?0:Ig(ag(i))}function Na(i){return Fi(i)?i:Va(i,!1,Pg,$g,sd)}function Vg(i){return Va(i,!1,_g,Eg,rd)}function Cl(i){return Va(i,!0,Tg,Rg,nd)}function Va(i,e,t,s,r){if(!xe(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const n=Ng(i);if(n===0)return i;const o=r.get(i);if(o)return o;const l=new Proxy(i,n===2?s:t);return r.set(i,l),l}function Ts(i){return Fi(i)?Ts(i.__v_raw):!!(i&&i.__v_isReactive)}function Fi(i){return!!(i&&i.__v_isReadonly)}function Mt(i){return!!(i&&i.__v_isShallow)}function Fa(i){return i?!!i.__v_raw:!1}function fe(i){const e=i&&i.__v_raw;return e?fe(e):i}function Fg(i){return!pe(i,"__v_skip")&&Object.isExtensible(i)&&ju(i,"__v_skip",!0),i}const ze=i=>xe(i)?Na(i):i,$n=i=>xe(i)?Cl(i):i;function et(i){return i?i.__v_isRef===!0:!1}function F(i){return Hg(i,!1)}function Hg(i,e){return et(i)?i:new jg(i,e)}class jg{constructor(e,t){this.dep=new La,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:fe(e),this._value=t?e:ze(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Mt(e)||Fi(e);e=s?e:fe(e),Ii(e,t)&&(this._rawValue=e,this._value=s?e:ze(e),this.dep.trigger())}}function xs(i){return et(i)?i.value:i}const Wg={get:(i,e,t)=>e==="__v_raw"?i:xs(Reflect.get(i,e,t)),set:(i,e,t,s)=>{const r=i[e];return et(r)&&!et(t)?(r.value=t,!0):Reflect.set(i,e,t,s)}};function od(i){return Ts(i)?i:new Proxy(i,Wg)}class zg{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new La(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Oe!==this)return Ku(this,!0),!0}get value(){const e=this.dep.track();return Yu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Qg(i,e,t=!1){let s,r;return re(i)?s=i:(s=i.get,r=i.set),new zg(s,r,t)}const Jr={},En=new WeakMap;let ts;function Ug(i,e=!1,t=ts){if(t){let s=En.get(t);s||En.set(t,s=[]),s.push(i)}}function qg(i,e,t=Se){const{immediate:s,deep:r,once:n,scheduler:o,augmentJob:l,call:a}=t,h=S=>r?S:Mt(S)||r===!1||r===0?pi(S,1):pi(S);let c,u,f,p,g=!1,y=!1;if(et(i)?(u=()=>i.value,g=Mt(i)):Ts(i)?(u=()=>h(i),g=!0):Y(i)?(y=!0,g=i.some(S=>Ts(S)||Mt(S)),u=()=>i.map(S=>{if(et(S))return S.value;if(Ts(S))return h(S);if(re(S))return a?a(S,2):S()})):re(i)?e?u=a?()=>a(i,2):i:u=()=>{if(f){vi();try{f()}finally{ki()}}const S=ts;ts=c;try{return a?a(i,3,[p]):i(p)}finally{ts=S}}:u=ri,e&&r){const S=u,$=r===!0?1/0:r;u=()=>pi(S(),$)}const x=vg(),m=()=>{c.stop(),x&&x.active&&Ta(x.effects,c)};if(n&&e){const S=e;e=(...$)=>{S(...$),m()}}let k=y?new Array(i.length).fill(Jr):Jr;const C=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(e){const $=c.run();if(r||g||(y?$.some((P,v)=>Ii(P,k[v])):Ii($,k))){f&&f();const P=ts;ts=c;try{const v=[$,k===Jr?void 0:y&&k[0]===Jr?[]:k,p];k=$,a?a(e,3,v):e(...v)}finally{ts=P}}}else c.run()};return l&&l(C),c=new Uu(u),c.scheduler=o?()=>o(C,!1):C,p=S=>Ug(S,!1,c),f=c.onStop=()=>{const S=En.get(c);if(S){if(a)a(S,4);else for(const $ of S)$();En.delete(c)}},e?s?C(!0):k=c.run():o?o(C.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function pi(i,e=1/0,t){if(e<=0||!xe(i)||i.__v_skip||(t=t||new Map,(t.get(i)||0)>=e))return i;if(t.set(i,e),e--,et(i))pi(i.value,e,t);else if(Y(i))for(let s=0;s<i.length;s++)pi(i[s],e,t);else if(qs(i)||Ps(i))i.forEach(s=>{pi(s,e,t)});else if(Fu(i)){for(const s in i)pi(i[s],e,t);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&pi(i[s],e,t)}return i}function Wr(i,e,t,s){try{return s?i(...s):i()}catch(r){go(r,e,t)}}function Nt(i,e,t,s){if(re(i)){const r=Wr(i,e,t,s);return r&&Nu(r)&&r.catch(n=>{go(n,e,t)}),r}if(Y(i)){const r=[];for(let n=0;n<i.length;n++)r.push(Nt(i[n],e,t,s));return r}}function go(i,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Se;if(e){let l=e.parent;const a=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const c=l.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](i,a,h)===!1)return}l=l.parent}if(n){vi(),Wr(n,null,10,[i,a,h]),ki();return}}Kg(i,t,r,s,o)}function Kg(i,e,t,s=!0,r=!1){if(r)throw i;console.error(i)}const ot=[];let Jt=-1;const _s=[];let Ti=null,vs=0;const ld=Promise.resolve();let Rn=null;function Ln(i){const e=Rn||ld;return i?e.then(this?i.bind(this):i):e}function Xg(i){let e=Jt+1,t=ot.length;for(;e<t;){const s=e+t>>>1,r=ot[s],n=Sr(r);n<i||n===i&&r.flags&2?e=s+1:t=s}return e}function Ha(i){if(!(i.flags&1)){const e=Sr(i),t=ot[ot.length-1];!t||!(i.flags&2)&&e>=Sr(t)?ot.push(i):ot.splice(Xg(e),0,i),i.flags|=1,ad()}}function ad(){Rn||(Rn=ld.then(cd))}function Gg(i){Y(i)?_s.push(...i):Ti&&i.id===-1?Ti.splice(vs+1,0,i):i.flags&1||(_s.push(i),i.flags|=1),ad()}function _h(i,e,t=Jt+1){for(;t<ot.length;t++){const s=ot[t];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;ot.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function hd(i){if(_s.length){const e=[...new Set(_s)].sort((t,s)=>Sr(t)-Sr(s));if(_s.length=0,Ti){Ti.push(...e);return}for(Ti=e,vs=0;vs<Ti.length;vs++){const t=Ti[vs];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ti=null,vs=0}}const Sr=i=>i.id==null?i.flags&2?-1:1/0:i.id;function cd(i){try{for(Jt=0;Jt<ot.length;Jt++){const e=ot[Jt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Wr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Jt<ot.length;Jt++){const e=ot[Jt];e&&(e.flags&=-2)}Jt=-1,ot.length=0,hd(),Rn=null,(ot.length||_s.length)&&cd()}}let Je=null,ud=null;function In(i){const e=Je;return Je=i,ud=i&&i.type.__scopeId||null,e}function he(i,e=Je,t){if(!e||i._n)return i;const s=(...r)=>{s._d&&Fn(-1);const n=In(e);let o;try{o=i(...r)}finally{In(n),s._d&&Fn(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Bt(i,e){if(Je===null)return i;const t=vo(Je),s=i.dirs||(i.dirs=[]);for(let r=0;r<e.length;r++){let[n,o,l,a=Se]=e[r];n&&(re(n)&&(n={mounted:n,updated:n}),n.deep&&pi(o),s.push({dir:n,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return i}function Gi(i,e,t,s){const r=i.dirs,n=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];n&&(l.oldValue=n[o].value);let a=l.dir[s];a&&(vi(),Nt(a,t,8,[i.el,l,i,e]),ki())}}const Yg=Symbol("_vte"),dd=i=>i.__isTeleport,ci=Symbol("_leaveCb"),Zr=Symbol("_enterCb");function Jg(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ft(()=>{i.isMounted=!0}),ja(()=>{i.isUnmounting=!0}),i}const Ot=[Function,Array],fd={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ot,onEnter:Ot,onAfterEnter:Ot,onEnterCancelled:Ot,onBeforeLeave:Ot,onLeave:Ot,onAfterLeave:Ot,onLeaveCancelled:Ot,onBeforeAppear:Ot,onAppear:Ot,onAfterAppear:Ot,onAppearCancelled:Ot},pd=i=>{const e=i.subTree;return e.component?pd(e.component):e},Zg={name:"BaseTransition",props:fd,setup(i,{slots:e}){const t=Fd(),s=Jg();return()=>{const r=e.default&&yd(e.default(),!0);if(!r||!r.length)return;const n=gd(r),o=fe(i),{mode:l}=o;if(s.isLeaving)return zo(n);const a=Dh(n);if(!a)return zo(n);let h=Ol(a,o,s,t,u=>h=u);a.type!==Ye&&Cr(a,h);let c=t.subTree&&Dh(t.subTree);if(c&&c.type!==Ye&&!ss(c,a)&&pd(t).type!==Ye){let u=Ol(c,o,s,t);if(Cr(c,u),l==="out-in"&&a.type!==Ye)return s.isLeaving=!0,u.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete u.afterLeave,c=void 0},zo(n);l==="in-out"&&a.type!==Ye?u.delayLeave=(f,p,g)=>{const y=md(s,c);y[String(c.key)]=c,f[ci]=()=>{p(),f[ci]=void 0,delete h.delayedLeave,c=void 0},h.delayedLeave=()=>{g(),delete h.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return n}}};function gd(i){let e=i[0];if(i.length>1){for(const t of i)if(t.type!==Ye){e=t;break}}return e}const e0=Zg;function md(i,e){const{leavingVNodes:t}=i;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Ol(i,e,t,s,r){const{appear:n,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:h,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:x,onAppear:m,onAfterAppear:k,onAppearCancelled:C}=e,S=String(i.key),$=md(t,i),P=(W,K)=>{W&&Nt(W,s,9,K)},v=(W,K)=>{const G=K[1];P(W,K),Y(W)?W.every(_=>_.length<=1)&&G():W.length<=1&&G()},T={mode:o,persisted:l,beforeEnter(W){let K=a;if(!t.isMounted)if(n)K=x||a;else return;W[ci]&&W[ci](!0);const G=$[S];G&&ss(i,G)&&G.el[ci]&&G.el[ci](),P(K,[W])},enter(W){let K=h,G=c,_=u;if(!t.isMounted)if(n)K=m||h,G=k||c,_=C||u;else return;let te=!1;const ne=W[Zr]=ve=>{te||(te=!0,ve?P(_,[W]):P(G,[W]),T.delayedLeave&&T.delayedLeave(),W[Zr]=void 0)};K?v(K,[W,ne]):ne()},leave(W,K){const G=String(i.key);if(W[Zr]&&W[Zr](!0),t.isUnmounting)return K();P(f,[W]);let _=!1;const te=W[ci]=ne=>{_||(_=!0,K(),ne?P(y,[W]):P(g,[W]),W[ci]=void 0,$[G]===i&&delete $[G])};$[G]=i,p?v(p,[W,te]):te()},clone(W){const K=Ol(W,e,t,s,r);return r&&r(K),K}};return T}function zo(i){if(mo(i))return i=Hi(i),i.children=null,i}function Dh(i){if(!mo(i))return dd(i.type)&&i.children?gd(i.children):i;if(i.component)return i.component.subTree;const{shapeFlag:e,children:t}=i;if(t){if(e&16)return t[0];if(e&32&&re(t.default))return t.default()}}function Cr(i,e){i.shapeFlag&6&&i.component?(i.transition=e,Cr(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function yd(i,e=!1,t){let s=[],r=0;for(let n=0;n<i.length;n++){let o=i[n];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:n);o.type===_e?(o.patchFlag&128&&r++,s=s.concat(yd(o.children,e,l))):(e||o.type!==Ye)&&s.push(l!=null?Hi(o,{key:l}):o)}if(r>1)for(let n=0;n<s.length;n++)s[n].patchFlag=-2;return s}function bd(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const Nn=new WeakMap;function dr(i,e,t,s,r=!1){if(Y(i)){i.forEach((g,y)=>dr(g,e&&(Y(e)?e[y]:e),t,s,r));return}if(Ds(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&dr(i,e,t,s.component.subTree);return}const n=s.shapeFlag&4?vo(s.component):s.el,o=r?null:n,{i:l,r:a}=i,h=e&&e.r,c=l.refs===Se?l.refs={}:l.refs,u=l.setupState,f=fe(u),p=u===Se?Iu:g=>pe(f,g);if(h!=null&&h!==a){if(Bh(e),Ie(h))c[h]=null,p(h)&&(u[h]=null);else if(et(h)){h.value=null;const g=e;g.k&&(c[g.k]=null)}}if(re(a))Wr(a,l,12,[o,c]);else{const g=Ie(a),y=et(a);if(g||y){const x=()=>{if(i.f){const m=g?p(a)?u[a]:c[a]:a.value;if(r)Y(m)&&Ta(m,n);else if(Y(m))m.includes(n)||m.push(n);else if(g)c[a]=[n],p(a)&&(u[a]=c[a]);else{const k=[n];a.value=k,i.k&&(c[i.k]=k)}}else g?(c[a]=o,p(a)&&(u[a]=o)):y&&(a.value=o,i.k&&(c[i.k]=o))};if(o){const m=()=>{x(),Nn.delete(i)};m.id=-1,Nn.set(i,m),xt(m,t)}else Bh(i),x()}}}function Bh(i){const e=Nn.get(i);e&&(e.flags|=8,Nn.delete(i))}fo().requestIdleCallback;fo().cancelIdleCallback;const Ds=i=>!!i.type.__asyncLoader,mo=i=>i.type.__isKeepAlive;function t0(i,e){xd(i,"a",e)}function i0(i,e){xd(i,"da",e)}function xd(i,e,t=at){const s=i.__wdc||(i.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return i()});if(yo(e,s,t),t){let r=t.parent;for(;r&&r.parent;)mo(r.parent.vnode)&&s0(s,e,t,r),r=r.parent}}function s0(i,e,t,s){const r=yo(e,i,s,!0);zr(()=>{Ta(s[e],r)},t)}function yo(i,e,t=at,s=!1){if(t){const r=t[i]||(t[i]=[]),n=e.__weh||(e.__weh=(...o)=>{vi();const l=Qr(t),a=Nt(e,t,i,o);return l(),ki(),a});return s?r.unshift(n):r.push(n),n}}const Ci=i=>(e,t=at)=>{(!Mr||i==="sp")&&yo(i,(...s)=>e(...s),t)},r0=Ci("bm"),Ft=Ci("m"),n0=Ci("bu"),o0=Ci("u"),ja=Ci("bum"),zr=Ci("um"),l0=Ci("sp"),a0=Ci("rtg"),h0=Ci("rtc");function c0(i,e=at){yo("ec",i,e)}const u0=Symbol.for("v-ndc");function Oi(i,e,t,s){let r;const n=t,o=Y(i);if(o||Ie(i)){const l=o&&Ts(i);let a=!1,h=!1;l&&(a=!Mt(i),h=Fi(i),i=po(i)),r=new Array(i.length);for(let c=0,u=i.length;c<u;c++)r[c]=e(a?h?$n(ze(i[c])):ze(i[c]):i[c],c,void 0,n)}else if(typeof i=="number"){r=new Array(i);for(let l=0;l<i;l++)r[l]=e(l+1,l,void 0,n)}else if(xe(i))if(i[Symbol.iterator])r=Array.from(i,(l,a)=>e(l,a,void 0,n));else{const l=Object.keys(i);r=new Array(l.length);for(let a=0,h=l.length;a<h;a++){const c=l[a];r[a]=e(i[c],c,a,n)}}else r=[];return r}function ws(i,e,t={},s,r){if(Je.ce||Je.parent&&Ds(Je.parent)&&Je.parent.ce){const h=Object.keys(t).length>0;return e!=="default"&&(t.name=e),O(),Me(_e,null,[U("slot",t,s&&s())],h?-2:64)}let n=i[e];n&&n._c&&(n._d=!1),O();const o=n&&vd(n(t)),l=t.key||o&&o.key,a=Me(_e,{key:(l&&!It(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&i._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function vd(i){return i.some(e=>Ar(e)?!(e.type===Ye||e.type===_e&&!vd(e.children)):!0)?i:null}const Al=i=>i?Hd(i)?vo(i):Al(i.parent):null,fr=qe(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Al(i.parent),$root:i=>Al(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>wd(i),$forceUpdate:i=>i.f||(i.f=()=>{Ha(i.update)}),$nextTick:i=>i.n||(i.n=Ln.bind(i.proxy)),$watch:i=>$0.bind(i)}),Qo=(i,e)=>i!==Se&&!i.__isScriptSetup&&pe(i,e),d0={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:n,accessCache:o,type:l,appContext:a}=i;let h;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return n[e]}else{if(Qo(s,e))return o[e]=1,s[e];if(r!==Se&&pe(r,e))return o[e]=2,r[e];if((h=i.propsOptions[0])&&pe(h,e))return o[e]=3,n[e];if(t!==Se&&pe(t,e))return o[e]=4,t[e];Ml&&(o[e]=0)}}const c=fr[e];let u,f;if(c)return e==="$attrs"&&Ge(i.attrs,"get",""),c(i);if((u=l.__cssModules)&&(u=u[e]))return u;if(t!==Se&&pe(t,e))return o[e]=4,t[e];if(f=a.config.globalProperties,pe(f,e))return f[e]},set({_:i},e,t){const{data:s,setupState:r,ctx:n}=i;return Qo(r,e)?(r[e]=t,!0):s!==Se&&pe(s,e)?(s[e]=t,!0):pe(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(n[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:n,type:o}},l){let a,h;return!!(t[l]||i!==Se&&l[0]!=="$"&&pe(i,l)||Qo(e,l)||(a=n[0])&&pe(a,l)||pe(s,l)||pe(fr,l)||pe(r.config.globalProperties,l)||(h=o.__cssModules)&&h[l])},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:pe(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};function $h(i){return Y(i)?i.reduce((e,t)=>(e[t]=null,e),{}):i}let Ml=!0;function f0(i){const e=wd(i),t=i.proxy,s=i.ctx;Ml=!1,e.beforeCreate&&Eh(e.beforeCreate,i,"bc");const{data:r,computed:n,methods:o,watch:l,provide:a,inject:h,created:c,beforeMount:u,mounted:f,beforeUpdate:p,updated:g,activated:y,deactivated:x,beforeDestroy:m,beforeUnmount:k,destroyed:C,unmounted:S,render:$,renderTracked:P,renderTriggered:v,errorCaptured:T,serverPrefetch:W,expose:K,inheritAttrs:G,components:_,directives:te,filters:ne}=e;if(h&&p0(h,s,null),o)for(const ye in o){const de=o[ye];re(de)&&(s[ye]=de.bind(t))}if(r){const ye=r.call(t,t);xe(ye)&&(i.data=Na(ye))}if(Ml=!0,n)for(const ye in n){const de=n[ye],st=re(de)?de.bind(t,t):re(de.get)?de.get.bind(t,t):ri,Ki=!re(de)&&re(de.set)?de.set.bind(t):ri,je=ko({get:st,set:Ki});Object.defineProperty(s,ye,{enumerable:!0,configurable:!0,get:()=>je.value,set:De=>je.value=De})}if(l)for(const ye in l)kd(l[ye],s,t,ye);if(a){const ye=re(a)?a.call(t):a;Reflect.ownKeys(ye).forEach(de=>{v0(de,ye[de])})}c&&Eh(c,i,"c");function ke(ye,de){Y(de)?de.forEach(st=>ye(st.bind(t))):de&&ye(de.bind(t))}if(ke(r0,u),ke(Ft,f),ke(n0,p),ke(o0,g),ke(t0,y),ke(i0,x),ke(c0,T),ke(h0,P),ke(a0,v),ke(ja,k),ke(zr,S),ke(l0,W),Y(K))if(K.length){const ye=i.exposed||(i.exposed={});K.forEach(de=>{Object.defineProperty(ye,de,{get:()=>t[de],set:st=>t[de]=st,enumerable:!0})})}else i.exposed||(i.exposed={});$&&i.render===ri&&(i.render=$),G!=null&&(i.inheritAttrs=G),_&&(i.components=_),te&&(i.directives=te),W&&bd(i)}function p0(i,e,t=ri){Y(i)&&(i=Pl(i));for(const s in i){const r=i[s];let n;xe(r)?"default"in r?n=vn(r.from||s,r.default,!0):n=vn(r.from||s):n=vn(r),et(n)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):e[s]=n}}function Eh(i,e,t){Nt(Y(i)?i.map(s=>s.bind(e.proxy)):i.bind(e.proxy),e,t)}function kd(i,e,t,s){let r=s.includes(".")?Rd(t,s):()=>t[s];if(Ie(i)){const n=e[i];re(n)&&Pt(r,n)}else if(re(i))Pt(r,i.bind(t));else if(xe(i))if(Y(i))i.forEach(n=>kd(n,e,t,s));else{const n=re(i.handler)?i.handler.bind(t):e[i.handler];re(n)&&Pt(r,n,i)}}function wd(i){const e=i.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=i.appContext,l=n.get(e);let a;return l?a=l:!r.length&&!t&&!s?a=e:(a={},r.length&&r.forEach(h=>Vn(a,h,o,!0)),Vn(a,e,o)),xe(e)&&n.set(e,a),a}function Vn(i,e,t,s=!1){const{mixins:r,extends:n}=e;n&&Vn(i,n,t,!0),r&&r.forEach(o=>Vn(i,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const l=g0[o]||t&&t[o];i[o]=l?l(i[o],e[o]):e[o]}return i}const g0={data:Rh,props:Lh,emits:Lh,methods:nr,computed:nr,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:nr,directives:nr,watch:y0,provide:Rh,inject:m0};function Rh(i,e){return e?i?function(){return qe(re(i)?i.call(this,this):i,re(e)?e.call(this,this):e)}:e:i}function m0(i,e){return nr(Pl(i),Pl(e))}function Pl(i){if(Y(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function rt(i,e){return i?[...new Set([].concat(i,e))]:e}function nr(i,e){return i?qe(Object.create(null),i,e):e}function Lh(i,e){return i?Y(i)&&Y(e)?[...new Set([...i,...e])]:qe(Object.create(null),$h(i),$h(e??{})):e}function y0(i,e){if(!i)return e;if(!e)return i;const t=qe(Object.create(null),i);for(const s in e)t[s]=rt(i[s],e[s]);return t}function Sd(){return{app:null,config:{isNativeTag:Iu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let b0=0;function x0(i,e){return function(s,r=null){re(s)||(s=qe({},s)),r!=null&&!xe(r)&&(r=null);const n=Sd(),o=new WeakSet,l=[];let a=!1;const h=n.app={_uid:b0++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:tm,get config(){return n.config},set config(c){},use(c,...u){return o.has(c)||(c&&re(c.install)?(o.add(c),c.install(h,...u)):re(c)&&(o.add(c),c(h,...u))),h},mixin(c){return n.mixins.includes(c)||n.mixins.push(c),h},component(c,u){return u?(n.components[c]=u,h):n.components[c]},directive(c,u){return u?(n.directives[c]=u,h):n.directives[c]},mount(c,u,f){if(!a){const p=h._ceVNode||U(s,r);return p.appContext=n,f===!0?f="svg":f===!1&&(f=void 0),i(p,c,f),a=!0,h._container=c,c.__vue_app__=h,vo(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(Nt(l,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(c,u){return n.provides[c]=u,h},runWithContext(c){const u=Bs;Bs=h;try{return c()}finally{Bs=u}}};return h}}let Bs=null;function v0(i,e){if(at){let t=at.provides;const s=at.parent&&at.parent.provides;s===t&&(t=at.provides=Object.create(s)),t[i]=e}}function vn(i,e,t=!1){const s=Fd();if(s||Bs){let r=Bs?Bs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&i in r)return r[i];if(arguments.length>1)return t&&re(e)?e.call(s&&s.proxy):e}}const Cd={},Od=()=>Object.create(Cd),Ad=i=>Object.getPrototypeOf(i)===Cd;function k0(i,e,t,s=!1){const r={},n=Od();i.propsDefaults=Object.create(null),Md(i,e,r,n);for(const o in i.propsOptions[0])o in r||(r[o]=void 0);t?i.props=s?r:Vg(r):i.type.props?i.props=r:i.props=n,i.attrs=n}function w0(i,e,t,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=i,l=fe(r),[a]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=i.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(bo(i.emitsOptions,f))continue;const p=e[f];if(a)if(pe(n,f))p!==n[f]&&(n[f]=p,h=!0);else{const g=Vi(f);r[g]=Tl(a,l,g,p,i,!1)}else p!==n[f]&&(n[f]=p,h=!0)}}}else{Md(i,e,r,n)&&(h=!0);let c;for(const u in l)(!e||!pe(e,u)&&((c=ms(u))===u||!pe(e,c)))&&(a?t&&(t[u]!==void 0||t[c]!==void 0)&&(r[u]=Tl(a,l,u,void 0,i,!0)):delete r[u]);if(n!==l)for(const u in n)(!e||!pe(e,u))&&(delete n[u],h=!0)}h&&fi(i.attrs,"set","")}function Md(i,e,t,s){const[r,n]=i.propsOptions;let o=!1,l;if(e)for(let a in e){if(hr(a))continue;const h=e[a];let c;r&&pe(r,c=Vi(a))?!n||!n.includes(c)?t[c]=h:(l||(l={}))[c]=h:bo(i.emitsOptions,a)||(!(a in s)||h!==s[a])&&(s[a]=h,o=!0)}if(n){const a=fe(t),h=l||Se;for(let c=0;c<n.length;c++){const u=n[c];t[u]=Tl(r,a,u,h[u],i,!pe(h,u))}}return o}function Tl(i,e,t,s,r,n){const o=i[t];if(o!=null){const l=pe(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&re(a)){const{propsDefaults:h}=r;if(t in h)s=h[t];else{const c=Qr(r);s=h[t]=a.call(null,e),c()}}else s=a;r.ce&&r.ce._setProp(t,s)}o[0]&&(n&&!l?s=!1:o[1]&&(s===""||s===ms(t))&&(s=!0))}return s}const S0=new WeakMap;function Pd(i,e,t=!1){const s=t?S0:e.propsCache,r=s.get(i);if(r)return r;const n=i.props,o={},l=[];let a=!1;if(!re(i)){const c=u=>{a=!0;const[f,p]=Pd(u,e,!0);qe(o,f),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}if(!n&&!a)return xe(i)&&s.set(i,Ms),Ms;if(Y(n))for(let c=0;c<n.length;c++){const u=Vi(n[c]);Ih(u)&&(o[u]=Se)}else if(n)for(const c in n){const u=Vi(c);if(Ih(u)){const f=n[c],p=o[u]=Y(f)||re(f)?{type:f}:qe({},f),g=p.type;let y=!1,x=!0;if(Y(g))for(let m=0;m<g.length;++m){const k=g[m],C=re(k)&&k.name;if(C==="Boolean"){y=!0;break}else C==="String"&&(x=!1)}else y=re(g)&&g.name==="Boolean";p[0]=y,p[1]=x,(y||pe(p,"default"))&&l.push(u)}}const h=[o,l];return xe(i)&&s.set(i,h),h}function Ih(i){return i[0]!=="$"&&!hr(i)}const Wa=i=>i==="_"||i==="_ctx"||i==="$stable",za=i=>Y(i)?i.map(Zt):[Zt(i)],C0=(i,e,t)=>{if(e._n)return e;const s=he((...r)=>za(e(...r)),t);return s._c=!1,s},Td=(i,e,t)=>{const s=i._ctx;for(const r in i){if(Wa(r))continue;const n=i[r];if(re(n))e[r]=C0(r,n,s);else if(n!=null){const o=za(n);e[r]=()=>o}}},_d=(i,e)=>{const t=za(e);i.slots.default=()=>t},Dd=(i,e,t)=>{for(const s in e)(t||!Wa(s))&&(i[s]=e[s])},O0=(i,e,t)=>{const s=i.slots=Od();if(i.vnode.shapeFlag&32){const r=e._;r?(Dd(s,e,t),t&&ju(s,"_",r,!0)):Td(e,s)}else e&&_d(i,e)},A0=(i,e,t)=>{const{vnode:s,slots:r}=i;let n=!0,o=Se;if(s.shapeFlag&32){const l=e._;l?t&&l===1?n=!1:Dd(r,e,t):(n=!e.$stable,Td(e,r)),o=e}else e&&(_d(i,e),o={default:1});if(n)for(const l in r)!Wa(l)&&o[l]==null&&delete r[l]},xt=H0;function M0(i){return P0(i)}function P0(i,e){const t=fo();t.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:l,createComment:a,setText:h,setElementText:c,parentNode:u,nextSibling:f,setScopeId:p=ri,insertStaticContent:g}=i,y=(b,w,M,I=null,B=null,E=null,z=void 0,H=null,V=!!w.dynamicChildren)=>{if(b===w)return;b&&!ss(b,w)&&(I=Xi(b),De(b,B,E,!0),b=null),w.patchFlag===-2&&(V=!1,w.dynamicChildren=null);const{type:R,ref:ee,shapeFlag:q}=w;switch(R){case xo:x(b,w,M,I);break;case Ye:m(b,w,M,I);break;case kn:b==null&&k(w,M,I,z);break;case _e:_(b,w,M,I,B,E,z,H,V);break;default:q&1?$(b,w,M,I,B,E,z,H,V):q&6?te(b,w,M,I,B,E,z,H,V):(q&64||q&128)&&R.process(b,w,M,I,B,E,z,H,V,Gs)}ee!=null&&B?dr(ee,b&&b.ref,E,w||b,!w):ee==null&&b&&b.ref!=null&&dr(b.ref,null,E,b,!0)},x=(b,w,M,I)=>{if(b==null)s(w.el=l(w.children),M,I);else{const B=w.el=b.el;w.children!==b.children&&h(B,w.children)}},m=(b,w,M,I)=>{b==null?s(w.el=a(w.children||""),M,I):w.el=b.el},k=(b,w,M,I)=>{[b.el,b.anchor]=g(b.children,w,M,I,b.el,b.anchor)},C=({el:b,anchor:w},M,I)=>{let B;for(;b&&b!==w;)B=f(b),s(b,M,I),b=B;s(w,M,I)},S=({el:b,anchor:w})=>{let M;for(;b&&b!==w;)M=f(b),r(b),b=M;r(w)},$=(b,w,M,I,B,E,z,H,V)=>{if(w.type==="svg"?z="svg":w.type==="math"&&(z="mathml"),b==null)P(w,M,I,B,E,z,H,V);else{const R=b.el&&b.el._isVueCE?b.el:null;try{R&&R._beginPatch(),W(b,w,B,E,z,H,V)}finally{R&&R._endPatch()}}},P=(b,w,M,I,B,E,z,H)=>{let V,R;const{props:ee,shapeFlag:q,transition:Z,dirs:ie}=b;if(V=b.el=o(b.type,E,ee&&ee.is,ee),q&8?c(V,b.children):q&16&&T(b.children,V,null,I,B,Uo(b,E),z,H),ie&&Gi(b,null,I,"created"),v(V,b,b.scopeId,z,I),ee){for(const Ce in ee)Ce!=="value"&&!hr(Ce)&&n(V,Ce,null,ee[Ce],E,I);"value"in ee&&n(V,"value",null,ee.value,E),(R=ee.onVnodeBeforeMount)&&qt(R,I,b)}ie&&Gi(b,null,I,"beforeMount");const ae=T0(B,Z);ae&&Z.beforeEnter(V),s(V,w,M),((R=ee&&ee.onVnodeMounted)||ae||ie)&&xt(()=>{R&&qt(R,I,b),ae&&Z.enter(V),ie&&Gi(b,null,I,"mounted")},B)},v=(b,w,M,I,B)=>{if(M&&p(b,M),I)for(let E=0;E<I.length;E++)p(b,I[E]);if(B){let E=B.subTree;if(w===E||Id(E.type)&&(E.ssContent===w||E.ssFallback===w)){const z=B.vnode;v(b,z,z.scopeId,z.slotScopeIds,B.parent)}}},T=(b,w,M,I,B,E,z,H,V=0)=>{for(let R=V;R<b.length;R++){const ee=b[R]=H?_i(b[R]):Zt(b[R]);y(null,ee,w,M,I,B,E,z,H)}},W=(b,w,M,I,B,E,z)=>{const H=w.el=b.el;let{patchFlag:V,dynamicChildren:R,dirs:ee}=w;V|=b.patchFlag&16;const q=b.props||Se,Z=w.props||Se;let ie;if(M&&Yi(M,!1),(ie=Z.onVnodeBeforeUpdate)&&qt(ie,M,w,b),ee&&Gi(w,b,M,"beforeUpdate"),M&&Yi(M,!0),(q.innerHTML&&Z.innerHTML==null||q.textContent&&Z.textContent==null)&&c(H,""),R?K(b.dynamicChildren,R,H,M,I,Uo(w,B),E):z||de(b,w,H,null,M,I,Uo(w,B),E,!1),V>0){if(V&16)G(H,q,Z,M,B);else if(V&2&&q.class!==Z.class&&n(H,"class",null,Z.class,B),V&4&&n(H,"style",q.style,Z.style,B),V&8){const ae=w.dynamicProps;for(let Ce=0;Ce<ae.length;Ce++){const be=ae[Ce],ct=q[be],ut=Z[be];(ut!==ct||be==="value")&&n(H,be,ct,ut,B,M)}}V&1&&b.children!==w.children&&c(H,w.children)}else!z&&R==null&&G(H,q,Z,M,B);((ie=Z.onVnodeUpdated)||ee)&&xt(()=>{ie&&qt(ie,M,w,b),ee&&Gi(w,b,M,"updated")},I)},K=(b,w,M,I,B,E,z)=>{for(let H=0;H<w.length;H++){const V=b[H],R=w[H],ee=V.el&&(V.type===_e||!ss(V,R)||V.shapeFlag&198)?u(V.el):M;y(V,R,ee,null,I,B,E,z,!0)}},G=(b,w,M,I,B)=>{if(w!==M){if(w!==Se)for(const E in w)!hr(E)&&!(E in M)&&n(b,E,w[E],null,B,I);for(const E in M){if(hr(E))continue;const z=M[E],H=w[E];z!==H&&E!=="value"&&n(b,E,H,z,B,I)}"value"in M&&n(b,"value",w.value,M.value,B)}},_=(b,w,M,I,B,E,z,H,V)=>{const R=w.el=b?b.el:l(""),ee=w.anchor=b?b.anchor:l("");let{patchFlag:q,dynamicChildren:Z,slotScopeIds:ie}=w;ie&&(H=H?H.concat(ie):ie),b==null?(s(R,M,I),s(ee,M,I),T(w.children||[],M,ee,B,E,z,H,V)):q>0&&q&64&&Z&&b.dynamicChildren?(K(b.dynamicChildren,Z,M,B,E,z,H),(w.key!=null||B&&w===B.subTree)&&Bd(b,w,!0)):de(b,w,M,ee,B,E,z,H,V)},te=(b,w,M,I,B,E,z,H,V)=>{w.slotScopeIds=H,b==null?w.shapeFlag&512?B.ctx.activate(w,M,I,z,V):ne(w,M,I,B,E,z,V):ve(b,w,V)},ne=(b,w,M,I,B,E,z)=>{const H=b.component=K0(b,I,B);if(mo(b)&&(H.ctx.renderer=Gs),X0(H,!1,z),H.asyncDep){if(B&&B.registerDep(H,ke,z),!b.el){const V=H.subTree=U(Ye);m(null,V,w,M),b.placeholder=V.el}}else ke(H,b,w,M,B,E,z)},ve=(b,w,M)=>{const I=w.component=b.component;if(V0(b,w,M))if(I.asyncDep&&!I.asyncResolved){ye(I,w,M);return}else I.next=w,I.update();else w.el=b.el,I.vnode=w},ke=(b,w,M,I,B,E,z)=>{const H=()=>{if(b.isMounted){let{next:q,bu:Z,u:ie,parent:ae,vnode:Ce}=b;{const Qt=$d(b);if(Qt){q&&(q.el=Ce.el,ye(b,q,z)),Qt.asyncDep.then(()=>{b.isUnmounted||H()});return}}let be=q,ct;Yi(b,!1),q?(q.el=Ce.el,ye(b,q,z)):q=Ce,Z&&xn(Z),(ct=q.props&&q.props.onVnodeBeforeUpdate)&&qt(ct,ae,q,Ce),Yi(b,!0);const ut=Vh(b),zt=b.subTree;b.subTree=ut,y(zt,ut,u(zt.el),Xi(zt),b,B,E),q.el=ut.el,be===null&&F0(b,ut.el),ie&&xt(ie,B),(ct=q.props&&q.props.onVnodeUpdated)&&xt(()=>qt(ct,ae,q,Ce),B)}else{let q;const{el:Z,props:ie}=w,{bm:ae,m:Ce,parent:be,root:ct,type:ut}=b,zt=Ds(w);Yi(b,!1),ae&&xn(ae),!zt&&(q=ie&&ie.onVnodeBeforeMount)&&qt(q,be,w),Yi(b,!0);{ct.ce&&ct.ce._def.shadowRoot!==!1&&ct.ce._injectChildStyle(ut);const Qt=b.subTree=Vh(b);y(null,Qt,M,I,b,B,E),w.el=Qt.el}if(Ce&&xt(Ce,B),!zt&&(q=ie&&ie.onVnodeMounted)){const Qt=w;xt(()=>qt(q,be,Qt),B)}(w.shapeFlag&256||be&&Ds(be.vnode)&&be.vnode.shapeFlag&256)&&b.a&&xt(b.a,B),b.isMounted=!0,w=M=I=null}};b.scope.on();const V=b.effect=new Uu(H);b.scope.off();const R=b.update=V.run.bind(V),ee=b.job=V.runIfDirty.bind(V);ee.i=b,ee.id=b.uid,V.scheduler=()=>Ha(ee),Yi(b,!0),R()},ye=(b,w,M)=>{w.component=b;const I=b.vnode.props;b.vnode=w,b.next=null,w0(b,w.props,I,M),A0(b,w.children,M),vi(),_h(b),ki()},de=(b,w,M,I,B,E,z,H,V=!1)=>{const R=b&&b.children,ee=b?b.shapeFlag:0,q=w.children,{patchFlag:Z,shapeFlag:ie}=w;if(Z>0){if(Z&128){Ki(R,q,M,I,B,E,z,H,V);return}else if(Z&256){st(R,q,M,I,B,E,z,H,V);return}}ie&8?(ee&16&&Wt(R,B,E),q!==R&&c(M,q)):ee&16?ie&16?Ki(R,q,M,I,B,E,z,H,V):Wt(R,B,E,!0):(ee&8&&c(M,""),ie&16&&T(q,M,I,B,E,z,H,V))},st=(b,w,M,I,B,E,z,H,V)=>{b=b||Ms,w=w||Ms;const R=b.length,ee=w.length,q=Math.min(R,ee);let Z;for(Z=0;Z<q;Z++){const ie=w[Z]=V?_i(w[Z]):Zt(w[Z]);y(b[Z],ie,M,null,B,E,z,H,V)}R>ee?Wt(b,B,E,!0,!1,q):T(w,M,I,B,E,z,H,V,q)},Ki=(b,w,M,I,B,E,z,H,V)=>{let R=0;const ee=w.length;let q=b.length-1,Z=ee-1;for(;R<=q&&R<=Z;){const ie=b[R],ae=w[R]=V?_i(w[R]):Zt(w[R]);if(ss(ie,ae))y(ie,ae,M,null,B,E,z,H,V);else break;R++}for(;R<=q&&R<=Z;){const ie=b[q],ae=w[Z]=V?_i(w[Z]):Zt(w[Z]);if(ss(ie,ae))y(ie,ae,M,null,B,E,z,H,V);else break;q--,Z--}if(R>q){if(R<=Z){const ie=Z+1,ae=ie<ee?w[ie].el:I;for(;R<=Z;)y(null,w[R]=V?_i(w[R]):Zt(w[R]),M,ae,B,E,z,H,V),R++}}else if(R>Z)for(;R<=q;)De(b[R],B,E,!0),R++;else{const ie=R,ae=R,Ce=new Map;for(R=ae;R<=Z;R++){const yt=w[R]=V?_i(w[R]):Zt(w[R]);yt.key!=null&&Ce.set(yt.key,R)}let be,ct=0;const ut=Z-ae+1;let zt=!1,Qt=0;const Ys=new Array(ut);for(R=0;R<ut;R++)Ys[R]=0;for(R=ie;R<=q;R++){const yt=b[R];if(ct>=ut){De(yt,B,E,!0);continue}let Ut;if(yt.key!=null)Ut=Ce.get(yt.key);else for(be=ae;be<=Z;be++)if(Ys[be-ae]===0&&ss(yt,w[be])){Ut=be;break}Ut===void 0?De(yt,B,E,!0):(Ys[Ut-ae]=R+1,Ut>=Qt?Qt=Ut:zt=!0,y(yt,w[Ut],M,null,B,E,z,H,V),ct++)}const Sh=zt?_0(Ys):Ms;for(be=Sh.length-1,R=ut-1;R>=0;R--){const yt=ae+R,Ut=w[yt],Ch=w[yt+1],Oh=yt+1<ee?Ch.el||Ch.placeholder:I;Ys[R]===0?y(null,Ut,M,Oh,B,E,z,H,V):zt&&(be<0||R!==Sh[be]?je(Ut,M,Oh,2):be--)}}},je=(b,w,M,I,B=null)=>{const{el:E,type:z,transition:H,children:V,shapeFlag:R}=b;if(R&6){je(b.component.subTree,w,M,I);return}if(R&128){b.suspense.move(w,M,I);return}if(R&64){z.move(b,w,M,Gs);return}if(z===_e){s(E,w,M);for(let q=0;q<V.length;q++)je(V[q],w,M,I);s(b.anchor,w,M);return}if(z===kn){C(b,w,M);return}if(I!==2&&R&1&&H)if(I===0)H.beforeEnter(E),s(E,w,M),xt(()=>H.enter(E),B);else{const{leave:q,delayLeave:Z,afterLeave:ie}=H,ae=()=>{b.ctx.isUnmounted?r(E):s(E,w,M)},Ce=()=>{E._isLeaving&&E[ci](!0),q(E,()=>{ae(),ie&&ie()})};Z?Z(E,ae,Ce):Ce()}else s(E,w,M)},De=(b,w,M,I=!1,B=!1)=>{const{type:E,props:z,ref:H,children:V,dynamicChildren:R,shapeFlag:ee,patchFlag:q,dirs:Z,cacheIndex:ie}=b;if(q===-2&&(B=!1),H!=null&&(vi(),dr(H,null,M,b,!0),ki()),ie!=null&&(w.renderCache[ie]=void 0),ee&256){w.ctx.deactivate(b);return}const ae=ee&1&&Z,Ce=!Ds(b);let be;if(Ce&&(be=z&&z.onVnodeBeforeUnmount)&&qt(be,w,b),ee&6)Ai(b.component,M,I);else{if(ee&128){b.suspense.unmount(M,I);return}ae&&Gi(b,null,w,"beforeUnmount"),ee&64?b.type.remove(b,w,M,Gs,I):R&&!R.hasOnce&&(E!==_e||q>0&&q&64)?Wt(R,w,M,!1,!0):(E===_e&&q&384||!B&&ee&16)&&Wt(V,w,M),I&&mt(b)}(Ce&&(be=z&&z.onVnodeUnmounted)||ae)&&xt(()=>{be&&qt(be,w,b),ae&&Gi(b,null,w,"unmounted")},M)},mt=b=>{const{type:w,el:M,anchor:I,transition:B}=b;if(w===_e){oi(M,I);return}if(w===kn){S(b);return}const E=()=>{r(M),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(b.shapeFlag&1&&B&&!B.persisted){const{leave:z,delayLeave:H}=B,V=()=>z(M,E);H?H(b.el,E,V):V()}else E()},oi=(b,w)=>{let M;for(;b!==w;)M=f(b),r(b),b=M;r(w)},Ai=(b,w,M)=>{const{bum:I,scope:B,job:E,subTree:z,um:H,m:V,a:R}=b;Nh(V),Nh(R),I&&xn(I),B.stop(),E&&(E.flags|=8,De(z,b,w,M)),H&&xt(H,w),xt(()=>{b.isUnmounted=!0},w)},Wt=(b,w,M,I=!1,B=!1,E=0)=>{for(let z=E;z<b.length;z++)De(b[z],w,M,I,B)},Xi=b=>{if(b.shapeFlag&6)return Xi(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const w=f(b.anchor||b.el),M=w&&w[Yg];return M?f(M):w};let No=!1;const wh=(b,w,M)=>{b==null?w._vnode&&De(w._vnode,null,null,!0):y(w._vnode||null,b,w,null,null,null,M),w._vnode=b,No||(No=!0,_h(),hd(),No=!1)},Gs={p:y,um:De,m:je,r:mt,mt:ne,mc:T,pc:de,pbc:K,n:Xi,o:i};return{render:wh,hydrate:void 0,createApp:x0(wh)}}function Uo({type:i,props:e},t){return t==="svg"&&i==="foreignObject"||t==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Yi({effect:i,job:e},t){t?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function T0(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Bd(i,e,t=!1){const s=i.children,r=e.children;if(Y(s)&&Y(r))for(let n=0;n<s.length;n++){const o=s[n];let l=r[n];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[n]=_i(r[n]),l.el=o.el),!t&&l.patchFlag!==-2&&Bd(o,l)),l.type===xo&&l.patchFlag!==-1&&(l.el=o.el),l.type===Ye&&!l.el&&(l.el=o.el)}}function _0(i){const e=i.slice(),t=[0];let s,r,n,o,l;const a=i.length;for(s=0;s<a;s++){const h=i[s];if(h!==0){if(r=t[t.length-1],i[r]<h){e[s]=r,t.push(s);continue}for(n=0,o=t.length-1;n<o;)l=n+o>>1,i[t[l]]<h?n=l+1:o=l;h<i[t[n]]&&(n>0&&(e[s]=t[n-1]),t[n]=s)}}for(n=t.length,o=t[n-1];n-- >0;)t[n]=o,o=e[o];return t}function $d(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:$d(e)}function Nh(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const D0=Symbol.for("v-scx"),B0=()=>vn(D0);function Pt(i,e,t){return Ed(i,e,t)}function Ed(i,e,t=Se){const{immediate:s,deep:r,flush:n,once:o}=t,l=qe({},t),a=e&&s||!e&&n!=="post";let h;if(Mr){if(n==="sync"){const p=B0();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=ri,p.resume=ri,p.pause=ri,p}}const c=at;l.call=(p,g,y)=>Nt(p,c,g,y);let u=!1;n==="post"?l.scheduler=p=>{xt(p,c&&c.suspense)}:n!=="sync"&&(u=!0,l.scheduler=(p,g)=>{g?p():Ha(p)}),l.augmentJob=p=>{e&&(p.flags|=4),u&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=qg(i,e,l);return Mr&&(h?h.push(f):a&&f()),f}function $0(i,e,t){const s=this.proxy,r=Ie(i)?i.includes(".")?Rd(s,i):()=>s[i]:i.bind(s,s);let n;re(e)?n=e:(n=e.handler,t=e);const o=Qr(this),l=Ed(r,n.bind(s),t);return o(),l}function Rd(i,e){const t=e.split(".");return()=>{let s=i;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const E0=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${Vi(e)}Modifiers`]||i[`${ms(e)}Modifiers`];function R0(i,e,...t){if(i.isUnmounted)return;const s=i.vnode.props||Se;let r=t;const n=e.startsWith("update:"),o=n&&E0(s,e.slice(7));o&&(o.trim&&(r=t.map(c=>Ie(c)?c.trim():c)),o.number&&(r=t.map(uo)));let l,a=s[l=Vo(e)]||s[l=Vo(Vi(e))];!a&&n&&(a=s[l=Vo(ms(e))]),a&&Nt(a,i,6,r);const h=s[l+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,Nt(h,i,6,r)}}const L0=new WeakMap;function Ld(i,e,t=!1){const s=t?L0:e.emitsCache,r=s.get(i);if(r!==void 0)return r;const n=i.emits;let o={},l=!1;if(!re(i)){const a=h=>{const c=Ld(h,e,!0);c&&(l=!0,qe(o,c))};!t&&e.mixins.length&&e.mixins.forEach(a),i.extends&&a(i.extends),i.mixins&&i.mixins.forEach(a)}return!n&&!l?(xe(i)&&s.set(i,null),null):(Y(n)?n.forEach(a=>o[a]=null):qe(o,n),xe(i)&&s.set(i,o),o)}function bo(i,e){return!i||!ho(e)?!1:(e=e.slice(2).replace(/Once$/,""),pe(i,e[0].toLowerCase()+e.slice(1))||pe(i,ms(e))||pe(i,e))}function Vh(i){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[n],slots:o,attrs:l,emit:a,render:h,renderCache:c,props:u,data:f,setupState:p,ctx:g,inheritAttrs:y}=i,x=In(i);let m,k;try{if(t.shapeFlag&4){const S=r||s,$=S;m=Zt(h.call($,S,c,u,p,f,g)),k=l}else{const S=e;m=Zt(S.length>1?S(u,{attrs:l,slots:o,emit:a}):S(u,null)),k=e.props?l:I0(l)}}catch(S){pr.length=0,go(S,i,1),m=U(Ye)}let C=m;if(k&&y!==!1){const S=Object.keys(k),{shapeFlag:$}=C;S.length&&$&7&&(n&&S.some(Pa)&&(k=N0(k,n)),C=Hi(C,k,!1,!0))}return t.dirs&&(C=Hi(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&Cr(C,t.transition),m=C,In(x),m}const I0=i=>{let e;for(const t in i)(t==="class"||t==="style"||ho(t))&&((e||(e={}))[t]=i[t]);return e},N0=(i,e)=>{const t={};for(const s in i)(!Pa(s)||!(s.slice(9)in e))&&(t[s]=i[s]);return t};function V0(i,e,t){const{props:s,children:r,component:n}=i,{props:o,children:l,patchFlag:a}=e,h=n.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return s?Fh(s,o,h):!!o;if(a&8){const c=e.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(o[f]!==s[f]&&!bo(h,f))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Fh(s,o,h):!0:!!o;return!1}function Fh(i,e,t){const s=Object.keys(e);if(s.length!==Object.keys(i).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(e[n]!==i[n]&&!bo(t,n))return!0}return!1}function F0({vnode:i,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=e.vnode).el=t,e=e.parent;else break}}const Id=i=>i.__isSuspense;function H0(i,e){e&&e.pendingBranch?Y(i)?e.effects.push(...i):e.effects.push(i):Gg(i)}const _e=Symbol.for("v-fgt"),xo=Symbol.for("v-txt"),Ye=Symbol.for("v-cmt"),kn=Symbol.for("v-stc"),pr=[];let St=null;function O(i=!1){pr.push(St=i?null:[])}function j0(){pr.pop(),St=pr[pr.length-1]||null}let Or=1;function Fn(i,e=!1){Or+=i,i<0&&St&&e&&(St.hasOnce=!0)}function Nd(i){return i.dynamicChildren=Or>0?St||Ms:null,j0(),Or>0&&St&&St.push(i),i}function A(i,e,t,s,r,n){return Nd(d(i,e,t,s,r,n,!0))}function Me(i,e,t,s,r){return Nd(U(i,e,t,s,r,!0))}function Ar(i){return i?i.__v_isVNode===!0:!1}function ss(i,e){return i.type===e.type&&i.key===e.key}const Vd=({key:i})=>i??null,wn=({ref:i,ref_key:e,ref_for:t})=>(typeof i=="number"&&(i=""+i),i!=null?Ie(i)||et(i)||re(i)?{i:Je,r:i,k:e,f:!!t}:i:null);function d(i,e=null,t=null,s=0,r=null,n=i===_e?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&Vd(e),ref:e&&wn(e),scopeId:ud,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Je};return l?(Qa(a,t),n&128&&i.normalize(a)):t&&(a.shapeFlag|=Ie(t)?8:16),Or>0&&!o&&St&&(a.patchFlag>0||n&6)&&a.patchFlag!==32&&St.push(a),a}const U=W0;function W0(i,e=null,t=null,s=0,r=null,n=!1){if((!i||i===u0)&&(i=Ye),Ar(i)){const l=Hi(i,e,!0);return t&&Qa(l,t),Or>0&&!n&&St&&(l.shapeFlag&6?St[St.indexOf(i)]=l:St.push(l)),l.patchFlag=-2,l}if(Z0(i)&&(i=i.__vccOpts),e){e=z0(e);let{class:l,style:a}=e;l&&!Ie(l)&&(e.class=me(l)),xe(a)&&(Fa(a)&&!Y(a)&&(a=qe({},a)),e.style=Da(a))}const o=Ie(i)?1:Id(i)?128:dd(i)?64:xe(i)?4:re(i)?2:0;return d(i,e,t,s,r,o,n,!0)}function z0(i){return i?Fa(i)||Ad(i)?qe({},i):i:null}function Hi(i,e,t=!1,s=!1){const{props:r,ref:n,patchFlag:o,children:l,transition:a}=i,h=e?Q0(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&Vd(h),ref:e&&e.ref?t&&n?Y(n)?n.concat(wn(e)):[n,wn(e)]:wn(e):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==_e?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:a,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Hi(i.ssContent),ssFallback:i.ssFallback&&Hi(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return a&&s&&Cr(c,a.clone(c)),c}function oe(i=" ",e=0){return U(xo,null,i,e)}function kt(i,e){const t=U(kn,null,i);return t.staticCount=e,t}function Q(i="",e=!1){return e?(O(),Me(Ye,null,i)):U(Ye,null,i)}function Zt(i){return i==null||typeof i=="boolean"?U(Ye):Y(i)?U(_e,null,i.slice()):Ar(i)?_i(i):U(xo,null,String(i))}function _i(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Hi(i)}function Qa(i,e){let t=0;const{shapeFlag:s}=i;if(e==null)e=null;else if(Y(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Qa(i,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!Ad(e)?e._ctx=Je:r===3&&Je&&(Je.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else re(e)?(e={default:e,_ctx:Je},t=32):(e=String(e),s&64?(t=16,e=[oe(e)]):t=8);i.children=e,i.shapeFlag|=t}function Q0(...i){const e={};for(let t=0;t<i.length;t++){const s=i[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=me([e.class,s.class]));else if(r==="style")e.style=Da([e.style,s.style]);else if(ho(r)){const n=e[r],o=s[r];o&&n!==o&&!(Y(n)&&n.includes(o))&&(e[r]=n?[].concat(n,o):o)}else r!==""&&(e[r]=s[r])}return e}function qt(i,e,t,s=null){Nt(i,e,7,[t,s])}const U0=Sd();let q0=0;function K0(i,e,t){const s=i.type,r=(e?e.appContext:i.appContext)||U0,n={uid:q0++,vnode:i,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pd(s,r),emitsOptions:Ld(s,r),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:s.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=R0.bind(null,n),i.ce&&i.ce(n),n}let at=null;const Fd=()=>at||Je;let Hn,_l;{const i=fo(),e=(t,s)=>{let r;return(r=i[t])||(r=i[t]=[]),r.push(s),n=>{r.length>1?r.forEach(o=>o(n)):r[0](n)}};Hn=e("__VUE_INSTANCE_SETTERS__",t=>at=t),_l=e("__VUE_SSR_SETTERS__",t=>Mr=t)}const Qr=i=>{const e=at;return Hn(i),i.scope.on(),()=>{i.scope.off(),Hn(e)}},Hh=()=>{at&&at.scope.off(),Hn(null)};function Hd(i){return i.vnode.shapeFlag&4}let Mr=!1;function X0(i,e=!1,t=!1){e&&_l(e);const{props:s,children:r}=i.vnode,n=Hd(i);k0(i,s,n,e),O0(i,r,t||e);const o=n?G0(i,e):void 0;return e&&_l(!1),o}function G0(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,d0);const{setup:s}=t;if(s){vi();const r=i.setupContext=s.length>1?J0(i):null,n=Qr(i),o=Wr(s,i,0,[i.props,r]),l=Nu(o);if(ki(),n(),(l||i.sp)&&!Ds(i)&&bd(i),l){if(o.then(Hh,Hh),e)return o.then(a=>{jh(i,a)}).catch(a=>{go(a,i,0)});i.asyncDep=o}else jh(i,o)}else jd(i)}function jh(i,e,t){re(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:xe(e)&&(i.setupState=od(e)),jd(i)}function jd(i,e,t){const s=i.type;i.render||(i.render=s.render||ri);{const r=Qr(i);vi();try{f0(i)}finally{ki(),r()}}}const Y0={get(i,e){return Ge(i,"get",""),i[e]}};function J0(i){const e=t=>{i.exposed=t||{}};return{attrs:new Proxy(i.attrs,Y0),slots:i.slots,emit:i.emit,expose:e}}function vo(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(od(Fg(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in fr)return fr[t](i)},has(e,t){return t in e||t in fr}})):i.proxy}function Z0(i){return re(i)&&"__vccOpts"in i}const ko=(i,e)=>Qg(i,e,Mr);function em(i,e,t){try{Fn(-1);const s=arguments.length;return s===2?xe(e)&&!Y(e)?Ar(e)?U(i,null,[e]):U(i,e):U(i,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Ar(t)&&(t=[t]),U(i,e,t))}finally{Fn(1)}}const tm="3.5.24";let Dl;const Wh=typeof window<"u"&&window.trustedTypes;if(Wh)try{Dl=Wh.createPolicy("vue",{createHTML:i=>i})}catch{}const Wd=Dl?i=>Dl.createHTML(i):i=>i,im="http://www.w3.org/2000/svg",sm="http://www.w3.org/1998/Math/MathML",hi=typeof document<"u"?document:null,zh=hi&&hi.createElement("template"),rm={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,s)=>{const r=e==="svg"?hi.createElementNS(im,i):e==="mathml"?hi.createElementNS(sm,i):t?hi.createElement(i,{is:t}):hi.createElement(i);return i==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:i=>hi.createTextNode(i),createComment:i=>hi.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>hi.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,s,r,n){const o=t?t.previousSibling:e.lastChild;if(r&&(r===n||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===n||!(r=r.nextSibling)););else{zh.innerHTML=Wd(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const l=zh.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Mi="transition",Zs="animation",Pr=Symbol("_vtc"),zd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nm=qe({},fd,zd),om=i=>(i.displayName="Transition",i.props=nm,i),Bl=om((i,{slots:e})=>em(e0,lm(i),e)),Ji=(i,e=[])=>{Y(i)?i.forEach(t=>t(...e)):i&&i(...e)},Qh=i=>i?Y(i)?i.some(e=>e.length>1):i.length>1:!1;function lm(i){const e={};for(const _ in i)_ in zd||(e[_]=i[_]);if(i.css===!1)return e;const{name:t="v",type:s,duration:r,enterFromClass:n=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=n,appearActiveClass:h=o,appearToClass:c=l,leaveFromClass:u=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=i,g=am(r),y=g&&g[0],x=g&&g[1],{onBeforeEnter:m,onEnter:k,onEnterCancelled:C,onLeave:S,onLeaveCancelled:$,onBeforeAppear:P=m,onAppear:v=k,onAppearCancelled:T=C}=e,W=(_,te,ne,ve)=>{_._enterCancelled=ve,Zi(_,te?c:l),Zi(_,te?h:o),ne&&ne()},K=(_,te)=>{_._isLeaving=!1,Zi(_,u),Zi(_,p),Zi(_,f),te&&te()},G=_=>(te,ne)=>{const ve=_?v:k,ke=()=>W(te,_,ne);Ji(ve,[te,ke]),Uh(()=>{Zi(te,_?a:n),ai(te,_?c:l),Qh(ve)||qh(te,s,y,ke)})};return qe(e,{onBeforeEnter(_){Ji(m,[_]),ai(_,n),ai(_,o)},onBeforeAppear(_){Ji(P,[_]),ai(_,a),ai(_,h)},onEnter:G(!1),onAppear:G(!0),onLeave(_,te){_._isLeaving=!0;const ne=()=>K(_,te);ai(_,u),_._enterCancelled?(ai(_,f),Gh(_)):(Gh(_),ai(_,f)),Uh(()=>{_._isLeaving&&(Zi(_,u),ai(_,p),Qh(S)||qh(_,s,x,ne))}),Ji(S,[_,ne])},onEnterCancelled(_){W(_,!1,void 0,!0),Ji(C,[_])},onAppearCancelled(_){W(_,!0,void 0,!0),Ji(T,[_])},onLeaveCancelled(_){K(_),Ji($,[_])}})}function am(i){if(i==null)return null;if(xe(i))return[qo(i.enter),qo(i.leave)];{const e=qo(i);return[e,e]}}function qo(i){return ug(i)}function ai(i,e){e.split(/\s+/).forEach(t=>t&&i.classList.add(t)),(i[Pr]||(i[Pr]=new Set)).add(e)}function Zi(i,e){e.split(/\s+/).forEach(s=>s&&i.classList.remove(s));const t=i[Pr];t&&(t.delete(e),t.size||(i[Pr]=void 0))}function Uh(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let hm=0;function qh(i,e,t,s){const r=i._endId=++hm,n=()=>{r===i._endId&&s()};if(t!=null)return setTimeout(n,t);const{type:o,timeout:l,propCount:a}=cm(i,e);if(!o)return s();const h=o+"end";let c=0;const u=()=>{i.removeEventListener(h,f),n()},f=p=>{p.target===i&&++c>=a&&u()};setTimeout(()=>{c<a&&u()},l+1),i.addEventListener(h,f)}function cm(i,e){const t=window.getComputedStyle(i),s=g=>(t[g]||"").split(", "),r=s(`${Mi}Delay`),n=s(`${Mi}Duration`),o=Kh(r,n),l=s(`${Zs}Delay`),a=s(`${Zs}Duration`),h=Kh(l,a);let c=null,u=0,f=0;e===Mi?o>0&&(c=Mi,u=o,f=n.length):e===Zs?h>0&&(c=Zs,u=h,f=a.length):(u=Math.max(o,h),c=u>0?o>h?Mi:Zs:null,f=c?c===Mi?n.length:a.length:0);const p=c===Mi&&/\b(?:transform|all)(?:,|$)/.test(s(`${Mi}Property`).toString());return{type:c,timeout:u,propCount:f,hasTransform:p}}function Kh(i,e){for(;i.length<e.length;)i=i.concat(i);return Math.max(...e.map((t,s)=>Xh(t)+Xh(i[s])))}function Xh(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function Gh(i){return(i?i.ownerDocument:document).body.offsetHeight}function um(i,e,t){const s=i[Pr];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}const Yh=Symbol("_vod"),dm=Symbol("_vsh"),fm=Symbol(""),pm=/(?:^|;)\s*display\s*:/;function gm(i,e,t){const s=i.style,r=Ie(t);let n=!1;if(t&&!r){if(e)if(Ie(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Sn(s,l,"")}else for(const o in e)t[o]==null&&Sn(s,o,"");for(const o in t)o==="display"&&(n=!0),Sn(s,o,t[o])}else if(r){if(e!==t){const o=s[fm];o&&(t+=";"+o),s.cssText=t,n=pm.test(t)}}else e&&i.removeAttribute("style");Yh in i&&(i[Yh]=n?s.display:"",i[dm]&&(s.display="none"))}const Jh=/\s*!important$/;function Sn(i,e,t){if(Y(t))t.forEach(s=>Sn(i,e,s));else if(t==null&&(t=""),e.startsWith("--"))i.setProperty(e,t);else{const s=mm(i,e);Jh.test(t)?i.setProperty(ms(s),t.replace(Jh,""),"important"):i[s]=t}}const Zh=["Webkit","Moz","ms"],Ko={};function mm(i,e){const t=Ko[e];if(t)return t;let s=Vi(e);if(s!=="filter"&&s in i)return Ko[e]=s;s=Hu(s);for(let r=0;r<Zh.length;r++){const n=Zh[r]+s;if(n in i)return Ko[e]=n}return e}const ec="http://www.w3.org/1999/xlink";function tc(i,e,t,s,r,n=yg(e)){s&&e.startsWith("xlink:")?t==null?i.removeAttributeNS(ec,e.slice(6,e.length)):i.setAttributeNS(ec,e,t):t==null||n&&!Wu(t)?i.removeAttribute(e):i.setAttribute(e,n?"":It(t)?String(t):t)}function ic(i,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(i[e]=e==="innerHTML"?Wd(t):t);return}const n=i.tagName;if(e==="value"&&n!=="PROGRESS"&&!n.includes("-")){const l=n==="OPTION"?i.getAttribute("value")||"":i.value,a=t==null?i.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in i))&&(i.value=a),t==null&&i.removeAttribute(e),i._value=t;return}let o=!1;if(t===""||t==null){const l=typeof i[e];l==="boolean"?t=Wu(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{i[e]=t}catch{}o&&i.removeAttribute(r||e)}function $i(i,e,t,s){i.addEventListener(e,t,s)}function ym(i,e,t,s){i.removeEventListener(e,t,s)}const sc=Symbol("_vei");function bm(i,e,t,s,r=null){const n=i[sc]||(i[sc]={}),o=n[e];if(s&&o)o.value=s;else{const[l,a]=xm(e);if(s){const h=n[e]=wm(s,r);$i(i,l,h,a)}else o&&(ym(i,l,o,a),n[e]=void 0)}}const rc=/(?:Once|Passive|Capture)$/;function xm(i){let e;if(rc.test(i)){e={};let s;for(;s=i.match(rc);)i=i.slice(0,i.length-s[0].length),e[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):ms(i.slice(2)),e]}let Xo=0;const vm=Promise.resolve(),km=()=>Xo||(vm.then(()=>Xo=0),Xo=Date.now());function wm(i,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Nt(Sm(s,t.value),e,5,[s])};return t.value=i,t.attached=km(),t}function Sm(i,e){if(Y(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const nc=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Cm=(i,e,t,s,r,n)=>{const o=r==="svg";e==="class"?um(i,s,o):e==="style"?gm(i,t,s):ho(e)?Pa(e)||bm(i,e,t,s,n):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Om(i,e,s,o))?(ic(i,e,s),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&tc(i,e,s,o,n,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!Ie(s))?ic(i,Vi(e),s,n,e):(e==="true-value"?i._trueValue=s:e==="false-value"&&(i._falseValue=s),tc(i,e,s,o))};function Om(i,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in i&&nc(e)&&re(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&i.tagName==="IFRAME"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=i.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return nc(e)&&Ie(t)?!1:e in i}const Ns=i=>{const e=i.props["onUpdate:modelValue"]||!1;return Y(e)?t=>xn(e,t):e};function Am(i){i.target.composing=!0}function oc(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi=Symbol("_assign");function lc(i,e,t){return e&&(i=i.trim()),t&&(i=uo(i)),i}const Pi={created(i,{modifiers:{lazy:e,trim:t,number:s}},r){i[bi]=Ns(r);const n=s||r.props&&r.props.type==="number";$i(i,e?"change":"input",o=>{o.target.composing||i[bi](lc(i.value,t,n))}),(t||n)&&$i(i,"change",()=>{i.value=lc(i.value,t,n)}),e||($i(i,"compositionstart",Am),$i(i,"compositionend",oc),$i(i,"change",oc))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:n}},o){if(i[bi]=Ns(o),i.composing)return;const l=(n||i.type==="number")&&!/^0\d/.test(i.value)?uo(i.value):i.value,a=e??"";l!==a&&(document.activeElement===i&&i.type!=="range"&&(s&&e===t||r&&i.value.trim()===a)||(i.value=a))}},Qd={deep:!0,created(i,e,t){i[bi]=Ns(t),$i(i,"change",()=>{const s=i._modelValue,r=Tr(i),n=i.checked,o=i[bi];if(Y(s)){const l=Ba(s,r),a=l!==-1;if(n&&!a)o(s.concat(r));else if(!n&&a){const h=[...s];h.splice(l,1),o(h)}}else if(qs(s)){const l=new Set(s);n?l.add(r):l.delete(r),o(l)}else o(Ud(i,n))})},mounted:ac,beforeUpdate(i,e,t){i[bi]=Ns(t),ac(i,e,t)}};function ac(i,{value:e,oldValue:t},s){i._modelValue=e;let r;if(Y(e))r=Ba(e,s.props.value)>-1;else if(qs(e))r=e.has(s.props.value);else{if(e===t)return;r=jr(e,Ud(i,!0))}i.checked!==r&&(i.checked=r)}const Mm={deep:!0,created(i,{value:e,modifiers:{number:t}},s){const r=qs(e);$i(i,"change",()=>{const n=Array.prototype.filter.call(i.options,o=>o.selected).map(o=>t?uo(Tr(o)):Tr(o));i[bi](i.multiple?r?new Set(n):n:n[0]),i._assigning=!0,Ln(()=>{i._assigning=!1})}),i[bi]=Ns(s)},mounted(i,{value:e}){hc(i,e)},beforeUpdate(i,e,t){i[bi]=Ns(t)},updated(i,{value:e}){i._assigning||hc(i,e)}};function hc(i,e){const t=i.multiple,s=Y(e);if(!(t&&!s&&!qs(e))){for(let r=0,n=i.options.length;r<n;r++){const o=i.options[r],l=Tr(o);if(t)if(s){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=Ba(e,l)>-1}else o.selected=e.has(l);else if(jr(Tr(o),e)){i.selectedIndex!==r&&(i.selectedIndex=r);return}}!t&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function Tr(i){return"_value"in i?i._value:i.value}function Ud(i,e){const t=e?"_trueValue":"_falseValue";return t in i?i[t]:e}const Pm=["ctrl","shift","alt","meta"],Tm={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>Pm.some(t=>i[`${t}Key`]&&!e.includes(t))},Ct=(i,e)=>{const t=i._withMods||(i._withMods={}),s=e.join(".");return t[s]||(t[s]=((r,...n)=>{for(let o=0;o<e.length;o++){const l=Tm[e[o]];if(l&&l(r,e))return}return i(r,...n)}))},_m=qe({patchProp:Cm},rm);let cc;function Dm(){return cc||(cc=M0(_m))}const Bm=((...i)=>{const e=Dm().createApp(...i),{mount:t}=e;return e.mount=s=>{const r=Em(s);if(!r)return;const n=e._component;!re(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,$m(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function $m(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Em(i){return Ie(i)?document.querySelector(i):i}const Ua="/goli-logo.jpg",Pe="/api/v1",Rm=window.location.protocol==="https:"?"wss:":"ws:",Lm=`${Rm}//${window.location.host}/ws`;function jn(i){localStorage.setItem("goli_token",i)}function wo(){return localStorage.getItem("goli_token")}function qd(){localStorage.removeItem("goli_token")}const $l="goli:auto-logout";function Im(){qd(),window.dispatchEvent(new CustomEvent($l))}async function Ke(i,e={}){const t=await fetch(i,e);if(t.status===401||t.status===403){wo()&&(console.warn("Session expired. Logging out automatically."),Im());const s=await t.json().catch(()=>({error:"Authentication failed",description:"Your session has expired. Please log in again."}));throw new Error(s.description||s.error||"Authentication failed")}return t}function Nm(i){localStorage.setItem("goli_authorization_key",i)}function Kd(){return localStorage.getItem("goli_authorization_key")}function Vm(){localStorage.removeItem("goli_authorization_key")}function tt(){const i=wo();return{"Content-Type":"application/json",Authorization:i?`Bearer ${i}`:""}}function qa(){const i=Kd();return{"Content-Type":"application/json",Authorization:i?`Goli-Auth-Key ${i}`:""}}function Fm(i=!1){if(i){const t=Kd();return{Authorization:t?`Goli-Auth-Key ${t}`:""}}const e=wo();return{Authorization:e?`Bearer ${e}`:""}}async function Hm(){const i=await fetch(`${Pe}/setup/status`,{method:"GET"});if(!i.ok)throw new Error("Failed to fetch setup status");return i.json()}async function jm(i){const e=await fetch(`${Pe}/setup/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setup_password:i})});if(!e.ok){const s=await e.json();throw new Error(s.description||"Invalid setup password")}const t=await e.json();return t.auth_key&&Nm(t.auth_key),t}async function Wm(i){console.log("login",i);const e=await fetch(`${Pe}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(console.log("response",e),!e.ok){const s=await e.json();throw new Error(s.description||"Login failed")}const t=await e.json();return t.token&&jn(t.token),t}async function zm(i){const e=await fetch(`${Pe}/auth/2fa/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok){const s=await e.json();throw new Error(s.description||"2FA verification failed")}const t=await e.json();return t.token&&jn(t.token),t}async function Qm(){try{await Ke(`${Pe}/auth/logout`,{method:"POST",headers:tt()})}catch(i){console.error("Logout request failed:",i)}finally{qd()}}async function Xd(i=!1){const e=i?qa():tt(),t=i?await fetch(`${Pe}/config`,{headers:e}):await Ke(`${Pe}/config`,{headers:e});if(!t.ok)throw new Error("Failed to fetch config");return t.json()}async function Gd(i,e=!1){const t=e?qa():tt(),s=e?await fetch(`${Pe}/config`,{method:"POST",headers:t,body:JSON.stringify(i)}):await Ke(`${Pe}/config`,{method:"POST",headers:t,body:JSON.stringify(i)});if(!s.ok){const r=await s.json();throw new Error(r.description||"Failed to update config")}return s.json()}async function Um(){const i=await Ke(`${Pe}/users`,{headers:tt()});if(!i.ok)throw new Error("Failed to fetch users");return i.json()}async function qm(i,e=!1){const t=e?qa():tt(),s=e?await fetch(`${Pe}/users`,{method:"POST",headers:t,body:JSON.stringify(i)}):await Ke(`${Pe}/users`,{method:"POST",headers:t,body:JSON.stringify(i)});if(!s.ok){const r=await s.json();throw new Error(r.description||"Failed to create user")}return s.json()}async function uc(i,e){const t=await Ke(`${Pe}/users/${i}`,{method:"PUT",headers:tt(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.description||"Failed to update user")}return t.json()}async function Ka(i={}){const e=new URLSearchParams(i).toString(),t=await Ke(`${Pe}/jobs${e?"?"+e:""}`,{headers:tt()});if(!t.ok)throw new Error("Failed to fetch jobs");const s=await t.json();return Array.isArray(s)?s:[]}async function Xa(i){const e=await Ke(`${Pe}/jobs/${i}`,{headers:tt()});if(!e.ok)throw new Error("Failed to fetch job");const t=await e.json();return t&&!Array.isArray(t.steps)&&(t.steps=[]),t}async function Km(i){const e=await Ke(`${Pe}/jobs`,{method:"POST",headers:tt(),body:JSON.stringify(i)});if(!e.ok){const t=await e.json();throw new Error(t.description||"Failed to create job")}return e.json()}async function Ga(i){const e=await Ke(`${Pe}/jobs/${i}/cancel`,{method:"POST",headers:tt()});if(!e.ok){const t=await e.json();throw new Error(t.description||"Failed to cancel job")}return e.json()}async function Xm(){const i=await Ke(`${Pe}/pipelines`,{headers:tt()});if(!i.ok)throw new Error("Failed to fetch pipelines");const e=await i.json();return Array.isArray(e)?e:[]}async function Gm(i){const e=await Ke(`${Pe}/pipelines/${i}`,{headers:tt()});if(!e.ok)throw new Error("Failed to fetch pipeline");return e.json()}async function Ym(i){const e=await Ke(`${Pe}/pipelines`,{method:"POST",headers:tt(),body:JSON.stringify(i)});if(!e.ok){const t=await e.json();throw new Error(t.description||t.error||"Failed to create pipeline")}return e.json()}async function Jm(i,e){const t=await Ke(`${Pe}/pipelines/${i}`,{method:"PUT",headers:tt(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.description||s.error||"Failed to update pipeline")}return t.json()}async function Zm(i){const e=await Ke(`${Pe}/pipelines/${i}`,{method:"DELETE",headers:tt()});if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to delete pipeline"}));throw new Error(t.error||t.message||"Failed to delete pipeline")}return e.json()}async function e1(i,e=!1){const t=Fm(e),s=e?await fetch(`${Pe}/pipelines/upload`,{method:"POST",headers:t,body:i}):await Ke(`${Pe}/pipelines/upload`,{method:"POST",headers:t,body:i});if(!s.ok){const r=await s.json();throw new Error(r.description||"Failed to upload pipeline")}return s.json()}async function t1(i,e={}){const t=await Ke(`${Pe}/pipelines/${i}/run`,{method:"POST",headers:tt(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.description||"Failed to run pipeline")}return t.json()}function El(i){const e=new WebSocket(Lm);return e.onopen=()=>{console.log("WebSocket connected")},e.onmessage=t=>{try{const s=JSON.parse(t.data);i(s)}catch(s){console.error("Error parsing WebSocket message:",s)}},e.onerror=t=>{console.error("WebSocket error:",t)},e.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>{El(i)},3e3)},e}const Yd="goli_theme",lt={LIGHT:"light",DARK:"dark",SYSTEM:"system"},ii=F(lt.SYSTEM),So=F("light");function Jd(){return window.matchMedia("(prefers-color-scheme: dark)").matches?lt.DARK:lt.LIGHT}const Rl=ko(()=>ii.value===lt.SYSTEM?So.value===lt.DARK:ii.value===lt.DARK);function Co(){document.documentElement.classList.toggle("dark",Rl.value)}function i1(){const i=localStorage.getItem(Yd);i&&Object.values(lt).includes(i)?ii.value=i:ii.value=lt.SYSTEM,So.value=Jd(),Co()}function en(i){localStorage.setItem(Yd,i),ii.value=i,Co()}function s1(){const i=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>{So.value=Jd(),ii.value===lt.SYSTEM&&Co()};i.addEventListener("change",e)}function Zd(){return typeof window<"u"&&!document.documentElement.classList.contains("dark")&&!document.documentElement.classList.contains("light-initialized")&&(i1(),s1(),document.documentElement.classList.add("light-initialized")),Pt([ii,So,Rl],()=>{Co()},{immediate:!0}),{currentTheme:ii,isDark:Rl,themes:lt,setTheme:en,toggleTheme:()=>{ii.value===lt.LIGHT?en(lt.DARK):ii.value===lt.DARK?en(lt.SYSTEM):en(lt.LIGHT)}}}const Wn={__name:"StatusBadge",props:{status:{type:String,required:!0},showDot:{type:Boolean,default:!0}},setup(i){const e={pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",running:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800",completed:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800",failed:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800",cancelled:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border border-gray-200 dark:border-gray-600",success:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800",error:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"},t={pending:"bg-yellow-600",running:"bg-blue-600 animate-pulse",completed:"bg-green-600",failed:"bg-red-600",cancelled:"bg-gray-600",success:"bg-green-600",error:"bg-red-600"};return(s,r)=>(O(),A("span",{class:me(["inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full",e[i.status]||e.pending])},[i.showDot?(O(),A("span",{key:0,class:me(["w-1.5 h-1.5 rounded-full",t[i.status]||t.pending])},null,2)):Q("",!0),ws(s.$slots,"default",{},()=>[oe(L(i.status),1)])],2))}},r1={class:"space-y-6 pb-8"},n1={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},o1={class:"card hover:shadow-lg transition-shadow duration-200 border-l-4 border-primary-500"},l1={class:"flex items-center justify-between"},a1={class:"text-3xl font-bold text-gray-900 dark:text-white"},h1={class:"card hover:shadow-lg transition-shadow duration-200 border-l-4 border-blue-500"},c1={class:"flex items-center justify-between"},u1={class:"text-3xl font-bold text-blue-600 dark:text-blue-400"},d1={class:"card hover:shadow-lg transition-shadow duration-200 border-l-4 border-green-500"},f1={class:"flex items-center justify-between"},p1={class:"text-3xl font-bold text-green-600 dark:text-green-400"},g1={class:"card hover:shadow-lg transition-shadow duration-200 border-l-4 border-red-500"},m1={class:"flex items-center justify-between"},y1={class:"text-3xl font-bold text-red-600 dark:text-red-400"},b1={class:"card hover:shadow-lg transition-shadow duration-200"},x1={class:"flex items-center justify-between mb-6"},v1=["disabled"],k1={key:0,class:"flex flex-col items-center justify-center py-12"},w1={key:1,class:"flex flex-col items-center justify-center py-12"},S1={key:2,class:"overflow-x-auto scrollbar-thin"},C1={class:"min-w-full divide-y divide-gray-200"},O1={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},A1={class:"px-6 py-4 whitespace-nowrap"},M1={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},P1={class:"px-6 py-4 whitespace-nowrap"},T1={class:"flex items-center gap-2"},_1={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},D1={class:"px-6 py-4 whitespace-nowrap"},B1={class:"px-6 py-4 whitespace-nowrap"},$1={class:"text-sm text-gray-500 dark:text-gray-400"},E1={class:"px-6 py-4 whitespace-nowrap text-right text-sm"},R1={class:"flex items-center justify-end gap-2"},L1=["onClick"],I1=["onClick","disabled"],N1={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},V1={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F1={__name:"Dashboard",emits:["view-logs"],setup(i,{emit:e}){const t=e,s=F(!1),r=F([]),n=F(null),o=F({total:0,running:0,completed:0,failed:0});function l(f){if(!f)return"-";const p=new Date(f);return p.toLocaleDateString()+" "+p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}async function a(){s.value=!0;try{const f=await Ka({limit:10});r.value=Array.isArray(f)?f:[],h(r.value)}catch(f){console.error("Error loading jobs:",f),r.value=[],h([])}finally{s.value=!1}}function h(f){const p=Array.isArray(f)?f:[];o.value={total:p.length,running:p.filter(g=>g&&g.status==="running").length,completed:p.filter(g=>g&&g.status==="completed").length,failed:p.filter(g=>g&&g.status==="failed").length}}function c(f){t("view-logs",f)}async function u(f){if(confirm("Are you sure you want to cancel this job?")){n.value=f;try{await Ga(f),await a()}catch(p){alert(p.message||"Failed to cancel job")}finally{n.value=null}}}return Ft(()=>{a(),setInterval(a,5e3)}),(f,p)=>(O(),A("div",r1,[p[19]||(p[19]=d("div",null,[d("h2",{class:"text-3xl font-bold text-white dark:text-gray-100 mb-1"},"Dashboard"),d("p",{class:"text-gray-300 dark:text-gray-400 text-sm"},"Overview of your CI/CD pipeline activity")],-1)),d("div",n1,[d("div",o1,[d("div",l1,[d("div",null,[p[1]||(p[1]=d("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Total Jobs",-1)),d("p",a1,L(o.value.total),1)]),p[2]||(p[2]=d("div",{class:"p-3 bg-primary-100 dark:bg-primary-900 rounded-lg"},[d("svg",{class:"w-8 h-8 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),d("div",h1,[d("div",c1,[d("div",null,[p[3]||(p[3]=d("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Running",-1)),d("p",u1,L(o.value.running),1)]),p[4]||(p[4]=d("div",{class:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg"},[d("svg",{class:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),d("div",d1,[d("div",f1,[d("div",null,[p[5]||(p[5]=d("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Completed",-1)),d("p",p1,L(o.value.completed),1)]),p[6]||(p[6]=d("div",{class:"p-3 bg-green-100 dark:bg-green-900 rounded-lg"},[d("svg",{class:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))])]),d("div",g1,[d("div",m1,[d("div",null,[p[7]||(p[7]=d("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Failed",-1)),d("p",y1,L(o.value.failed),1)]),p[8]||(p[8]=d("div",{class:"p-3 bg-red-100 dark:bg-red-900 rounded-lg"},[d("svg",{class:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])])]),d("div",b1,[d("div",x1,[p[11]||(p[11]=d("div",null,[d("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Recent Jobs"),d("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},"Latest job executions")],-1)),d("button",{onClick:p[0]||(p[0]=g=>a()),disabled:s.value,class:"btn btn-secondary text-sm px-4 py-2 flex items-center gap-2 disabled:opacity-50"},[(O(),A("svg",{class:me(["w-4 h-4",s.value&&"animate-spin"]),fill:"none",viewBox:"0 0 24 24"},[...p[9]||(p[9]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],2)),p[10]||(p[10]=oe(" Refresh ",-1))],8,v1)]),s.value?(O(),A("div",k1,[...p[12]||(p[12]=[d("svg",{class:"animate-spin h-8 w-8 text-primary-600 mb-4",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Loading jobs...",-1)])])):r.value.length===0?(O(),A("div",w1,[...p[13]||(p[13]=[kt('<div class="p-4 bg-gray-100 dark:bg-gray-700 rounded-full mb-4"><svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">No jobs found</h3><p class="text-gray-500 dark:text-gray-400 text-sm">Jobs will appear here once you start running pipelines</p>',3)])])):(O(),A("div",S1,[d("table",C1,[p[18]||(p[18]=d("thead",{class:"bg-gray-50 dark:bg-gray-800"},[d("tr",null,[d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ID "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Name "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Status "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Started "),d("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),d("tbody",O1,[(O(!0),A(_e,null,Oi(r.value,g=>(O(),A("tr",{key:g.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"},[d("td",A1,[d("span",M1,"#"+L(g.id),1)]),d("td",P1,[d("div",T1,[p[14]||(p[14]=d("svg",{class:"w-5 h-5 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),d("span",_1,L(g.name),1)])]),d("td",D1,[U(Wn,{status:g.status},null,8,["status"])]),d("td",B1,[d("span",$1,L(l(g.started_at)),1)]),d("td",E1,[d("div",R1,[d("button",{onClick:y=>c(g.id),class:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 hover:bg-primary-50 dark:hover:bg-primary-900/30 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1.5"},[...p[15]||(p[15]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),oe(" View Logs ",-1)])],8,L1),g.status==="pending"||g.status==="running"?(O(),A("button",{key:0,onClick:y=>u(g.id),disabled:n.value===g.id,class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5"},[n.value===g.id?(O(),A("svg",N1,[...p[16]||(p[16]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(O(),A("svg",V1,[...p[17]||(p[17]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])),oe(" "+L(n.value===g.id?"Cancelling...":"Cancel"),1)],8,I1)):Q("",!0)])])]))),128))])])]))])]))}},H1={class:"flex min-h-full items-center justify-center p-4"},j1={key:0,class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700"},W1={class:"flex items-center gap-3"},z1={class:"text-lg font-semibold text-gray-900 dark:text-white"},Q1={key:1,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 rounded-b-xl"},ef={__name:"Modal",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"md",validator:i=>["sm","md","lg","xl"].includes(i)},closable:{type:Boolean,default:!0},containerClass:{type:String,default:""},bodyClass:{type:String,default:""}},emits:["close"],setup(i){return(e,t)=>(O(),Me(Bl,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:he(()=>[i.show?(O(),A("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[2]||(t[2]=Ct(s=>e.$emit("close"),["self"]))},[d("div",H1,[d("div",{class:"fixed inset-0 bg-black/50 transition-opacity",onClick:t[0]||(t[0]=s=>e.$emit("close"))}),U(Bl,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 scale-95 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 translate-y-4"},{default:he(()=>[i.show?(O(),A("div",{key:0,class:me(["relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full",i.size==="sm"?"max-w-md":i.size==="md"?"max-w-lg":i.size==="lg"?"max-w-2xl":i.size==="xl"?"max-w-4xl":"max-w-md",i.containerClass])},[i.title||e.$slots.header?(O(),A("div",j1,[d("div",W1,[ws(e.$slots,"icon"),d("h3",z1,[ws(e.$slots,"title",{},()=>[oe(L(i.title),1)])])]),i.closable?(O(),A("button",{key:0,onClick:t[1]||(t[1]=s=>e.$emit("close")),class:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg p-1 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500"},[...t[3]||(t[3]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):Q("",!0)])):Q("",!0),d("div",{class:me(["px-6 py-4",i.bodyClass])},[ws(e.$slots,"default")],2),e.$slots.footer?(O(),A("div",Q1,[ws(e.$slots,"footer")])):Q("",!0)],2)):Q("",!0)]),_:3})])])):Q("",!0)]),_:3}))}},U1=["for"],q1={key:0,class:"text-red-500 dark:text-red-400 ml-0.5"},K1={key:1,class:"text-gray-500 dark:text-gray-400 font-normal ml-1"},X1={class:"relative"},G1={key:0,class:"mt-1.5 text-xs text-gray-500 dark:text-gray-400"},Te={__name:"FormField",props:{label:{type:String,default:""},id:{type:String,default:""},required:{type:Boolean,default:!1},hint:{type:String,default:""},description:{type:String,default:""},containerClass:{type:String,default:""},labelClass:{type:String,default:""}},setup(i){return(e,t)=>(O(),A("div",{class:me(["space-y-1.5",i.containerClass])},[i.label?(O(),A("label",{key:0,for:i.id,class:me(["block text-sm font-medium",i.required?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300",i.labelClass])},[oe(L(i.label)+" ",1),i.required?(O(),A("span",q1,"*")):Q("",!0),i.hint?(O(),A("span",K1,"("+L(i.hint)+")",1)):Q("",!0)],10,U1)):Q("",!0),d("div",X1,[ws(e.$slots,"default"),i.description?(O(),A("div",G1,L(i.description),1)):Q("",!0)])],2))}},Y1={class:"relative"},J1=["type","value","placeholder","required","disabled"],Z1={key:0,class:"absolute -bottom-5 left-0 text-xs text-red-600 dark:text-red-400 mt-1"},Be={__name:"TextInput",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","blur","focus"],setup(i){return(e,t)=>(O(),A("div",Y1,[d("input",{type:i.type,value:i.modelValue,placeholder:i.placeholder,required:i.required,disabled:i.disabled,class:me(["w-full px-4 py-2.5 text-sm border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-0",i.disabled?"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 focus:border-primary-500 dark:focus:border-primary-400 focus:ring-primary-500 dark:focus:ring-primary-400",i.error?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400 focus:ring-red-500 dark:focus:ring-red-400":"","placeholder:text-gray-400 dark:placeholder:text-gray-500"]),onInput:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.value)),onBlur:t[1]||(t[1]=s=>e.$emit("blur")),onFocus:t[2]||(t[2]=s=>e.$emit("focus"))},null,42,J1),i.error?(O(),A("div",Z1,L(i.error),1)):Q("",!0)]))}},ey={class:"flex-shrink-0 mt-0.5"},ty={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},iy={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},sy={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ry={key:3,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ny={class:"flex-1 min-w-0"},oy={class:"text-sm font-medium"},ly={key:0,class:"mt-1 text-xs opacity-90"},us={__name:"Alert",props:{type:{type:String,default:"info",validator:i=>["success","error","warning","info"].includes(i)},message:{type:String,required:!0},description:{type:String,default:""},show:{type:Boolean,default:!0},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(i){return(e,t)=>(O(),Me(Bl,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform translate-y-2"},{default:he(()=>[i.show?(O(),A("div",{key:0,class:me(["flex items-start gap-3 p-4 rounded-lg border",i.type==="success"?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200":i.type==="error"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":i.type==="warning"?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200":"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"])},[d("div",ey,[i.type==="success"?(O(),A("svg",ty,[...t[1]||(t[1]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):i.type==="error"?(O(),A("svg",iy,[...t[2]||(t[2]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])])):i.type==="warning"?(O(),A("svg",sy,[...t[3]||(t[3]=[d("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):(O(),A("svg",ry,[...t[4]||(t[4]=[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])]))]),d("div",ny,[d("p",oy,L(i.message),1),i.description?(O(),A("p",ly,L(i.description),1)):Q("",!0)]),i.dismissible?(O(),A("button",{key:0,onClick:t[0]||(t[0]=s=>e.$emit("dismiss")),class:me(["flex-shrink-0 text-current opacity-60 hover:opacity-100 transition-opacity","focus:outline-none focus:ring-2 focus:ring-offset-2 rounded",i.type==="success"?"focus:ring-green-500":i.type==="error"?"focus:ring-red-500":i.type==="warning"?"focus:ring-yellow-500":"focus:ring-blue-500"])},[...t[5]||(t[5]=[d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],2)):Q("",!0)],2)):Q("",!0)]),_:1}))}},ay=["disabled"],hy={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2"},cy={class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg"},uy=["disabled"],dy={class:"flex justify-end gap-3"},fy=["disabled"],py=["disabled"],gy={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},my={__name:"UploadPipelineModal",emits:["close","uploaded"],setup(i,{emit:e}){const t=e,s=F(!1),r=F(""),n=F({name:"",description:"",file:null,runImmediately:!1});function o(a){n.value.file=a.target.files[0]}async function l(){if(!n.value.file){r.value="Please select a YAML file";return}s.value=!0,r.value="";try{const a=new FormData;a.append("yaml_file",n.value.file),n.value.name&&a.append("name",n.value.name),n.value.description&&a.append("description",n.value.description),n.value.runImmediately&&a.append("run","true"),(await e1(a)).job_started,t("uploaded")}catch(a){r.value=a.message||"Error uploading pipeline"}finally{s.value=!1}}return(a,h)=>(O(),Me(ef,{show:!0,title:"Upload Pipeline YAML",size:"md",onClose:h[5]||(h[5]=c=>a.$emit("close"))},{footer:he(()=>[d("div",dy,[d("button",{type:"button",onClick:h[4]||(h[4]=c=>a.$emit("close")),class:"btn btn-secondary",disabled:s.value}," Cancel ",8,fy),d("button",{type:"button",onClick:l,disabled:s.value||!n.value.file,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[s.value?(O(),A("svg",gy,[...h[8]||(h[8]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(s.value?"Uploading...":"Upload & Create"),1)],8,py)])]),default:he(()=>[d("form",{onSubmit:Ct(l,["prevent"]),class:"space-y-5"},[U(Te,{label:"Pipeline Name",description:"Optional: Will use YAML name if not provided"},{default:he(()=>[U(Be,{modelValue:n.value.name,"onUpdate:modelValue":h[0]||(h[0]=c=>n.value.name=c),type:"text",placeholder:"Enter pipeline name",disabled:s.value},null,8,["modelValue","disabled"])]),_:1}),U(Te,{label:"Description",description:"Optional: Brief description of the pipeline"},{default:he(()=>[U(Be,{modelValue:n.value.description,"onUpdate:modelValue":h[1]||(h[1]=c=>n.value.description=c),type:"text",placeholder:"Enter description",disabled:s.value},null,8,["modelValue","disabled"])]),_:1}),U(Te,{label:"YAML File",required:"",description:"Select a .yaml or .yml file"},{default:he(()=>[d("input",{onChange:o,type:"file",accept:".yaml,.yml",required:"",disabled:s.value,class:"w-full px-4 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-50 dark:file:bg-primary-900/50 file:text-primary-700 dark:file:text-primary-300 hover:file:bg-primary-100 dark:hover:file:bg-primary-900"},null,40,ay),n.value.file?(O(),A("div",hy,[h[6]||(h[6]=d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),oe(" "+L(n.value.file.name),1)])):Q("",!0)]),_:1}),d("div",cy,[Bt(d("input",{"onUpdate:modelValue":h[2]||(h[2]=c=>n.value.runImmediately=c),type:"checkbox",id:"runImmediately",disabled:s.value,class:"mt-1 h-4 w-4 text-primary-600 dark:text-primary-400 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"},null,8,uy),[[Qd,n.value.runImmediately]]),h[7]||(h[7]=d("label",{for:"runImmediately",class:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer"},[d("span",{class:"font-medium"},"Run pipeline immediately after upload"),d("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},"The pipeline will start executing as soon as it's uploaded")],-1))]),r.value?(O(),Me(us,{key:0,type:"error",message:r.value,dismissible:"",onDismiss:h[3]||(h[3]=c=>r.value="")},null,8,["message"])):Q("",!0)],32)]),_:1}))}},yy={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},by={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between sticky top-0 bg-white dark:bg-gray-800"},xy={class:"text-lg font-semibold text-gray-900 dark:text-white"},vy={class:"p-6 space-y-6"},ky={class:"grid grid-cols-2 gap-4"},wy={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Sy={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Cy={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Oy={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ay={class:"bg-gray-900 dark:bg-gray-950 rounded-lg p-4 overflow-x-auto"},My={class:"text-sm text-green-400 dark:text-green-300 font-mono whitespace-pre-wrap"},Py={key:0},Ty={class:"space-y-2"},_y={class:"flex items-center justify-between"},Dy={class:"font-medium text-gray-900 dark:text-white"},By={class:"text-sm text-gray-500 dark:text-gray-400"},$y={class:"flex items-center space-x-2"},Ey=["onClick"],Ry={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"},Ly={__name:"PipelineDetailModal",props:{pipeline:{type:Object,required:!0}},emits:["close","view-logs","run-pipeline"],setup(i,{emit:e}){const t=i,s=e,r=F([]);function n(c){return c?new Date(c).toLocaleString():"-"}function o(c){const u={pending:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",running:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",completed:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",failed:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",cancelled:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"};return u[c]||u.pending}function l(c){s("view-logs",c)}function a(){s("run-pipeline",t.pipeline.id)}async function h(){try{const c=await Ka({limit:10});r.value=(Array.isArray(c)?c:[]).filter(u=>u.pipeline_id===t.pipeline.id).slice(0,5)}catch(c){console.error("Error loading recent jobs:",c),r.value=[]}}return Ft(()=>{h()}),(c,u)=>(O(),A("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:u[2]||(u[2]=Ct(f=>c.$emit("close"),["self"]))},[d("div",yy,[d("div",by,[d("h3",xy," Pipeline Details - "+L(i.pipeline.name),1),d("button",{onClick:u[0]||(u[0]=f=>c.$emit("close")),class:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"},[...u[3]||(u[3]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),d("div",vy,[d("div",null,[u[8]||(u[8]=d("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Pipeline Information",-1)),d("dl",ky,[d("div",null,[u[4]||(u[4]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"ID",-1)),d("dd",wy,"#"+L(i.pipeline.id),1)]),d("div",null,[u[5]||(u[5]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Name",-1)),d("dd",Sy,L(i.pipeline.name),1)]),d("div",null,[u[6]||(u[6]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Description",-1)),d("dd",Cy,L(i.pipeline.description||"-"),1)]),d("div",null,[u[7]||(u[7]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Created At",-1)),d("dd",Oy,L(n(i.pipeline.created_at)),1)])])]),d("div",null,[u[9]||(u[9]=d("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Pipeline Definition",-1)),d("div",Ay,[d("pre",My,L(i.pipeline.definition),1)])]),r.value.length>0?(O(),A("div",Py,[u[10]||(u[10]=d("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Recent Jobs",-1)),d("div",Ty,[(O(!0),A(_e,null,Oi(r.value,f=>(O(),A("div",{key:f.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 bg-gray-50 dark:bg-gray-700/30"},[d("div",_y,[d("div",null,[d("div",Dy,"#"+L(f.id)+" - "+L(f.name),1),d("div",By," Started: "+L(n(f.started_at)),1)]),d("div",$y,[d("span",{class:me(o(f.status))},L(f.status),3),d("button",{onClick:p=>l(f.id),class:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300"}," View Logs ",8,Ey)])])]))),128))])])):Q("",!0)]),d("div",Ry,[d("button",{onClick:u[1]||(u[1]=f=>c.$emit("close")),class:"btn btn-secondary"}," Close "),d("button",{onClick:a,class:"btn btn-primary"}," Run Pipeline ")])])]))}},Iy={class:"space-y-6 pb-8"},Ny={class:"flex items-center justify-between"},Vy={class:"flex items-center gap-3"},Fy={class:"card hover:shadow-lg transition-shadow duration-200"},Hy={key:0,class:"flex flex-col items-center justify-center py-12"},jy={key:1,class:"flex flex-col items-center justify-center py-12"},Wy={key:2,class:"overflow-x-auto scrollbar-thin"},zy={class:"min-w-full divide-y divide-gray-200"},Qy={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Uy={class:"px-6 py-4 whitespace-nowrap"},qy={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ky={class:"px-6 py-4 whitespace-nowrap"},Xy={class:"flex items-center gap-2"},Gy={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Yy={class:"px-6 py-4"},Jy={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1"},Zy={class:"px-6 py-4 whitespace-nowrap"},eb={class:"text-sm text-gray-500 dark:text-gray-400"},tb={class:"px-6 py-4 whitespace-nowrap text-right text-sm"},ib={class:"flex items-center justify-end gap-2"},sb=["onClick","disabled"],rb={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},nb={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ob=["onClick"],lb=["onClick"],ab=["onClick","disabled"],hb={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},cb={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ub={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"},db={class:"p-6"},fb={class:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4"},pb={class:"text-gray-900 dark:text-white"},gb={class:"flex gap-3"},mb=["disabled"],yb={__name:"Pipelines",emits:["view-logs","create-pipeline","edit-pipeline"],setup(i,{emit:e}){const t=e,s=F(!1),r=F([]),n=F(!1),o=F(null),l=F(null),a=F(null),h=F(null);function c(P){if(!P)return"-";const v=new Date(P);return v.toLocaleDateString()+" "+v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}async function u(){s.value=!0;try{const P=await Xm();r.value=Array.isArray(P)?P:[]}catch(P){console.error("Error loading pipelines:",P),r.value=[]}finally{s.value=!1}}async function f(P,v){o.value=P;try{await t1(P,{name:`${v} - Run`,triggered_by:"UI"}),await u()}catch(T){alert("Error running pipeline: "+T.message)}finally{o.value=null}}function p(){t("create-pipeline")}function g(P){t("edit-pipeline",P)}function y(P){const v=r.value.find(T=>T.id===P);v&&(l.value=v)}function x(P){t("view-logs",P),l.value=null}function m(P){const v=r.value.find(T=>T.id===P);v&&(l.value=null,f(P,v.name))}function k(){n.value=!1,u()}function C(P,v){h.value={id:P,name:v}}function S(){h.value=null}async function $(P){a.value=P;try{await Zm(P),h.value=null,await u()}catch(v){alert("Error deleting pipeline: "+v.message)}finally{a.value=null}}return Ft(()=>{u()}),(P,v)=>(O(),A("div",Iy,[d("div",Ny,[v[7]||(v[7]=d("div",null,[d("h2",{class:"text-3xl font-bold text-white dark:text-gray-100 mb-1"},"Pipelines"),d("p",{class:"text-gray-300 dark:text-gray-400 text-sm"},"Manage and execute your CI/CD pipelines")],-1)),d("div",Vy,[d("button",{onClick:p,class:"btn btn-primary px-6 py-2.5 flex items-center gap-2 hover:shadow-lg transition-shadow"},[...v[5]||(v[5]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Create Pipeline ",-1)])]),d("button",{onClick:v[0]||(v[0]=T=>n.value=!0),class:"btn btn-secondary px-6 py-2.5 flex items-center gap-2 hover:shadow-lg transition-shadow"},[...v[6]||(v[6]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),oe(" Upload YAML ",-1)])])])]),d("div",Fy,[s.value?(O(),A("div",Hy,[...v[8]||(v[8]=[d("svg",{class:"animate-spin h-8 w-8 text-primary-600 mb-4",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Loading pipelines...",-1)])])):r.value.length===0?(O(),A("div",jy,[v[9]||(v[9]=kt('<div class="p-4 bg-gray-100 dark:bg-gray-700 rounded-full mb-4"><svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">No pipelines found</h3><p class="text-gray-500 dark:text-gray-400 text-sm mb-4">Upload a YAML file to get started!</p>',3)),d("button",{onClick:v[1]||(v[1]=T=>n.value=!0),class:"btn btn-primary"}," Upload Your First Pipeline ")])):(O(),A("div",Wy,[d("table",zy,[v[17]||(v[17]=d("thead",{class:"bg-gray-50 dark:bg-gray-800"},[d("tr",null,[d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ID "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Name "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Description "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Created "),d("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),d("tbody",Qy,[(O(!0),A(_e,null,Oi(r.value,T=>(O(),A("tr",{key:T.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"},[d("td",Uy,[d("span",qy,"#"+L(T.id),1)]),d("td",Ky,[d("div",Xy,[v[10]||(v[10]=d("svg",{class:"w-5 h-5 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),d("span",Gy,L(T.name),1)])]),d("td",Yy,[d("span",Jy,L(T.description||"-"),1)]),d("td",Zy,[d("span",eb,L(c(T.created_at)),1)]),d("td",tb,[d("div",ib,[d("button",{onClick:W=>f(T.id,T.name),disabled:o.value===T.id,class:"btn btn-primary text-sm px-4 py-1.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5"},[o.value===T.id?(O(),A("svg",rb,[...v[11]||(v[11]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(O(),A("svg",nb,[...v[12]||(v[12]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},null,-1),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),oe(" "+L(o.value===T.id?"Running...":"Run"),1)],8,sb),d("button",{onClick:W=>g(T.id),class:"btn btn-secondary text-sm px-4 py-1.5 flex items-center gap-1.5"},[...v[13]||(v[13]=[d("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),oe(" Edit ",-1)])],8,ob),d("button",{onClick:W=>y(T.id),class:"btn btn-secondary text-sm px-4 py-1.5 flex items-center gap-1.5"},[...v[14]||(v[14]=[d("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),oe(" View ",-1)])],8,lb),d("button",{onClick:W=>C(T.id,T.name),disabled:a.value===T.id,class:"btn bg-red-600 hover:bg-red-700 text-white text-sm px-4 py-1.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5"},[a.value===T.id?(O(),A("svg",hb,[...v[15]||(v[15]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(O(),A("svg",cb,[...v[16]||(v[16]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])),oe(" "+L(a.value===T.id?"Deleting...":"Delete"),1)],8,ab)])])]))),128))])])]))]),n.value?(O(),Me(my,{key:0,onClose:v[2]||(v[2]=T=>n.value=!1),onUploaded:k})):Q("",!0),l.value?(O(),Me(Ly,{key:1,pipeline:l.value,onClose:v[3]||(v[3]=T=>l.value=null),onViewLogs:x,onRunPipeline:m},null,8,["pipeline"])):Q("",!0),h.value?(O(),A("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:Ct(S,["self"])},[d("div",ub,[d("div",db,[v[20]||(v[20]=kt('<div class="flex items-center mb-4"><div class="flex-shrink-0 mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900"><svg class="h-6 w-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div></div><h3 class="text-lg font-medium text-gray-900 dark:text-white text-center mb-2">Delete Pipeline</h3>',2)),d("p",fb,[v[18]||(v[18]=oe(" Are you sure you want to delete ",-1)),d("strong",pb,L(h.value.name),1),v[19]||(v[19]=oe("? ",-1))]),v[21]||(v[21]=d("p",{class:"text-xs text-red-600 dark:text-red-400 text-center mb-6 bg-red-50 dark:bg-red-900/30 p-3 rounded"},"  This will permanently delete the pipeline and all associated jobs and job steps. This action cannot be undone. ",-1)),d("div",gb,[d("button",{onClick:S,class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"}," Cancel "),d("button",{onClick:v[4]||(v[4]=T=>$(h.value.id)),disabled:a.value===h.value.id,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors"},L(a.value===h.value.id?"Deleting...":"Delete"),9,mb)])])])])):Q("",!0)]))}},bb={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},xb={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between sticky top-0 bg-white dark:bg-gray-800"},vb={class:"text-lg font-semibold text-gray-900 dark:text-white"},kb={class:"p-6 space-y-6"},wb={class:"grid grid-cols-2 gap-4"},Sb={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Cb={class:"mt-1"},Ob={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Ab={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Mb={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Pb={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},Tb={key:0},_b={class:"space-y-3"},Db={class:"flex items-center justify-between mb-2"},Bb={class:"flex items-center space-x-3"},$b={class:"flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-300 text-sm font-semibold"},Eb={class:"font-medium text-gray-900 dark:text-white"},Rb={class:"text-sm text-gray-500 dark:text-gray-400 space-y-1"},Lb={key:0},Ib={key:1},Nb={key:2,class:"text-red-600 dark:text-red-400 mt-2"},Vb=["onClick"],Fb={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},Hb={class:"text-sm text-red-700"},jb={class:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},Wb=["disabled"],zb={__name:"JobDetailsModal",props:{job:{type:Object,required:!0}},emits:["close","view-logs","job-updated"],setup(i,{emit:e}){const t=i,s=e,r=F(!1),n=ko(()=>!t.job||!t.job.steps||!Array.isArray(t.job.steps)?[]:[...t.job.steps].sort((f,p)=>(f.step_order||0)-(p.step_order||0)));function o(f){return f?new Date(f).toLocaleString():null}function l(f){const p={pending:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",running:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",completed:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",failed:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",cancelled:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"};return p[f]||p.pending}function a(f){return l(f)}function h(f){console.log("View logs for step:",f)}function c(){s("view-logs",t.job.id)}async function u(){if(confirm("Are you sure you want to cancel this job?")){r.value=!0;try{await Ga(t.job.id);const f=await Xa(t.job.id);s("job-updated",f),setTimeout(()=>{s("close")},1e3)}catch(f){alert(f.message||"Failed to cancel job")}finally{r.value=!1}}}return(f,p)=>(O(),A("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:p[2]||(p[2]=Ct(g=>f.$emit("close"),["self"]))},[d("div",bb,[d("div",xb,[d("h3",vb," Job Details - #"+L(i.job.id),1),d("button",{onClick:p[0]||(p[0]=g=>f.$emit("close")),class:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"},[...p[3]||(p[3]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),d("div",kb,[d("div",null,[p[10]||(p[10]=d("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Job Information",-1)),d("dl",wb,[d("div",null,[p[4]||(p[4]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Name",-1)),d("dd",Sb,L(i.job.name),1)]),d("div",null,[p[5]||(p[5]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Status",-1)),d("dd",Cb,[d("span",{class:me(l(i.job.status))},L(i.job.status),3)])]),d("div",null,[p[6]||(p[6]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Created At",-1)),d("dd",Ob,L(o(i.job.created_at)),1)]),d("div",null,[p[7]||(p[7]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Started At",-1)),d("dd",Ab,L(o(i.job.started_at)||"-"),1)]),d("div",null,[p[8]||(p[8]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Completed At",-1)),d("dd",Mb,L(o(i.job.completed_at)||"-"),1)]),d("div",null,[p[9]||(p[9]=d("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Triggered By",-1)),d("dd",Pb,L(i.job.triggered_by||"-"),1)])])]),i.job.steps&&i.job.steps.length>0?(O(),A("div",Tb,[p[12]||(p[12]=d("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3"},"Pipeline Steps",-1)),d("div",_b,[(O(!0),A(_e,null,Oi(n.value,(g,y)=>(O(),A("div",{key:g.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50"},[d("div",Db,[d("div",Bb,[d("span",$b,L(g.step_order),1),d("span",Eb,L(g.step_name),1)]),d("span",{class:me(a(g.status))},L(g.status),3)]),d("div",Rb,[g.started_at?(O(),A("div",Lb," Started: "+L(o(g.started_at)),1)):Q("",!0),g.completed_at?(O(),A("div",Ib," Completed: "+L(o(g.completed_at)),1)):Q("",!0),g.error_message?(O(),A("div",Nb,[p[11]||(p[11]=d("strong",null,"Error:",-1)),oe(" "+L(g.error_message),1)])):Q("",!0)]),g.logs?(O(),A("button",{key:0,onClick:x=>h(g),class:"mt-2 text-sm text-primary-600 hover:text-primary-800"}," View Logs  ",8,Vb)):Q("",!0)]))),128))])])):Q("",!0),i.job.error_message?(O(),A("div",Fb,[p[13]||(p[13]=d("h4",{class:"text-sm font-semibold text-red-800 mb-1"},"Error",-1)),d("p",Hb,L(i.job.error_message),1)])):Q("",!0)]),d("div",jb,[i.job.status==="pending"||i.job.status==="running"?(O(),A("button",{key:0,onClick:u,disabled:r.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},L(r.value?"Cancelling...":"Cancel Job"),9,Wb)):Q("",!0),d("button",{onClick:p[1]||(p[1]=g=>f.$emit("close")),class:"btn btn-secondary"}," Close "),d("button",{onClick:c,class:"btn btn-primary"}," View All Logs ")])])]))}},Qb={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col"},Ub={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},qb={class:"text-lg font-semibold text-gray-900 dark:text-white"},Kb={class:"flex-1 overflow-hidden flex"},Xb={class:"w-64 border-r border-gray-200 dark:border-gray-700 overflow-y-auto bg-gray-50 dark:bg-gray-700/50"},Gb={class:"p-4"},Yb={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Jb={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Zb={key:2,class:"space-y-2"},ex=["onClick"],tx={class:"flex items-center justify-between mb-1"},ix={class:"font-medium text-gray-900 dark:text-white"},sx={class:"text-xs text-gray-500 dark:text-gray-400"},rx={class:"flex-1 flex flex-col overflow-hidden"},nx={key:0,class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"},ox={class:"flex items-center justify-between"},lx={class:"font-semibold text-gray-900 dark:text-white"},ax={class:"text-sm text-gray-500 dark:text-gray-400"},hx={key:0,class:"mt-2 p-2 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded text-sm text-red-800 dark:text-red-200"},cx={class:"flex-1 overflow-y-auto p-4 bg-gray-900"},ux={key:0,class:"text-gray-400"},dx={key:1,class:"font-mono text-sm text-green-400 whitespace-pre-wrap"},fx={key:2,class:"text-gray-500"},px={key:3,class:"text-gray-500"},gx={key:1,class:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50"},mx={class:"bg-gray-900 rounded p-3 font-mono text-sm text-green-400 whitespace-pre-wrap max-h-32 overflow-y-auto"},yx={__name:"JobLogsModal",props:{jobId:{type:Number,required:!0},wsMessage:{type:Object,default:null}},emits:["close"],setup(i,{emit:e}){const t=i,s=F(!1),r=F(!1),n=F([]),o=F(null),l=F("");let a=null;function h(p){const g={pending:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",running:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",completed:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",failed:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"};return g[p]||g.pending}async function c(){s.value=!0;try{const p=await Xa(t.jobId);p&&p.steps&&Array.isArray(p.steps)&&p.steps.length>0?(n.value=p.steps.sort((g,y)=>(g.step_order||0)-(y.step_order||0)),n.value.length>0&&!o.value&&(o.value=n.value[0])):n.value=[],p&&p.logs?l.value=p.logs:l.value=""}catch(p){console.error("Error loading job details:",p),n.value=[],l.value=""}finally{s.value=!1}}Pt(()=>t.jobId,()=>{c()},{immediate:!0}),Pt(()=>t.wsMessage,p=>{if(!p||p.type!=="log_update")return;const g=p.data;if(g.job_id===t.jobId&&(g.logs&&(l.value=g.logs),g.step_id&&o.value&&o.value.id===g.step_id)){o.value.logs=g.step_logs;const y=n.value.findIndex(x=>x.id===g.step_id);y!==-1&&(n.value[y].logs=g.step_logs)}},{deep:!0});function u(){const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{a=new WebSocket(g),a.onmessage=y=>{try{const x=JSON.parse(y.data);if(x.type==="log_update"&&x.data.job_id===t.jobId){const m=x.data;if(m.logs&&(l.value=m.logs),m.step_id&&o.value&&o.value.id===m.step_id){o.value.logs=m.step_logs;const k=n.value.findIndex(C=>C.id===m.step_id);k!==-1&&(n.value[k].logs=m.step_logs)}}}catch(x){console.error("Error parsing WebSocket message:",x)}},a.onerror=y=>{console.error("WebSocket error:",y)},a.onclose=()=>{setTimeout(u,3e3)}}catch(y){console.error("Error setting up WebSocket:",y)}}let f=null;return Pt(o,p=>{p&&p.status==="running"?f=setInterval(c,3e4):f&&(clearInterval(f),f=null)}),Ft(()=>{c(),u()}),zr(()=>{a&&a.close(),f&&clearInterval(f)}),(p,g)=>(O(),A("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:g[1]||(g[1]=Ct(y=>p.$emit("close"),["self"]))},[d("div",Qb,[d("div",Ub,[d("h3",qb," Job Logs - #"+L(i.jobId),1),d("button",{onClick:g[0]||(g[0]=y=>p.$emit("close")),class:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"},[...g[2]||(g[2]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),d("div",Kb,[d("div",Xb,[d("div",Gb,[g[3]||(g[3]=d("h4",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Steps",-1)),s.value?(O(),A("div",Yb,"Loading...")):n.value.length===0?(O(),A("div",Jb,"No steps found")):(O(),A("div",Zb,[(O(!0),A(_e,null,Oi(n.value,y=>(O(),A("button",{key:y.id,onClick:x=>o.value=y,class:me(["w-full text-left px-3 py-2 rounded-lg text-sm transition-colors",o.value?.id===y.id?"bg-primary-100 dark:bg-primary-900/50 text-primary-800 dark:text-primary-300 border border-primary-300 dark:border-primary-700":"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600"])},[d("div",tx,[d("span",ix,L(y.step_name),1),d("span",{class:me(h(y.status))},L(y.status),3)]),d("div",sx," Step "+L(y.step_order),1)],10,ex))),128))]))])]),d("div",rx,[o.value?(O(),A("div",nx,[d("div",ox,[d("div",null,[d("h4",lx,L(o.value.step_name),1),d("p",ax,"Step "+L(o.value.step_order),1)]),d("span",{class:me(h(o.value.status))},L(o.value.status),3)]),o.value.error_message?(O(),A("div",hx,[g[4]||(g[4]=d("strong",null,"Error:",-1)),oe(" "+L(o.value.error_message),1)])):Q("",!0)])):Q("",!0),d("div",cx,[r.value?(O(),A("div",ux,"Loading logs...")):o.value&&o.value.logs?(O(),A("div",dx,L(o.value.logs),1)):o.value&&!o.value.logs?(O(),A("div",fx," No logs available for this step ")):(O(),A("div",px," Select a step to view logs "))]),l.value?(O(),A("div",gx,[g[5]||(g[5]=d("h4",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Job Logs",-1)),d("div",mx,L(l.value),1)])):Q("",!0)])])])]))}},bx={class:"flex justify-end gap-3"},xx=["disabled"],vx={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},kx={__name:"CreateJobModal",emits:["close","created"],setup(i,{emit:e}){const t=e,s=F(!1),r=F(""),n=F({name:"",triggered_by:""});async function o(){if(!n.value.name){r.value="Job name is required";return}s.value=!0,r.value="";try{await Km(n.value),t("created")}catch(l){r.value=l.message||"Error creating job"}finally{s.value=!1}}return(l,a)=>(O(),Me(ef,{show:!0,title:"Create New Job",size:"md",onClose:a[4]||(a[4]=h=>l.$emit("close"))},{footer:he(()=>[d("div",bx,[d("button",{type:"button",onClick:a[3]||(a[3]=h=>l.$emit("close")),class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:o,disabled:s.value||!n.value.name,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[s.value?(O(),A("svg",vx,[...a[5]||(a[5]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(s.value?"Creating...":"Create Job"),1)],8,xx)])]),default:he(()=>[d("form",{onSubmit:Ct(o,["prevent"]),class:"space-y-5"},[U(Te,{label:"Job Name",required:""},{default:he(()=>[U(Be,{modelValue:n.value.name,"onUpdate:modelValue":a[0]||(a[0]=h=>n.value.name=h),type:"text",placeholder:"Enter job name",required:"",disabled:s.value},null,8,["modelValue","disabled"])]),_:1}),U(Te,{label:"Triggered By",description:"Optional: e.g., Manual, Webhook, Schedule"},{default:he(()=>[U(Be,{modelValue:n.value.triggered_by,"onUpdate:modelValue":a[1]||(a[1]=h=>n.value.triggered_by=h),type:"text",placeholder:"e.g., Manual, Webhook, Schedule",disabled:s.value},null,8,["modelValue","disabled"])]),_:1}),r.value?(O(),Me(us,{key:0,type:"error",message:r.value,dismissible:"",onDismiss:a[2]||(a[2]=h=>r.value="")},null,8,["message"])):Q("",!0)],32)]),_:1}))}},wx={class:"space-y-6 pb-8"},Sx={class:"flex items-center justify-between"},Cx={class:"card hover:shadow-lg transition-shadow duration-200"},Ox={key:0,class:"flex flex-col items-center justify-center py-12"},Ax={key:1,class:"flex flex-col items-center justify-center py-12"},Mx={key:2,class:"overflow-x-auto scrollbar-thin"},Px={class:"min-w-full divide-y divide-gray-200"},Tx={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},_x=["onClick"],Dx={class:"px-6 py-4 whitespace-nowrap"},Bx={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},$x={class:"px-6 py-4 whitespace-nowrap"},Ex={class:"flex items-center gap-2"},Rx={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Lx={class:"px-6 py-4 whitespace-nowrap"},Ix={class:"px-6 py-4 whitespace-nowrap"},Nx={class:"text-sm text-gray-500 dark:text-gray-400"},Vx={class:"px-6 py-4 whitespace-nowrap"},Fx={class:"text-sm text-gray-500 dark:text-gray-400"},Hx={class:"px-6 py-4 whitespace-nowrap text-right text-sm"},jx=["onClick"],Wx=["onClick"],zx=["onClick","disabled"],Qx={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Ux={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qx={__name:"Jobs",emits:["view-logs"],setup(i,{emit:e}){const t=e,s=F(!1),r=F([]),n=F(null),o=F(null),l=F(!1),a=F(null);function h(m){if(!m)return"-";const k=new Date(m);return k.toLocaleDateString()+" "+k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}async function c(){s.value=!0;try{const m=await Ka({limit:50});r.value=Array.isArray(m)?m:[]}catch(m){console.error("Error loading jobs:",m),r.value=[]}finally{s.value=!1}}function u(m){n.value=m}function f(m){const k=r.value.find(C=>C.id===m);k&&(n.value=k)}function p(m){o.value=m}function g(m){t("view-logs",m),n.value=null}function y(){l.value=!1,c()}async function x(m){if(confirm("Are you sure you want to cancel this job?")){a.value=m;try{await Ga(m),await c()}catch(k){alert(k.message||"Failed to cancel job")}finally{a.value=null}}}return Ft(()=>{c(),setInterval(c,5e3)}),(m,k)=>(O(),A("div",wx,[d("div",Sx,[k[7]||(k[7]=d("div",null,[d("h2",{class:"text-3xl font-bold text-white dark:text-gray-100 mb-1"},"Jobs"),d("p",{class:"text-gray-300 dark:text-gray-400 text-sm"},"Monitor and manage your CI/CD jobs")],-1)),d("button",{onClick:k[0]||(k[0]=C=>l.value=!0),class:"btn btn-primary px-6 py-2.5 flex items-center gap-2 hover:shadow-lg transition-shadow"},[...k[6]||(k[6]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Create Job ",-1)])])]),d("div",Cx,[s.value?(O(),A("div",Ox,[...k[8]||(k[8]=[d("svg",{class:"animate-spin h-8 w-8 text-primary-600 mb-4",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Loading jobs...",-1)])])):r.value.length===0?(O(),A("div",Ax,[k[9]||(k[9]=kt('<div class="p-4 bg-gray-100 dark:bg-gray-700 rounded-full mb-4"><svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">No jobs found</h3><p class="text-gray-500 dark:text-gray-400 text-sm mb-4">Create a new job to get started!</p>',3)),d("button",{onClick:k[1]||(k[1]=C=>l.value=!0),class:"btn btn-primary"}," Create Your First Job ")])):(O(),A("div",Mx,[d("table",Px,[k[15]||(k[15]=d("thead",{class:"bg-gray-50 dark:bg-gray-800"},[d("tr",null,[d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ID "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Name "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Status "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Started "),d("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Completed "),d("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),d("tbody",Tx,[(O(!0),A(_e,null,Oi(r.value,C=>(O(),A("tr",{key:C.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer",onClick:S=>u(C)},[d("td",Dx,[d("span",Bx,"#"+L(C.id),1)]),d("td",$x,[d("div",Ex,[k[10]||(k[10]=d("svg",{class:"w-5 h-5 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),d("span",Rx,L(C.name),1)])]),d("td",Lx,[U(Wn,{status:C.status},null,8,["status"])]),d("td",Ix,[d("span",Nx,L(h(C.started_at)),1)]),d("td",Vx,[d("span",Fx,L(h(C.completed_at)),1)]),d("td",Hx,[d("div",{class:"flex items-center justify-end gap-2",onClick:k[2]||(k[2]=Ct(()=>{},["stop"]))},[d("button",{onClick:Ct(S=>f(C.id),["stop"]),class:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 hover:bg-primary-50 dark:hover:bg-primary-900/30 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1.5"},[...k[11]||(k[11]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),oe(" Details ",-1)])],8,jx),d("button",{onClick:Ct(S=>p(C.id),["stop"]),class:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 hover:bg-primary-50 dark:hover:bg-primary-900/30 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1.5"},[...k[12]||(k[12]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),oe(" Logs ",-1)])],8,Wx),C.status==="pending"||C.status==="running"?(O(),A("button",{key:0,onClick:Ct(S=>x(C.id),["stop"]),disabled:a.value===C.id,class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5"},[a.value===C.id?(O(),A("svg",Qx,[...k[13]||(k[13]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(O(),A("svg",Ux,[...k[14]||(k[14]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])),oe(" "+L(a.value===C.id?"Cancelling...":"Cancel"),1)],8,zx)):Q("",!0)])])],8,_x))),128))])])]))]),n.value?(O(),Me(zb,{key:0,job:n.value,onClose:k[3]||(k[3]=C=>n.value=null),onViewLogs:g},null,8,["job"])):Q("",!0),o.value?(O(),Me(yx,{key:1,"job-id":o.value,onClose:k[4]||(k[4]=C=>o.value=null)},null,8,["job-id"])):Q("",!0),l.value?(O(),Me(kx,{key:2,onClose:k[5]||(k[5]=C=>l.value=!1),onCreated:y})):Q("",!0)]))}},Kx=["checked","disabled"],dc={__name:"ToggleSwitch",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{type:String,default:""},error:{type:String,default:""},containerClass:{type:String,default:""},labelClass:{type:String,default:"text-gray-700"}},emits:["update:modelValue"],setup(i){return(e,t)=>(O(),A("label",{class:me(["relative inline-flex items-center cursor-pointer",i.containerClass])},[d("input",{type:"checkbox",checked:i.modelValue,disabled:i.disabled,class:"sr-only peer",onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.checked))},null,40,Kx),d("div",{class:me(["w-11 h-6 rounded-full transition-colors duration-200 ease-in-out","peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-offset-2",i.disabled?"bg-gray-200 dark:bg-gray-700 cursor-not-allowed":i.modelValue?"bg-primary-600 dark:bg-primary-500 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-700":"bg-gray-300 dark:bg-gray-600 peer-focus:ring-gray-300 dark:peer-focus:ring-gray-700",i.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[d("div",{class:me(["absolute top-[2px] left-[2px] bg-white dark:bg-gray-200 rounded-full transition-transform duration-200 ease-in-out","h-5 w-5 border border-gray-300 dark:border-gray-600",i.modelValue?"translate-x-5 border-primary-600 dark:border-primary-400":"translate-x-0"])},null,2)],2),i.label?(O(),A("span",{key:0,class:me(["ml-3 text-sm font-medium",i.labelClass||"text-gray-700 dark:text-gray-300"])},L(i.label),3)):Q("",!0)],2))}},Xx={class:"space-y-6 pb-8"},Gx={class:"card hover:shadow-lg transition-shadow duration-200"},Yx={key:0,class:"space-y-5"},Jx={class:"flex justify-end pt-2"},Zx=["disabled"],ev={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},tv={class:"card hover:shadow-lg transition-shadow duration-200"},iv={class:"space-y-4"},sv={class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-50/50 dark:from-gray-700 dark:to-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors"},rv={class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-50/50 dark:from-gray-700 dark:to-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors"},nv={key:2,class:"card hover:shadow-lg transition-shadow duration-200"},ov={class:"space-y-5"},lv={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},av={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},hv={class:"flex justify-end pt-2"},cv=["disabled"],uv={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},dv={key:3,class:"card hover:shadow-lg transition-shadow duration-200"},fv={class:"space-y-5"},pv={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},gv={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},mv={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},yv={class:"flex justify-end pt-2"},bv=["disabled"],xv={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},vv={__name:"Settings",setup(i){const e=F(null),t=F({email:"",phone:""}),s=F({email:!1,sms:!1}),r=F({host:"127.0.0.1",port:8125,gh_username:"",gh_access_token:"",smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",smtp_from:"",smtp_from_name:""}),n=F(!1),o=F(!1),l=F(""),a=F(""),h=F(!1),c=F(null),u=F(null),f=F(""),p=F(8125);async function g(){try{const P=await Um();P&&P.length>0&&(e.value=P[0],t.value.email=e.value.email||"",t.value.phone=e.value.phone||"",s.value.email=e.value.two_fa_email_enabled===1,s.value.sms=e.value.two_fa_sms_enabled===1)}catch(P){console.error("Error loading user data:",P)}}async function y(){try{const P=await Xd();r.value.host=P.host||"127.0.0.1",r.value.port=parseInt(P.port)||8125,r.value.gh_username=P.gh_username||"",r.value.gh_access_token=P.gh_access_token||"",r.value.smtp_host=P.smtp_host||"",r.value.smtp_port=parseInt(P.smtp_port)||587,r.value.smtp_user=P.smtp_user||"",r.value.smtp_pass=P.smtp_pass||"",r.value.smtp_from=P.smtp_from||"",r.value.smtp_from_name=P.smtp_from_name||"",f.value=r.value.host,p.value=r.value.port}catch(P){console.error("Error loading config:",P)}}async function x(){if(e.value){n.value=!0,l.value="",a.value="";try{await uc(e.value.id,{email:t.value.email,phone:t.value.phone}),a.value="Profile updated successfully",await g()}catch(P){l.value=P.message||"Failed to update profile"}finally{n.value=!1}}}async function m(){if(e.value){l.value="",a.value="";try{await uc(e.value.id,{two_fa_email_enabled:s.value.email?1:0,two_fa_sms_enabled:s.value.sms?1:0}),a.value="2FA settings updated successfully"}catch(P){l.value=P.message||"Failed to update 2FA settings",await g()}}}async function k(){o.value=!0,l.value="",a.value="";const P=(r.value.host||"127.0.0.1")!==f.value,v=r.value.port!==p.value;try{const T={host:r.value.host||"127.0.0.1",port:r.value.port.toString(),gh_username:r.value.gh_username,gh_access_token:r.value.gh_access_token,smtp_host:r.value.smtp_host||"",smtp_port:r.value.smtp_port?r.value.smtp_port.toString():"",smtp_user:r.value.smtp_user||"",smtp_pass:r.value.smtp_pass||"",smtp_from:r.value.smtp_from||"",smtp_from_name:r.value.smtp_from_name||""};await Gd(T),a.value="Configuration updated successfully",await y(),(P||v)&&C()}catch(T){l.value=T.message||"Failed to update configuration"}finally{o.value=!1}}function C(){h.value=!0,c.value&&clearTimeout(c.value),setTimeout(()=>{u.value&&u.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100),c.value=setTimeout(()=>{h.value=!1},12e4)}function S(){h.value=!1,c.value&&(clearTimeout(c.value),c.value=null)}async function $(P){const v="sudo systemctl restart goli",T=P?.target?.closest("button");let W=!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(v),W=!0}catch(K){console.warn("Clipboard API failed, trying fallback:",K)}if(!W)try{const K=document.createElement("textarea");K.value=v,K.style.position="fixed",K.style.left="-999999px",K.style.top="-999999px",document.body.appendChild(K),K.focus(),K.select();const G=document.execCommand("copy");if(document.body.removeChild(K),G)W=!0;else throw new Error("execCommand failed")}catch(K){if(console.error("All copy methods failed:",K),T){const G=T.innerHTML;T.innerHTML='<svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>Failed',T.classList.add("text-red-600"),setTimeout(()=>{T.innerHTML=G,T.classList.remove("text-red-600")},2e3)}return}if(T&&W){const K=T.innerHTML;T.innerHTML='<svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>Copied!',T.classList.add("text-green-600"),setTimeout(()=>{T.innerHTML=K,T.classList.remove("text-green-600")},2e3)}}return Ft(()=>{g(),y()}),(P,v)=>(O(),A("div",Xx,[v[29]||(v[29]=d("div",{class:"flex items-center justify-between"},[d("div",null,[d("h2",{class:"text-3xl font-bold text-white dark:text-gray-100 mb-1"},"Settings"),d("p",{class:"text-gray-300 dark:text-gray-400 text-sm"},"Manage your account and system configuration")])],-1)),a.value?(O(),Me(us,{key:0,type:"success",message:a.value,dismissible:"",onDismiss:v[0]||(v[0]=T=>a.value="")},null,8,["message"])):Q("",!0),l.value?(O(),Me(us,{key:1,type:"error",message:l.value,dismissible:"",onDismiss:v[1]||(v[1]=T=>l.value="")},null,8,["message"])):Q("",!0),d("div",Gx,[v[17]||(v[17]=kt('<div class="flex items-center gap-3 mb-6"><div class="p-2 bg-primary-100 dark:bg-primary-900 rounded-lg"><svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 dark:text-white">User Profile</h3><p class="text-sm text-gray-500 dark:text-gray-400">Update your personal information</p></div></div>',1)),e.value?(O(),A("div",Yx,[U(Te,{label:"Username",description:"Your username cannot be changed"},{default:he(()=>[U(Be,{"model-value":e.value.username,disabled:"",class:"bg-gray-50 dark:bg-gray-700"},null,8,["model-value"])]),_:1}),U(Te,{label:"Email Address",required:""},{default:he(()=>[U(Be,{modelValue:t.value.email,"onUpdate:modelValue":v[2]||(v[2]=T=>t.value.email=T),type:"email",placeholder:"your.email@example.com"},null,8,["modelValue"])]),_:1}),U(Te,{label:"Phone Number"},{default:he(()=>[U(Be,{modelValue:t.value.phone,"onUpdate:modelValue":v[3]||(v[3]=T=>t.value.phone=T),type:"tel",placeholder:"+1 (555) 123-4567"},null,8,["modelValue"])]),_:1}),d("div",Jx,[d("button",{onClick:x,disabled:n.value,class:"btn btn-primary px-6 py-2.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[n.value?(O(),A("svg",ev,[...v[16]||(v[16]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(n.value?"Saving...":"Update Profile"),1)],8,Zx)])])):Q("",!0)]),d("div",tv,[v[20]||(v[20]=kt('<div class="flex items-center gap-3 mb-6"><div class="p-2 bg-green-100 dark:bg-green-900 rounded-lg"><svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 dark:text-white">Two-Factor Authentication</h3><p class="text-sm text-gray-500 dark:text-gray-400">Add an extra layer of security to your account</p></div></div>',1)),d("div",iv,[d("div",sv,[v[18]||(v[18]=kt('<div class="flex-1"><div class="flex items-center gap-3 mb-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg><h4 class="font-semibold text-gray-900 dark:text-white">Email 2FA</h4></div><p class="text-sm text-gray-600 dark:text-gray-400 ml-8">Receive verification codes via email</p></div>',1)),U(dc,{modelValue:s.value.email,"onUpdate:modelValue":[v[4]||(v[4]=T=>s.value.email=T),m]},null,8,["modelValue"])]),d("div",rv,[v[19]||(v[19]=kt('<div class="flex-1"><div class="flex items-center gap-3 mb-1"><svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg><h4 class="font-semibold text-gray-900 dark:text-white">SMS 2FA</h4></div><p class="text-sm text-gray-600 dark:text-gray-400 ml-8">Receive verification codes via SMS</p></div>',1)),U(dc,{modelValue:s.value.sms,"onUpdate:modelValue":[v[5]||(v[5]=T=>s.value.sms=T),m]},null,8,["modelValue"])])])]),e.value&&e.value.role==="admin"?(O(),A("div",nv,[v[26]||(v[26]=kt('<div class="flex items-center gap-3 mb-6"><div class="p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 dark:text-white">System Configuration</h3><p class="text-sm text-gray-500 dark:text-gray-400">Configure system-wide settings</p></div></div>',1)),h.value?(O(),A("div",{key:0,ref_key:"restartAlertRef",ref:u,class:"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 dark:border-blue-400 p-4 mb-5 rounded-r-lg"},[d("div",{class:"flex items-start justify-between"},[d("div",{class:"flex-1"},[v[23]||(v[23]=kt('<div class="flex items-center mb-2"><svg class="w-5 h-5 text-blue-500 dark:text-blue-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h4 class="text-sm font-semibold text-blue-800 dark:text-blue-200">Restart Required</h4></div><p class="text-sm text-blue-700 dark:text-blue-300 mb-3"> Changes to host or port will only take effect after restarting the application. </p>',2)),d("div",{class:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded px-3 py-2 border border-blue-200 dark:border-blue-800"},[v[22]||(v[22]=d("code",{class:"text-sm text-gray-800 dark:text-gray-200 font-mono flex-1"},"sudo systemctl restart goli",-1)),d("button",{onClick:$,class:"px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded transition-colors",title:"Click to copy"},[...v[21]||(v[21]=[d("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),oe(" Copy ",-1)])])])]),d("button",{onClick:S,class:"ml-4 text-blue-500 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",title:"Dismiss"},[...v[24]||(v[24]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])],512)):Q("",!0),d("div",ov,[d("div",lv,[U(Te,{label:"Host",required:"",description:"Server host address"},{default:he(()=>[U(Be,{modelValue:r.value.host,"onUpdate:modelValue":v[6]||(v[6]=T=>r.value.host=T),type:"text",placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),U(Te,{label:"Port",required:"",description:"Server port number"},{default:he(()=>[U(Be,{"model-value":r.value.port,type:"number",placeholder:"8125","onUpdate:modelValue":v[7]||(v[7]=T=>r.value.port=parseInt(T)||8125)},null,8,["model-value"])]),_:1})]),d("div",av,[U(Te,{label:"GitHub Username"},{default:he(()=>[U(Be,{modelValue:r.value.gh_username,"onUpdate:modelValue":v[8]||(v[8]=T=>r.value.gh_username=T),type:"text",placeholder:"your-github-username"},null,8,["modelValue"])]),_:1})]),U(Te,{label:"GitHub Access Token",description:"Token for GitHub API access"},{default:he(()=>[U(Be,{modelValue:r.value.gh_access_token,"onUpdate:modelValue":v[9]||(v[9]=T=>r.value.gh_access_token=T),type:"password",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxxxxx"},null,8,["modelValue"])]),_:1}),d("div",hv,[d("button",{onClick:k,disabled:o.value,class:"btn btn-primary px-6 py-2.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[o.value?(O(),A("svg",uv,[...v[25]||(v[25]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(o.value?"Saving...":"Update Configuration"),1)],8,cv)])])])):Q("",!0),e.value&&e.value.role==="admin"?(O(),A("div",dv,[v[28]||(v[28]=kt('<div class="flex items-center gap-3 mb-6"><div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 dark:text-white">SMTP Configuration</h3><p class="text-sm text-gray-500 dark:text-gray-400">Configure email server settings for notifications</p></div></div>',1)),d("div",fv,[d("div",pv,[U(Te,{label:"SMTP Host",required:"",description:"Your SMTP server address"},{default:he(()=>[U(Be,{modelValue:r.value.smtp_host,"onUpdate:modelValue":v[10]||(v[10]=T=>r.value.smtp_host=T),type:"text",placeholder:"smtp.example.com"},null,8,["modelValue"])]),_:1}),U(Te,{label:"SMTP Port",required:"",description:"Usually 587 (TLS) or 465 (SSL)"},{default:he(()=>[U(Be,{"model-value":r.value.smtp_port,type:"number",placeholder:"587","onUpdate:modelValue":v[11]||(v[11]=T=>r.value.smtp_port=parseInt(T)||587)},null,8,["model-value"])]),_:1})]),d("div",gv,[U(Te,{label:"SMTP Username",required:"",description:"Your email address or username"},{default:he(()=>[U(Be,{modelValue:r.value.smtp_user,"onUpdate:modelValue":v[12]||(v[12]=T=>r.value.smtp_user=T),type:"text",placeholder:"your-email@example.com"},null,8,["modelValue"])]),_:1}),U(Te,{label:"SMTP Password",required:"",description:"Your SMTP password or app password"},{default:he(()=>[U(Be,{modelValue:r.value.smtp_pass,"onUpdate:modelValue":v[13]||(v[13]=T=>r.value.smtp_pass=T),type:"password",placeholder:"Your SMTP password"},null,8,["modelValue"])]),_:1})]),d("div",mv,[U(Te,{label:"From Email",required:"",description:"Sender email address"},{default:he(()=>[U(Be,{modelValue:r.value.smtp_from,"onUpdate:modelValue":v[14]||(v[14]=T=>r.value.smtp_from=T),type:"email",placeholder:"noreply@example.com"},null,8,["modelValue"])]),_:1}),U(Te,{label:"From Name",description:"Display name for sent emails"},{default:he(()=>[U(Be,{modelValue:r.value.smtp_from_name,"onUpdate:modelValue":v[15]||(v[15]=T=>r.value.smtp_from_name=T),type:"text",placeholder:"Goli CI/CD"},null,8,["modelValue"])]),_:1})]),d("div",yv,[d("button",{onClick:k,disabled:o.value,class:"btn btn-primary px-6 py-2.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[o.value?(O(),A("svg",xv,[...v[27]||(v[27]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(o.value?"Saving...":"Update SMTP Configuration"),1)],8,bv)])])])):Q("",!0)]))}},kv={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4"},wv={class:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8"},Sv={key:0,class:"space-y-4"},Cv={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Ov=["disabled"],Av={key:1,class:"space-y-4"},Mv={key:0,class:"text-sm text-red-600 dark:text-red-400"},Pv={class:"flex space-x-3"},Tv=["disabled"],_v={key:2,class:"space-y-4"},Dv={class:"flex space-x-2"},Bv={key:3,class:"space-y-4"},$v={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-2"},Ev={class:"text-gray-900 dark:text-gray-100"},Rv={class:"text-gray-900 dark:text-gray-100"},Lv={class:"text-gray-900 dark:text-gray-100"},Iv={key:0,class:"text-sm text-red-600 dark:text-red-400"},Nv={class:"flex space-x-3"},Vv=["disabled"],Fv={__name:"SetupWizard",emits:["setup-complete","setup-already-complete"],setup(i,{emit:e}){const t=e,s=F(0),r=F(!1),n=F(!1),o=F(""),l=F(""),a=F(""),h=F(""),c=F({username:"goli",password:"",confirmPassword:"",email:""}),u=F({port:8125,authKey:""}),f=ko(()=>c.value.username&&c.value.password&&c.value.password===c.value.confirmPassword&&c.value.password.length>=6);function p(){const C=new Uint8Array(64);crypto.getRandomValues(C);const S=btoa(String.fromCharCode(...C));u.value.authKey=S.substring(0,64)}async function g(){if(!h.value){a.value="Please enter the setup password";return}n.value=!0,a.value="";try{const C=await jm(h.value);await k(),s.value=1}catch(C){const S=C.message||"Invalid setup password. Please check the installation output.";if(S.includes("Setup has already been completed")){t("setup-already-complete");return}a.value=S}finally{n.value=!1}}function y(){if(s.value===1){if(!f.value){o.value="Please fill all required fields and ensure passwords match (min 6 characters)";return}o.value=""}s.value<3&&s.value++}function x(){s.value>1&&s.value--}async function m(){r.value=!0,l.value="";try{await qm({username:c.value.username,password:c.value.password,email:c.value.email||"",role:"admin"},!0);const C={port:u.value.port.toString(),auth_key:u.value.authKey,setup_complete:!0};await Gd(C,!0),Vm(),t("setup-complete")}catch(C){l.value=C.message||"Failed to complete setup. Please try again.",console.error("Setup error:",C)}finally{r.value=!1}}async function k(){try{const C=await Xd(!0);C.port&&(u.value.port=parseInt(C.port)||8125),C.auth_key?u.value.authKey=C.auth_key:p()}catch(C){console.error("Error loading config:",C),p()}}return(C,S)=>(O(),A("div",kv,[d("div",wv,[S[21]||(S[21]=d("div",{class:"flex flex-col items-center mb-6"},[d("img",{src:Ua,alt:"Goli Logo",class:"h-16 w-16 rounded-full shadow-md mb-3"}),d("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Goli Setup Wizard"),d("p",{class:"text-gray-500 dark:text-gray-400"},"Complete the setup to get started")],-1)),s.value===0?(O(),A("div",Sv,[d("div",null,[S[7]||(S[7]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Setup Password",-1)),S[8]||(S[8]=d("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},"Enter the setup password shown during installation",-1)),Bt(d("input",{"onUpdate:modelValue":S[0]||(S[0]=$=>h.value=$),type:"password",required:"",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter setup password"},null,512),[[Pi,h.value]]),a.value?(O(),A("div",Cv,L(a.value),1)):Q("",!0)]),d("button",{onClick:g,disabled:n.value,class:"w-full py-2.5 rounded-lg bg-primary-600 dark:bg-primary-500 text-white hover:bg-primary-700 dark:hover:bg-primary-600 transition disabled:opacity-50"},L(n.value?"Verifying...":"Continue"),9,Ov)])):Q("",!0),s.value===1?(O(),A("div",Av,[S[13]||(S[13]=d("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Create Admin User",-1)),d("div",null,[S[9]||(S[9]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Username",-1)),Bt(d("input",{"onUpdate:modelValue":S[1]||(S[1]=$=>c.value.username=$),type:"text",required:"",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pi,c.value.username]])]),d("div",null,[S[10]||(S[10]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email",-1)),Bt(d("input",{"onUpdate:modelValue":S[2]||(S[2]=$=>c.value.email=$),type:"email",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pi,c.value.email]])]),d("div",null,[S[11]||(S[11]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Password",-1)),Bt(d("input",{"onUpdate:modelValue":S[3]||(S[3]=$=>c.value.password=$),type:"password",required:"",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pi,c.value.password]])]),d("div",null,[S[12]||(S[12]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Confirm Password",-1)),Bt(d("input",{"onUpdate:modelValue":S[4]||(S[4]=$=>c.value.confirmPassword=$),type:"password",required:"",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pi,c.value.confirmPassword]])]),o.value?(O(),A("div",Mv,L(o.value),1)):Q("",!0),d("div",Pv,[d("button",{onClick:x,class:"flex-1 py-2.5 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition"}," Back "),d("button",{onClick:y,disabled:!f.value,class:"flex-1 py-2.5 rounded-lg bg-primary-600 dark:bg-primary-500 text-white hover:bg-primary-700 dark:hover:bg-primary-600 transition disabled:opacity-50"}," Next ",8,Tv)])])):Q("",!0),s.value===2?(O(),A("div",_v,[S[16]||(S[16]=d("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"System Settings",-1)),d("div",null,[S[14]||(S[14]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Port",-1)),Bt(d("input",{"onUpdate:modelValue":S[5]||(S[5]=$=>u.value.port=$),type:"number",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 focus:border-primary-500"},null,512),[[Pi,u.value.port,void 0,{number:!0}]])]),d("div",null,[S[15]||(S[15]=d("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Auth Key",-1)),d("div",Dv,[Bt(d("input",{"onUpdate:modelValue":S[6]||(S[6]=$=>u.value.authKey=$),type:"text",readonly:"",class:"flex-1 rounded-lg border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,512),[[Pi,u.value.authKey]]),d("button",{onClick:p,class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition"}," Generate ")])]),d("div",{class:"flex space-x-3"},[d("button",{onClick:x,class:"flex-1 py-2.5 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition"}," Back "),d("button",{onClick:y,class:"flex-1 py-2.5 rounded-lg bg-primary-600 dark:bg-primary-500 text-white hover:bg-primary-700 dark:hover:bg-primary-600 transition"}," Next ")])])):Q("",!0),s.value===3?(O(),A("div",Bv,[S[20]||(S[20]=d("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Review & Complete",-1)),d("div",$v,[d("div",Ev,[S[17]||(S[17]=d("strong",null,"Username:",-1)),oe(" "+L(c.value.username),1)]),d("div",Rv,[S[18]||(S[18]=d("strong",null,"Email:",-1)),oe(" "+L(c.value.email||"Not provided"),1)]),d("div",Lv,[S[19]||(S[19]=d("strong",null,"Port:",-1)),oe(" "+L(u.value.port),1)])]),l.value?(O(),A("div",Iv,L(l.value),1)):Q("",!0),d("div",Nv,[d("button",{onClick:x,class:"flex-1 py-2.5 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition"}," Back "),d("button",{onClick:m,disabled:r.value,class:"flex-1 py-2.5 rounded-lg bg-primary-600 text-white hover:bg-primary-700 transition disabled:opacity-50"},L(r.value?"Completing...":"Complete Setup"),9,Vv)])])):Q("",!0)])]))}},Hv={class:"space-y-6 pb-8"},jv={class:"flex items-center justify-between"},Wv={class:"text-3xl font-bold text-white dark:text-gray-100 mb-1"},zv={class:"card hover:shadow-lg transition-shadow duration-200"},Qv={class:"flex h-[600px] border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},Uv={class:"w-64 border-r border-gray-200 dark:border-gray-700 overflow-y-auto bg-gray-50 dark:bg-gray-700/50 scrollbar-thin"},qv={class:"p-4"},Kv={class:"flex items-center justify-between mb-4"},Xv={key:0,class:"flex items-center justify-center py-8"},Gv={key:1,class:"text-center py-8 text-sm text-gray-500 dark:text-gray-400"},Yv={key:2,class:"space-y-2"},Jv=["onClick"],Zv={class:"flex items-center justify-between mb-1.5"},ek={class:"flex items-center gap-2"},tk={class:"flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 text-xs font-semibold"},ik={class:"font-medium text-gray-900 dark:text-white"},sk={class:"flex items-center justify-between"},rk={class:"text-xs text-gray-500 dark:text-gray-400"},nk={class:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-gray-800"},ok={key:0,class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700/50 dark:to-gray-800"},lk={class:"flex items-center justify-between mb-3"},ak={class:"font-semibold text-gray-900 dark:text-white text-lg"},hk={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},ck={key:0,class:"mb-3"},uk={key:0,class:"flex items-center justify-center h-full"},dk={key:1,class:"font-mono text-sm text-green-400 dark:text-green-300 whitespace-pre-wrap break-words"},fk={key:2,class:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400"},pk={key:3,class:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400"},gk={key:1,class:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50"},mk={class:"bg-gray-900 rounded-lg p-3 font-mono text-sm text-green-400 whitespace-pre-wrap break-words max-h-32 overflow-y-auto scrollbar-thin"},yk={__name:"LogsView",props:{jobId:{type:Number,required:!0}},emits:["close"],setup(i,{emit:e}){const t=i,s=F(!1),r=F(!1),n=F([]),o=F(null),l=F(""),a=F(!1),h=F(null);let c=null;async function u(){s.value=!0;try{const x=await Xa(t.jobId);if(x&&x.steps&&Array.isArray(x.steps)&&x.steps.length>0){if(n.value=x.steps.sort((m,k)=>(m.step_order||0)-(k.step_order||0)),n.value.length>0&&!o.value)o.value=n.value[0];else if(o.value){const m=n.value.find(k=>k.id===o.value.id);m&&(o.value=m)}}else n.value=[];x&&x.logs?l.value=x.logs:l.value="",a.value&&(await Ln(),f())}catch(x){console.error("Error loading job details:",x),n.value=[],l.value=""}finally{s.value=!1}}function f(){h.value&&(h.value.scrollTop=h.value.scrollHeight)}async function p(){const x=o.value?.logs||"";if(!x){alert("No logs to copy");return}try{if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(x),alert("Logs copied to clipboard!");return}const m=document.createElement("textarea");m.value=x,m.style.position="fixed",m.style.left="-999999px",document.body.appendChild(m),m.focus(),m.select();try{document.execCommand("copy"),alert("Logs copied to clipboard!")}catch{alert("Failed to copy logs. Please select and copy manually.")}finally{document.body.removeChild(m)}}catch(m){console.error("Error copying logs:",m),alert("Failed to copy logs. Please select and copy manually.")}}async function g(){if(!l.value){alert("No logs to copy");return}try{navigator.clipboard&&navigator.clipboard.writeText?(await navigator.clipboard.writeText(l.value),alert("Job logs copied to clipboard!")):alert("Clipboard API not available")}catch{alert("Failed to copy logs")}}function y(){const x=o.value?.logs||l.value||"";if(x){const m=new Blob([x],{type:"text/plain"}),k=URL.createObjectURL(m),C=document.createElement("a");C.href=k,C.download=`job-${t.jobId}-${o.value?.step_name||"logs"}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(k)}}return Pt(()=>t.jobId,()=>{u()},{immediate:!0}),Pt(o,()=>{Ln(()=>{f()})}),Pt(a,x=>{x?c=setInterval(()=>{u()},2e3):c&&(clearInterval(c),c=null)}),Ft(()=>{u()}),zr(()=>{c&&clearInterval(c)}),(x,m)=>(O(),A("div",Hv,[d("div",jv,[d("div",null,[d("h2",Wv,"Job Logs - #"+L(i.jobId),1),m[2]||(m[2]=d("p",{class:"text-gray-300 dark:text-gray-400 text-sm"},"View detailed logs for each pipeline step",-1))]),d("button",{onClick:m[0]||(m[0]=k=>x.$emit("close")),class:"btn btn-secondary flex items-center gap-2"},[...m[3]||(m[3]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),oe(" Back ",-1)])])]),d("div",zv,[d("div",Qv,[d("div",Uv,[d("div",qv,[d("div",Kv,[m[4]||(m[4]=d("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Steps",-1)),o.value&&(o.value.status==="running"||a.value)?(O(),A("button",{key:0,onClick:m[1]||(m[1]=k=>a.value=!a.value),class:me(["px-2 py-1 text-xs rounded transition-colors",a.value?"bg-primary-600 dark:bg-primary-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"])},L(a.value?"Auto: ON":"Auto: OFF"),3)):Q("",!0)]),s.value?(O(),A("div",Xv,[...m[5]||(m[5]=[d("svg",{class:"animate-spin h-6 w-6 text-primary-600 dark:text-primary-400",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):n.value.length===0?(O(),A("div",Gv," No steps found ")):(O(),A("div",Yv,[(O(!0),A(_e,null,Oi(n.value,k=>(O(),A("button",{key:k.id,onClick:C=>o.value=k,class:me(["w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-150","border-2",o.value?.id===k.id?"bg-primary-50 dark:bg-primary-900/50 text-primary-900 dark:text-primary-200 border-primary-300 dark:border-primary-700 shadow-sm":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"])},[d("div",Zv,[d("div",ek,[d("span",tk,L(k.step_order),1),d("span",ik,L(k.step_name),1)])]),d("div",sk,[d("span",rk,"Step "+L(k.step_order),1),U(Wn,{status:k.status,"show-dot":!0},null,8,["status"])])],10,Jv))),128))]))])]),d("div",nk,[o.value?(O(),A("div",ok,[d("div",lk,[d("div",null,[d("h4",ak,L(o.value.step_name),1),d("p",hk,"Step "+L(o.value.step_order),1)]),U(Wn,{status:o.value.status},null,8,["status"])]),o.value.error_message?(O(),A("div",ck,[U(us,{type:"error",message:o.value.error_message,class:"mb-0"},null,8,["message"])])):Q("",!0),d("div",{class:"flex items-center gap-2"},[d("button",{onClick:p,class:"btn btn-secondary text-sm px-3 py-1.5 flex items-center gap-1.5"},[...m[6]||(m[6]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),oe(" Copy ",-1)])]),d("button",{onClick:y,class:"btn btn-secondary text-sm px-3 py-1.5 flex items-center gap-1.5"},[...m[7]||(m[7]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),oe(" Download ",-1)])]),d("button",{onClick:f,class:"btn btn-secondary text-sm px-3 py-1.5 flex items-center gap-1.5"},[...m[8]||(m[8]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1),oe(" Scroll to Bottom ",-1)])])])])):Q("",!0),d("div",{ref_key:"logsContainer",ref:h,class:"flex-1 overflow-y-auto p-4 bg-gray-900 dark:bg-gray-950 scrollbar-thin"},[r.value?(O(),A("div",uk,[...m[9]||(m[9]=[kt('<div class="text-center"><svg class="animate-spin h-8 w-8 text-green-400 dark:text-green-300 mx-auto mb-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-gray-400 dark:text-gray-500">Loading logs...</p></div>',1)])])):o.value&&o.value.logs?(O(),A("div",dk,L(o.value.logs),1)):o.value&&!o.value.logs?(O(),A("div",fk,[...m[10]||(m[10]=[d("div",{class:"text-center"},[d("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),d("p",null,"No logs available for this step")],-1)])])):(O(),A("div",pk,[...m[11]||(m[11]=[d("div",{class:"text-center"},[d("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]),d("p",null,"Select a step to view logs")],-1)])]))],512),l.value?(O(),A("div",gk,[d("div",{class:"flex items-center justify-between mb-2"},[m[12]||(m[12]=d("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Job Logs",-1)),d("button",{onClick:g,class:"text-xs text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300"}," Copy ")]),d("div",mk,L(l.value),1)])):Q("",!0)])])])]))}},bk={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-700 via-indigo-700 to-blue-700 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4"},xk={class:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden"},vk={class:"px-8 py-6"},kk=["disabled"],wk={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},Sk=["disabled"],Ck=["value"],Ok=["disabled"],Ak=["disabled"],Mk={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},Pk={__name:"Login",emits:["logged-in"],setup(i,{emit:e}){const t=e,s=F("login"),r=F(""),n=F(""),o=F("email"),l=F(["email","sms"]),a=F(""),h=F(""),c=F(!1);async function u(){h.value="",c.value=!0;try{const p=await Wm({username:r.value,password:n.value});if(p.two_fa_required){l.value=p.channels||["email","sms"],s.value="2fa";return}p.token?(jn(p.token),t("logged-in",p.user)):h.value="Unexpected server response"}catch(p){h.value=p.message||"Login failed"}finally{c.value=!1}}async function f(){h.value="",c.value=!0;const p=a.value.trim();if(!/^\d{6}$/.test(p)){h.value="Please enter a 6-digit code",c.value=!1;return}try{const g=await zm({username:r.value,channel:o.value,code:p});g.token?(jn(g.token),t("logged-in",g.user)):h.value="Invalid code"}catch(g){h.value=g.message||"Verification failed"}finally{c.value=!1}}return(p,g)=>(O(),A("div",bk,[d("div",xk,[g[9]||(g[9]=d("div",{class:"bg-gradient-to-r from-primary-600 to-primary-700 px-8 py-6"},[d("div",{class:"flex flex-col items-center"},[d("div",{class:"mb-4"},[d("img",{src:Ua,alt:"Goli Logo",class:"h-16 w-16 rounded-full shadow-lg border-4 border-white/20",onerror:"this.style.display='none'"})]),d("h2",{class:"text-2xl font-bold text-white mb-1"},"Welcome to Goli"),d("p",{class:"text-sm text-primary-100"},"Please sign in to continue")])],-1)),d("div",vk,[h.value?(O(),Me(us,{key:0,type:"error",message:h.value,dismissible:"",onDismiss:g[0]||(g[0]=y=>h.value=""),class:"mb-4"},null,8,["message"])):Q("",!0),s.value==="login"?(O(),A("form",{key:1,onSubmit:Ct(u,["prevent"]),class:"space-y-5"},[U(Te,{label:"Username",required:""},{default:he(()=>[U(Be,{modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=y=>r.value=y),type:"text",placeholder:"Enter your username",required:"",disabled:c.value},null,8,["modelValue","disabled"])]),_:1}),U(Te,{label:"Password",required:""},{default:he(()=>[U(Be,{modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=y=>n.value=y),type:"password",placeholder:"Enter your password",required:"",disabled:c.value},null,8,["modelValue","disabled"])]),_:1}),d("button",{type:"submit",disabled:c.value,class:"w-full btn btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[c.value?(O(),A("svg",wk,[...g[6]||(g[6]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),d("span",null,L(c.value?"Signing in...":"Sign in"),1)],8,kk)],32)):(O(),A("form",{key:2,onSubmit:Ct(f,["prevent"]),class:"space-y-5"},[g[8]||(g[8]=kt('<div class="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div class="text-sm text-blue-800 dark:text-blue-200"><p class="font-medium mb-1">Verification Code Required</p><p class="text-blue-700 dark:text-blue-300">We sent a verification code. Choose a channel and enter the code.</p></div></div></div>',1)),U(Te,{label:"Channel",required:""},{default:he(()=>[Bt(d("select",{"onUpdate:modelValue":g[3]||(g[3]=y=>o.value=y),disabled:c.value,class:"w-full px-4 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed"},[(O(!0),A(_e,null,Oi(l.value,y=>(O(),A("option",{key:y,value:y},L(y==="email"?" Email":y==="sms"?" SMS":y.toUpperCase()),9,Ck))),128))],8,Sk),[[Mm,o.value]])]),_:1}),U(Te,{label:"Verification Code",required:"",description:"Enter the 6-digit code"},{default:he(()=>[Bt(d("input",{"onUpdate:modelValue":g[4]||(g[4]=y=>a.value=y),type:"tel",inputmode:"numeric",pattern:"[0-9]{6}",maxlength:"6",placeholder:"000000",required:"",disabled:c.value,class:"w-full px-4 py-2.5 text-center text-lg tracking-widest font-mono border border-gray-300 dark:border-gray-600 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed"},null,8,Ok),[[Pi,a.value]])]),_:1}),d("button",{type:"submit",disabled:c.value||a.value.length!==6,class:"w-full btn btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[c.value?(O(),A("svg",Mk,[...g[7]||(g[7]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),d("span",null,L(c.value?"Verifying...":"Verify"),1)],8,Ak),d("button",{type:"button",onClick:g[5]||(g[5]=y=>{s.value="login",h.value=""}),class:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 py-2"},"  Back to login ")],32))])])]))}};let Ll=[],tf=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?tf:Ll).push(t=t+i[e])})();function Tk(i){if(i<768)return!1;for(let e=0,t=Ll.length;;){let s=e+t>>1;if(i<Ll[s])t=s;else if(i>=tf[s])e=s+1;else return!0;if(e==t)return!1}}function fc(i){return i>=127462&&i<=127487}const pc=8205;function _k(i,e,t=!0,s=!0){return(t?sf:Dk)(i,e,s)}function sf(i,e,t){if(e==i.length)return e;e&&rf(i.charCodeAt(e))&&nf(i.charCodeAt(e-1))&&e--;let s=Go(i,e);for(e+=gc(s);e<i.length;){let r=Go(i,e);if(s==pc||r==pc||t&&Tk(r))e+=gc(r),s=r;else if(fc(r)){let n=0,o=e-2;for(;o>=0&&fc(Go(i,o));)n++,o-=2;if(n%2==0)break;e+=2}else break}return e}function Dk(i,e,t){for(;e>0;){let s=sf(i,e-2,t);if(s<e)return s;e--}return 0}function Go(i,e){let t=i.charCodeAt(e);if(!nf(t)||e+1==i.length)return t;let s=i.charCodeAt(e+1);return rf(s)?(t-55296<<10)+(s-56320)+65536:t}function rf(i){return i>=56320&&i<57344}function nf(i){return i>=55296&&i<56320}function gc(i){return i<65536?1:2}class ue{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=Vs(this,e,t);let r=[];return this.decompose(0,e,r,2),s.length&&s.decompose(0,s.length,r,3),this.decompose(t,this.length,r,1),ei.from(r,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Vs(this,e,t);let s=[];return this.decompose(e,t,s,0),ei.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),r=new gr(this),n=new gr(e);for(let o=t,l=t;;){if(r.next(o),n.next(o),o=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(l+=r.value.length,r.done||l>=s)return!0}}iter(e=1){return new gr(this,e)}iterRange(e,t=this.length){return new of(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;s=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new lf(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ue.empty:e.length<=32?new Ee(e):ei.from(Ee.split(e,[]))}}class Ee extends ue{constructor(e,t=Bk(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,r){for(let n=0;;n++){let o=this.text[n],l=r+o.length;if((t?s:l)>=e)return new $k(r,l,s,o);r=l+1,s++}}decompose(e,t,s,r){let n=e<=0&&t>=this.length?this:new Ee(mc(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=s.pop(),l=Cn(n.text,o.text.slice(),0,n.length);if(l.length<=32)s.push(new Ee(l,o.length+n.length));else{let a=l.length>>1;s.push(new Ee(l.slice(0,a)),new Ee(l.slice(a)))}}else s.push(n)}replace(e,t,s){if(!(s instanceof Ee))return super.replace(e,t,s);[e,t]=Vs(this,e,t);let r=Cn(this.text,Cn(s.text,mc(this.text,0,e)),t),n=this.length+s.length-(t-e);return r.length<=32?new Ee(r,n):ei.from(Ee.split(r,[]),n)}sliceString(e,t=this.length,s=`
`){[e,t]=Vs(this,e,t);let r="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let l=this.text[o],a=n+l.length;n>e&&o&&(r+=s),e<a&&t>n&&(r+=l.slice(Math.max(0,e-n),t-n)),n=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],r=-1;for(let n of e)s.push(n),r+=n.length+1,s.length==32&&(t.push(new Ee(s,r)),s=[],r=-1);return r>-1&&t.push(new Ee(s,r)),t}}class ei extends ue{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,r){for(let n=0;;n++){let o=this.children[n],l=r+o.length,a=s+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,s,r);r=l+1,s=a+1}}decompose(e,t,s,r){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let l=this.children[n],a=o+l.length;if(e<=a&&t>=o){let h=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?s.push(l):l.decompose(e-o,t-o,s,h)}o=a+1}}replace(e,t,s){if([e,t]=Vs(this,e,t),s.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],l=n+o.length;if(e>=n&&t<=l){let a=o.replace(e-n,t-n,s),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[r]=a,new ei(c,this.length-(t-e)+s.length)}return super.replace(n,l,a)}n=l+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=Vs(this,e,t);let r="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let l=this.children[n],a=o+l.length;o>e&&n&&(r+=s),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,s)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ei))return 0;let s=0,[r,n,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,n+=t){if(r==o||n==l)return s;let a=this.children[r],h=e.children[n];if(a!=h)return s+a.scanIdentical(h,t);s+=a.length+1}}static from(e,t=e.reduce((s,r)=>s+r.length+1,-1)){let s=0;for(let p of e)s+=p.lines;if(s<32){let p=[];for(let g of e)g.flatten(p);return new Ee(p,t)}let r=Math.max(32,s>>5),n=r<<1,o=r>>1,l=[],a=0,h=-1,c=[];function u(p){let g;if(p.lines>n&&p instanceof ei)for(let y of p.children)u(y);else p.lines>o&&(a>o||!a)?(f(),l.push(p)):p instanceof Ee&&a&&(g=c[c.length-1])instanceof Ee&&p.lines+g.lines<=32?(a+=p.lines,h+=p.length+1,c[c.length-1]=new Ee(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>r&&f(),a+=p.lines,h+=p.length+1,c.push(p))}function f(){a!=0&&(l.push(c.length==1?c[0]:ei.from(c,h)),h=-1,a=c.length=0)}for(let p of e)u(p);return f(),l.length==1?l[0]:new ei(l,t)}}ue.empty=new Ee([""],0);function Bk(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Cn(i,e,t=0,s=1e9){for(let r=0,n=0,o=!0;n<i.length&&r<=s;n++){let l=i[n],a=r+l.length;a>=t&&(a>s&&(l=l.slice(0,s-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function mc(i,e,t){return Cn(i,[""],e,t)}class gr{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ee?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,r=this.nodes[s],n=this.offsets[s],o=n>>1,l=r instanceof Ee?r.text.length:r.children.length;if(o==(t>0?l:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ee){let a=r.text[o+(t<0?-1:0)];if(this.offsets[s]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ee?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class of{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new gr(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=s?r:t<0?r.slice(r.length-s):r.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class lf{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ue.prototype[Symbol.iterator]=function(){return this.iter()},gr.prototype[Symbol.iterator]=of.prototype[Symbol.iterator]=lf.prototype[Symbol.iterator]=function(){return this});class $k{constructor(e,t,s,r){this.from=e,this.to=t,this.number=s,this.text=r}get length(){return this.to-this.from}}function Vs(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function Ue(i,e,t=!0,s=!0){return _k(i,e,t,s)}function Ek(i){return i>=56320&&i<57344}function Rk(i){return i>=55296&&i<56320}function Lk(i,e){let t=i.charCodeAt(e);if(!Rk(t)||e+1==i.length)return t;let s=i.charCodeAt(e+1);return Ek(s)?(t-55296<<10)+(s-56320)+65536:t}function Ik(i){return i<65536?1:2}const Il=/\r\n?|\n/;var wt=(function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i})(wt||(wt={}));class xi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,r=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(s,r,n),r+=n):r+=o,s+=n}}iterChangedRanges(e,t=!1){Nl(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],r=this.sections[t++];r<0?e.push(s,r):e.push(r,s)}return new xi(e)}composeDesc(e){return this.empty?e:e.empty?this:af(this,e)}mapDesc(e,t=!1){return e.empty?this:Vl(this,e,t)}mapPos(e,t=-1,s=wt.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=r+l;if(a<0){if(h>e)return n+(e-r);n+=l}else{if(s!=wt.Simple&&h>=e&&(s==wt.TrackDel&&r<e&&h>e||s==wt.TrackBefore&&r<e||s==wt.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==r||t<0?n:n+a;n+=a}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return n}touchesRange(e,t=e){for(let s=0,r=0;s<this.sections.length&&r<=t;){let n=this.sections[s++],o=this.sections[s++],l=r+n;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+s+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new xi(e)}static create(e){return new xi(e)}}class Fe extends xi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Nl(this,(t,s,r,n,o)=>e=e.replace(r,r+(s-t),o),!1),e}mapDesc(e,t=!1){return Vl(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let r=0,n=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;s.length<a;)s.push(ue.empty);s.push(o?e.slice(n,n+o):ue.empty)}n+=o}return new Fe(t,s)}compose(e){return this.empty?e:e.empty?this:af(this,e,!0)}map(e,t=!1){return e.empty?this:Vl(this,e,t,!0)}iterChanges(e,t=!1){Nl(this,e,t)}get desc(){return xi.create(this.sections)}filter(e){let t=[],s=[],r=[],n=new _r(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&n.len==0;){if(n.done)break e;let c=Math.min(n.len,a-l);Xe(r,c,-1);let u=n.ins==-1?-1:n.off==0?n.ins:0;Xe(t,c,u),u>0&&Ri(s,t,n.text),n.forward(c),l+=c}let h=e[o++];for(;l<h;){if(n.done)break e;let c=Math.min(n.len,h-l);Xe(t,c,-1),Xe(r,c,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(c),l+=c}}return{changes:new Fe(t,s),filtered:xi.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],r=this.sections[t+1];r<0?e.push(s):r==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let r=[],n=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<t&&Xe(r,t-o,-1);let u=new Fe(r,n);l=l?l.compose(u.map(l)):u,r=[],n=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof Fe){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:f=u,insert:p}=c;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let g=p?typeof p=="string"?ue.of(p.split(s||Il)):p:ue.empty,y=g.length;if(u==f&&y==0)return;u<o&&a(),u>o&&Xe(r,u-o,-1),Xe(r,f-u,y),Ri(n,r,g),o=f}}return h(e),a(!l),l}static empty(e){return new Fe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let r=0;r<e.length;r++){let n=e[r];if(typeof n=="number")t.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)t.push(n[0],0);else{for(;s.length<r;)s.push(ue.empty);s[r]=ue.of(n.slice(1)),t.push(n[0],s[r].length)}}}return new Fe(t,s)}static createSet(e,t){return new Fe(e,t)}}function Xe(i,e,t,s=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:r>=0&&e==0&&i[r]==0?i[r+1]+=t:s?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function Ri(i,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<s;)i.push(ue.empty);i.push(t)}}function Nl(i,e,t){let s=i.inserted;for(let r=0,n=0,o=0;o<i.sections.length;){let l=i.sections[o++],a=i.sections[o++];if(a<0)r+=l,n+=l;else{let h=r,c=n,u=ue.empty;for(;h+=l,c+=a,a&&s&&(u=u.append(s[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)l=i.sections[o++],a=i.sections[o++];e(r,h,n,c,u),r=h,n=c}}}function Vl(i,e,t,s=!1){let r=[],n=s?[]:null,o=new _r(i),l=new _r(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);Xe(r,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(Xe(r,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&(Xe(r,0,o.ins),n&&Ri(n,r,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Xe(r,h,a<o.i?o.ins:0),n&&a<o.i&&Ri(n,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return n?Fe.createSet(r,n):xi.create(r);throw new Error("Mismatched change set lengths")}}}function af(i,e,t=!1){let s=[],r=t?[]:null,n=new _r(i),o=new _r(e);for(let l=!1;;){if(n.done&&o.done)return r?Fe.createSet(s,r):xi.create(s);if(n.ins==0)Xe(s,n.len,0,l),n.next();else if(o.len==0&&!o.done)Xe(s,0,o.ins,l),r&&Ri(r,s,o.text),o.next();else{if(n.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(n.len2,o.len),h=s.length;if(n.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Xe(s,a,c,l),r&&c&&Ri(r,s,o.text)}else o.ins==-1?(Xe(s,n.off?0:n.len,a,l),r&&Ri(r,s,n.textBit(a))):(Xe(s,n.off?0:n.len,o.off?0:o.ins,l),r&&!o.off&&Ri(r,s,o.text));l=(n.ins>a||o.ins>=0&&o.len>a)&&(l||s.length>h),n.forward2(a),o.forward(a)}}}}class _r{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ue.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?ue.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class os{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,r;return this.empty?s=r=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),s==this.from&&r==this.to?this:new os(s,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return N.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return N.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return N.range(e.anchor,e.head)}static create(e,t,s){return new os(e,t,s)}}class N{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:N.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new N([this.main],0)}addRange(e,t=!0){return N.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,N.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new N(e.ranges.map(t=>os.fromJSON(t)),e.main)}static single(e,t=e){return new N([N.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,r=0;r<e.length;r++){let n=e[r];if(n.empty?n.from<=s:n.from<s)return N.normalized(e.slice(),t);s=n.to}return new N(e,t)}static cursor(e,t=0,s,r){return os.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(r??16777215)<<6)}static range(e,t,s,r){let n=(s??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?os.create(t,e,48|n):os.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let s=e[t];e.sort((r,n)=>r.from-n.from),t=e.indexOf(s);for(let r=1;r<e.length;r++){let n=e[r],o=e[r-1];if(n.empty?n.from<=o.to:n.from<o.to){let l=o.from,a=Math.max(n.to,o.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?N.range(a,l):N.range(l,a))}}return new N(e,t)}}function hf(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Ya=0;class J{constructor(e,t,s,r,n){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=r,this.id=Ya++,this.default=e([]),this.extensions=typeof n=="function"?n(this):n}get reader(){return this}static define(e={}){return new J(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:Ja),!!e.static,e.enables)}of(e){return new On([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new On(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new On(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function Ja(i,e){return i==e||i.length==e.length&&i.every((t,s)=>t===e[s])}class On{constructor(e,t,s,r){this.dependencies=e,this.facet=t,this.type=s,this.value=r,this.id=Ya++}dynamicSlot(e){var t;let s=this.value,r=this.facet.compareInput,n=this.id,o=e[n]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[u.id]);return{create(u){return u.values[o]=s(u),1},update(u,f){if(a&&f.docChanged||h&&(f.docChanged||f.selection)||Fl(u,c)){let p=s(u);if(l?!yc(p,u.values[o],r):!r(p,u.values[o]))return u.values[o]=p,1}return 0},reconfigure:(u,f)=>{let p,g=f.config.address[n];if(g!=null){let y=Qn(f,g);if(this.dependencies.every(x=>x instanceof J?f.facet(x)===u.facet(x):x instanceof ys?f.field(x,!1)==u.field(x,!1):!0)||(l?yc(p=s(u),y,r):r(p=s(u),y)))return u.values[o]=y,0}else p=s(u);return u.values[o]=p,1}}}}function yc(i,e,t){if(i.length!=e.length)return!1;for(let s=0;s<i.length;s++)if(!t(i[s],e[s]))return!1;return!0}function Fl(i,e){let t=!1;for(let s of e)mr(i,s)&1&&(t=!0);return t}function Nk(i,e,t){let s=t.map(a=>i[a.id]),r=t.map(a=>a.type),n=s.filter(a=>!(a&1)),o=i[e.id]>>1;function l(a){let h=[];for(let c=0;c<s.length;c++){let u=Qn(a,s[c]);if(r[c]==2)for(let f of u)h.push(f);else h.push(u)}return e.combine(h)}return{create(a){for(let h of s)mr(a,h);return a.values[o]=l(a),1},update(a,h){if(!Fl(a,n))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=Fl(a,s),u=h.config.facets[e.id],f=h.facet(e);if(u&&!c&&Ja(t,u))return a.values[o]=f,0;let p=l(a);return e.compare(p,f)?(a.values[o]=f,0):(a.values[o]=p,1)}}}const tn=J.define({static:!0});class ys{constructor(e,t,s,r,n){this.id=e,this.createF=t,this.updateF=s,this.compareF=r,this.spec=n,this.provides=void 0}static define(e){let t=new ys(Ya++,e.create,e.update,e.compare||((s,r)=>s===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(tn).find(s=>s.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,r)=>{let n=s.values[t],o=this.updateF(n,r);return this.compareF(n,o)?0:(s.values[t]=o,1)},reconfigure:(s,r)=>{let n=s.facet(tn),o=r.facet(tn),l;return(l=n.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(s.values[t]=l.create(s),1):r.config.address[this.id]!=null?(s.values[t]=r.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,tn.of({field:this,create:e})]}get extension(){return this}}const rs={lowest:4,low:3,default:2,high:1,highest:0};function er(i){return e=>new cf(e,i)}const Za={highest:er(rs.highest),high:er(rs.high),default:er(rs.default),low:er(rs.low),lowest:er(rs.lowest)};class cf{constructor(e,t){this.inner=e,this.prec=t}}class Oo{of(e){return new Hl(this,e)}reconfigure(e){return Oo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Hl{constructor(e,t){this.compartment=e,this.inner=t}}class zn{constructor(e,t,s,r,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let r=[],n=Object.create(null),o=new Map;for(let f of Vk(e,t,o))f instanceof ys?r.push(f):(n[f.facet.id]||(n[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],h=[];for(let f of r)l[f.id]=h.length<<1,h.push(p=>f.slot(p));let c=s?.config.facets;for(let f in n){let p=n[f],g=p[0].facet,y=c&&c[f]||[];if(p.every(x=>x.type==0))if(l[g.id]=a.length<<1|1,Ja(y,p))a.push(s.facet(g));else{let x=g.combine(p.map(m=>m.value));a.push(s&&g.compare(x,s.facet(g))?s.facet(g):x)}else{for(let x of p)x.type==0?(l[x.id]=a.length<<1|1,a.push(x.value)):(l[x.id]=h.length<<1,h.push(m=>x.dynamicSlot(m)));l[g.id]=h.length<<1,h.push(x=>Nk(x,g,p))}}let u=h.map(f=>f(l));return new zn(e,o,u,l,a,n)}}function Vk(i,e,t){let s=[[],[],[],[],[]],r=new Map;function n(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let h=s[a].indexOf(o);h>-1&&s[a].splice(h,1),o instanceof Hl&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let h of o)n(h,l);else if(o instanceof Hl){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),n(h,l)}else if(o instanceof cf)n(o.inner,o.prec);else if(o instanceof ys)s[l].push(o),o.provides&&n(o.provides,l);else if(o instanceof On)s[l].push(o),o.facet.extensions&&n(o.facet.extensions,rs.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(h,l)}}return n(i,rs.default),s.reduce((o,l)=>o.concat(l))}function mr(i,e){if(e&1)return 2;let t=e>>1,s=i.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Qn(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const uf=J.define(),jl=J.define({combine:i=>i.some(e=>e),static:!0}),df=J.define({combine:i=>i.length?i[0]:void 0,static:!0}),ff=J.define(),pf=J.define(),gf=J.define(),mf=J.define({combine:i=>i.length?i[0]:!1});class Ks{constructor(e,t){this.type=e,this.value=t}static define(){return new Fk}}class Fk{of(e){return new Ks(this,e)}}class Hk{constructor(e){this.map=e}of(e){return new Ve(this,e)}}class Ve{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ve(this.type,t)}is(e){return this.type==e}static define(e={}){return new Hk(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let r of e){let n=r.map(t);n&&s.push(n)}return s}}Ve.reconfigure=Ve.define();Ve.appendConfig=Ve.define();class Ze{constructor(e,t,s,r,n,o){this.startState=e,this.changes=t,this.selection=s,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,s&&hf(s,t.newLength),n.some(l=>l.type==Ze.time)||(this.annotations=n.concat(Ze.time.of(Date.now())))}static create(e,t,s,r,n,o){return new Ze(e,t,s,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ze.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ze.time=Ks.define();Ze.userEvent=Ks.define();Ze.addToHistory=Ks.define();Ze.remote=Ks.define();function jk(i,e){let t=[];for(let s=0,r=0;;){let n,o;if(s<i.length&&(r==e.length||e[r]>=i[s]))n=i[s++],o=i[s++];else if(r<e.length)n=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<n?t.push(n,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function yf(i,e,t){var s;let r,n,o;return t?(r=e.changes,n=Fe.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),n=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(n):(s=i.selection)===null||s===void 0?void 0:s.map(r),effects:Ve.mapEffects(i.effects,r).concat(Ve.mapEffects(e.effects,n)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Wl(i,e,t){let s=e.selection,r=$s(e.annotations);return e.userEvent&&(r=r.concat(Ze.userEvent.of(e.userEvent))),{changes:e.changes instanceof Fe?e.changes:Fe.of(e.changes||[],t,i.facet(df)),selection:s&&(s instanceof N?s:N.single(s.anchor,s.head)),effects:$s(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function bf(i,e,t){let s=Wl(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let n=1;n<e.length;n++){e[n].filter===!1&&(t=!1);let o=!!e[n].sequential;s=yf(s,Wl(i,e[n],o?s.changes.newLength:i.doc.length),o)}let r=Ze.create(i,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return zk(t?Wk(r):r)}function Wk(i){let e=i.startState,t=!0;for(let r of e.facet(ff)){let n=r(i);if(n===!1){t=!1;break}Array.isArray(n)&&(t=t===!0?n:jk(t,n))}if(t!==!0){let r,n;if(t===!1)n=i.changes.invertedDesc,r=Fe.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,n=o.filtered.mapDesc(o.changes).invertedDesc}i=Ze.create(e,r,i.selection&&i.selection.map(n),Ve.mapEffects(i.effects,n),i.annotations,i.scrollIntoView)}let s=e.facet(pf);for(let r=s.length-1;r>=0;r--){let n=s[r](i);n instanceof Ze?i=n:Array.isArray(n)&&n.length==1&&n[0]instanceof Ze?i=n[0]:i=bf(e,$s(n),!1)}return i}function zk(i){let e=i.startState,t=e.facet(gf),s=i;for(let r=t.length-1;r>=0;r--){let n=t[r](i);n&&Object.keys(n).length&&(s=yf(s,Wl(e,n,i.changes.newLength),!0))}return s==i?i:Ze.create(e,i.changes,i.selection,s.effects,s.annotations,s.scrollIntoView)}const Qk=[];function $s(i){return i==null?Qk:Array.isArray(i)?i:[i]}var mi=(function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i})(mi||(mi={}));const Uk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let zl;try{zl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function qk(i){if(zl)return zl.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Uk.test(t)))return!0}return!1}function Kk(i){return e=>{if(!/\S/.test(e))return mi.Space;if(qk(e))return mi.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return mi.Word;return mi.Other}}class ge{constructor(e,t,s,r,n,o){this.config=e,this.doc=t,this.selection=s,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)mr(this,l<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return mr(this,s),Qn(this,s)}update(...e){return bf(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:r}=t;for(let l of e.effects)l.is(Oo.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,h)=>r.set(h,a)),t=null),r.set(l.value.compartment,l.value.extension)):l.is(Ve.reconfigure)?(t=null,s=l.value):l.is(Ve.appendConfig)&&(t=null,s=$s(s).concat(l.value));let n;t?n=e.startState.values.slice():(t=zn.resolve(s,r,this),n=new ge(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=e.startState.facet(jl)?e.newSelection:e.newSelection.asSingle();new ge(t,e.newDoc,o,n,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:N.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),r=this.changes(s.changes),n=[s.range],o=$s(s.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(r);for(let f=0;f<l;f++)n[f]=n[f].map(c);let u=r.mapDesc(h,!0);n.push(a.range.map(u)),r=r.compose(c),o=Ve.mapEffects(o,c).concat(Ve.mapEffects($s(a.effects),u))}return{changes:r,selection:N.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Fe?e:Fe.of(e,this.doc.length,this.facet(ge.lineSeparator))}toText(e){return ue.of(e.split(this.facet(ge.lineSeparator)||Il))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(mr(this,t),Qn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let r=e[s];r instanceof ys&&this.config.address[r.id]!=null&&(t[s]=r.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(s){for(let n in s)if(Object.prototype.hasOwnProperty.call(e,n)){let o=s[n],l=e[n];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ge.create({doc:e.doc,selection:N.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=zn.resolve(e.extensions||[],new Map),s=e.doc instanceof ue?e.doc:ue.of((e.doc||"").split(t.staticFacet(ge.lineSeparator)||Il)),r=e.selection?e.selection instanceof N?e.selection:N.single(e.selection.anchor,e.selection.head):N.single(0);return hf(r,s.length),t.staticFacet(jl)||(r=r.asSingle()),new ge(t,s,r,t.dynamicSlots.map(()=>null),(n,o)=>o.create(n),null)}get tabSize(){return this.facet(ge.tabSize)}get lineBreak(){return this.facet(ge.lineSeparator)||`
`}get readOnly(){return this.facet(mf)}phrase(e,...t){for(let s of this.facet(ge.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,r)=>{if(r=="$")return"$";let n=+(r||1);return!n||n>t.length?s:t[n-1]})),e}languageDataAt(e,t,s=-1){let r=[];for(let n of this.facet(uf))for(let o of n(this,t,s))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return Kk(t.length?t[0]:"")}wordAt(e){let{text:t,from:s,length:r}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-s,l=e-s;for(;o>0;){let a=Ue(t,o,!1);if(n(t.slice(a,o))!=mi.Word)break;o=a}for(;l<r;){let a=Ue(t,l);if(n(t.slice(l,a))!=mi.Word)break;l=a}return o==l?null:N.range(o+s,l+s)}}ge.allowMultipleSelections=jl;ge.tabSize=J.define({combine:i=>i.length?i[0]:4});ge.lineSeparator=df;ge.readOnly=mf;ge.phrases=J.define({compare(i,e){let t=Object.keys(i),s=Object.keys(e);return t.length==s.length&&t.every(r=>i[r]==e[r])}});ge.languageData=uf;ge.changeFilter=ff;ge.transactionFilter=pf;ge.transactionExtender=gf;Oo.reconfigure=Ve.define();function Xk(i,e,t={}){let s={};for(let r of i)for(let n of Object.keys(r)){let o=r[n],l=s[n];if(l===void 0)s[n]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,n))s[n]=t[n](l,o);else throw new Error("Config merge conflict for field "+n)}for(let r in e)s[r]===void 0&&(s[r]=e[r]);return s}class ds{eq(e){return this==e}range(e,t=e){return Ql.create(e,t,this)}}ds.prototype.startSide=ds.prototype.endSide=0;ds.prototype.point=!1;ds.prototype.mapMode=wt.TrackDel;function eh(i,e){return i==e||i.constructor==e.constructor&&i.eq(e)}let Ql=class xf{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new xf(e,t,s)}};function Ul(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class th{constructor(e,t,s,r){this.from=e,this.to=t,this.value=s,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,r=0){let n=s?this.to:this.from;for(let o=r,l=n.length;;){if(o==l)return o;let a=o+l>>1,h=n[a]-e||(s?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,s,r){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(s,1e9,!1,n);n<o;n++)if(r(this.from[n]+e,this.to[n]+e,this.value[n])===!1)return!1}map(e,t){let s=[],r=[],n=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,f,p;if(c==u){let g=t.mapPos(c,h.startSide,h.mapMode);if(g==null||(f=p=g,h.startSide!=h.endSide&&(p=t.mapPos(c,h.endSide),p<f)))continue}else if(f=t.mapPos(c,h.startSide),p=t.mapPos(u,h.endSide),f>p||f==p&&h.startSide>0&&h.endSide<=0)continue;(p-f||h.endSide-h.startSide)<0||(o<0&&(o=f),h.point&&(l=Math.max(l,p-f)),s.push(h),r.push(f-o),n.push(p-o))}return{mapped:s.length?new th(r,n,s,l):null,pos:o}}}class ce{constructor(e,t,s,r){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=r}static create(e,t,s,r){return new ce(e,t,s,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:r=0,filterTo:n=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(s&&(t=t.slice().sort(Ul)),this.isEmpty)return t.length?ce.of(t):this;let l=new vf(this,null,-1).goto(0),a=0,h=[],c=new Dr;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||n<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||n<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(Ql.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?ce.empty:this.nextLayer.update({add:h,filter:o,filterFrom:r,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)r=Math.max(r,a.maxPoint),t.push(a),s.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),t.push(c),s.push(u))}}let n=this.nextLayer.map(e);return t.length==0?n:new ce(s,t,n||ce.empty,r)}between(e,t,s){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(t>=n&&e<=n+o.length&&o.between(n,e-n,t-n,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return Br.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Br.from(e).goto(t)}static compare(e,t,s,r,n=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=n),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=n),a=bc(o,l,s),h=new tr(o,a,n),c=new tr(l,a,n);s.iterGaps((u,f,p)=>xc(h,u,c,f,p,r)),s.empty&&s.length==0&&xc(h,0,c,0,0,r)}static eq(e,t,s=0,r){r==null&&(r=999999999);let n=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(n.length!=o.length)return!1;if(!n.length)return!0;let l=bc(n,o),a=new tr(n,l,0).goto(s),h=new tr(o,l,0).goto(s);for(;;){if(a.to!=h.to||!ql(a.active,h.active)||a.point&&(!h.point||!eh(a.point,h.point)))return!1;if(a.to>r)return!0;a.next(),h.next()}}static spans(e,t,s,r,n=-1){let o=new tr(e,null,n).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,s);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);r.point(l,h,o.point,c,u,o.pointRank),a=Math.min(o.openEnd(h),c.length)}else h>l&&(r.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>s)return a+(o.point&&o.to>s?1:0);l=o.to,o.next()}}static of(e,t=!1){let s=new Dr;for(let r of e instanceof Ql?[e]:t?Gk(e):e)s.add(r.from,r.to,r.value);return s.finish()}static join(e){if(!e.length)return ce.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let r=e[s];r!=ce.empty;r=r.nextLayer)t=new ce(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}ce.empty=new ce([],[],null,-1);function Gk(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let s=i[t];if(Ul(e,s)>0)return i.slice().sort(Ul);e=s}return i}ce.empty.nextLayer=ce.empty;class Dr{finishChunk(e){this.chunks.push(new th(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new Dr)).add(e,t,s)}addInner(e,t,s){let r=e-this.lastTo||s.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner(ce.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ce.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function bc(i,e,t){let s=new Map;for(let n of i)for(let o=0;o<n.chunk.length;o++)n.chunk[o].maxPoint<=0&&s.set(n.chunk[o],n.chunkPos[o]);let r=new Set;for(let n of e)for(let o=0;o<n.chunk.length;o++){let l=s.get(n.chunk[o]);l!=null&&(t?t.mapPos(l):l)==n.chunkPos[o]&&!t?.touchesRange(l,l+n.chunk[o].length)&&r.add(n.chunk[o])}return r}class vf{constructor(e,t,s,r=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Br{constructor(e){this.heap=e}static from(e,t=null,s=-1){let r=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=s&&r.push(new vf(o,t,s,n));return r.length==1?r[0]:new Br(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)Yo(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)Yo(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Yo(this.heap,0)}}}function Yo(i,e){for(let t=i[e];;){let s=(e<<1)+1;if(s>=i.length)break;let r=i[s];if(s+1<i.length&&r.compare(i[s+1])>=0&&(r=i[s+1],s++),t.compare(r)<0)break;i[s]=t,i[e]=r,e=s}}class tr{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Br.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){sn(this.active,e),sn(this.activeTo,e),sn(this.activeRank,e),this.minActive=vc(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:r,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||r-this.activeTo[t])>0;)t++;rn(this.active,t,s),rn(this.activeTo,t,r),rn(this.activeRank,t,n),e&&rn(e,t,this.cursor.from),this.minActive=vc(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),s&&sn(s,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let n=this.cursor.value;if(!n.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let r=s.length-1;r>=0&&s[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function xc(i,e,t,s,r,n){i.goto(e),t.goto(s);let o=s+r,l=s,a=s-e,h=!!n.boundChange;for(let c=!1;;){let u=i.to+a-t.to,f=u||i.endSide-t.endSide,p=f<0?i.to+a:t.to,g=Math.min(p,o);if(i.point||t.point?(i.point&&t.point&&eh(i.point,t.point)&&ql(i.activeForPoint(i.to),t.activeForPoint(t.to))||n.comparePoint(l,g,i.point,t.point),c=!1):(c&&n.boundChange(l),g>l&&!ql(i.active,t.active)&&n.compareRange(l,g,i.active,t.active),h&&g<o&&(u||i.openEnd(p)!=t.openEnd(p))&&(c=!0)),p>o)break;l=p,f<=0&&i.next(),f>=0&&t.next()}}function ql(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!eh(i[t],e[t]))return!1;return!0}function sn(i,e){for(let t=e,s=i.length-1;t<s;t++)i[t]=i[t+1];i.pop()}function rn(i,e,t){for(let s=i.length-1;s>=e;s--)i[s+1]=i[s];i[e]=t}function vc(i,e){let t=-1,s=1e9;for(let r=0;r<e.length;r++)(e[r]-s||i[r].endSide-i[t].endSide)<0&&(t=r,s=e[r]);return t}function Ao(i,e,t=i.length){let s=0;for(let r=0;r<t&&r<i.length;)i.charCodeAt(r)==9?(s+=e-s%e,r++):(s++,r=Ue(i,r));return s}function Yk(i,e,t,s){for(let r=0,n=0;;){if(n>=e)return r;if(r==i.length)break;n+=i.charCodeAt(r)==9?t-n%t:1,r=Ue(i,r)}return i.length}const Kl="",kc=typeof Symbol>"u"?"__"+Kl:Symbol.for(Kl),Xl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ji{constructor(e,t){this.rules=[];let{finish:s}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function n(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let p in l){let g=l[p];if(/&/.test(p))n(p.split(/,\s*/).map(y=>o.map(x=>y.replace(/&/,x))).reduce((y,x)=>y.concat(x)),g,a);else if(g&&typeof g=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");n(r(p),g,c,f)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((s&&!u&&!h?o.map(s):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)n(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=wc[kc]||1;return wc[kc]=e+1,Kl+e.toString(36)}static mount(e,t,s){let r=e[Xl],n=s&&s.nonce;r?n&&r.setNonce(n):r=new Jk(e,n),r.mount(Array.isArray(t)?t:[t],e)}}let Sc=new Map;class Jk{constructor(e,t){let s=e.ownerDocument||e,r=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let n=Sc.get(s);if(n)return e[Xl]=n;this.sheet=new r.CSSStyleSheet,Sc.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Xl]=this}mount(e,t){let s=this.sheet,r=0,n=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<n&&a>-1&&(this.modules.splice(a,1),n--,a=-1),a==-1){if(this.modules.splice(n++,0,l),s)for(let h=0;h<l.rules.length;h++)s.insertRule(l.rules[h],r++)}else{for(;n<a;)r+=this.modules[n++].rules.length;r+=l.rules.length,n++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Wi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Zk=typeof navigator<"u"&&/Mac/.test(navigator.platform),e2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qe=0;Qe<10;Qe++)Wi[48+Qe]=Wi[96+Qe]=String(Qe);for(var Qe=1;Qe<=24;Qe++)Wi[Qe+111]="F"+Qe;for(var Qe=65;Qe<=90;Qe++)Wi[Qe]=String.fromCharCode(Qe+32),$r[Qe]=String.fromCharCode(Qe);for(var Jo in Wi)$r.hasOwnProperty(Jo)||($r[Jo]=Wi[Jo]);function t2(i){var e=Zk&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||e2&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?$r:Wi)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let nt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Gl=typeof document<"u"?document:{documentElement:{style:{}}};const Yl=/Edge\/(\d+)/.exec(nt.userAgent),kf=/MSIE \d/.test(nt.userAgent),Jl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nt.userAgent),Mo=!!(kf||Jl||Yl),Cc=!Mo&&/gecko\/(\d+)/i.test(nt.userAgent),Zo=!Mo&&/Chrome\/(\d+)/.exec(nt.userAgent),i2="webkitFontSmoothing"in Gl.documentElement.style,Zl=!Mo&&/Apple Computer/.test(nt.vendor),Oc=Zl&&(/Mobile\/\w+/.test(nt.userAgent)||nt.maxTouchPoints>2);var X={mac:Oc||/Mac/.test(nt.platform),windows:/Win/.test(nt.platform),linux:/Linux|X11/.test(nt.platform),ie:Mo,ie_version:kf?Gl.documentMode||6:Jl?+Jl[1]:Yl?+Yl[1]:0,gecko:Cc,gecko_version:Cc?+(/Firefox\/(\d+)/.exec(nt.userAgent)||[0,0])[1]:0,chrome:!!Zo,chrome_version:Zo?+Zo[1]:0,ios:Oc,android:/Android\b/.test(nt.userAgent),webkit_version:i2?+(/\bAppleWebKit\/(\d+)/.exec(nt.userAgent)||[0,0])[1]:0,safari:Zl,safari_version:Zl?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nt.userAgent)||[0,0])[1]:0,tabSize:Gl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function ih(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const Un=Object.create(null);function sh(i,e,t){if(i==e)return!0;i||(i=Un),e||(e=Un);let s=Object.keys(i),r=Object.keys(e);if(s.length-0!=r.length-0)return!1;for(let n of s)if(n!=t&&(r.indexOf(n)==-1||i[n]!==e[n]))return!1;return!0}function s2(i,e){for(let t=i.attributes.length-1;t>=0;t--){let s=i.attributes[t].name;e[s]==null&&i.removeAttribute(s)}for(let t in e){let s=e[t];t=="style"?i.style.cssText=s:i.getAttribute(t)!=s&&i.setAttribute(t,s)}}function Ac(i,e,t){let s=!1;if(e)for(let r in e)t&&r in t||(s=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(s=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return s}function r2(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let s=i.attributes[t];e[s.name]=s.value}return e}class Po{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var pt=(function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i})(pt||(pt={}));class He extends ds{constructor(e,t,s,r){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Ur(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new fs(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,r;if(e.isBlockGap)s=-5e8,r=4e8;else{let{start:n,end:o}=wf(e,t);s=(n?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new fs(e,s,r,t,e.widget||null,!0)}static line(e){return new qr(e)}static set(e,t=!1){return ce.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}He.none=ce.empty;class Ur extends He{constructor(e){let{start:t,end:s}=wf(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?ih(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Un}eq(e){return this==e||e instanceof Ur&&this.tagName==e.tagName&&sh(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Ur.prototype.point=!1;class qr extends He{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof qr&&this.spec.class==e.spec.class&&sh(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}qr.prototype.mapMode=wt.TrackBefore;qr.prototype.point=!0;class fs extends He{constructor(e,t,s,r,n,o){super(t,s,n,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?wt.TrackBefore:wt.TrackAfter:wt.TrackDel}get type(){return this.startSide!=this.endSide?pt.WidgetRange:this.startSide<=0?pt.WidgetBefore:pt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof fs&&n2(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}fs.prototype.point=!0;function wf(i,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=i;return t==null&&(t=i.inclusive),s==null&&(s=i.inclusive),{start:t??e,end:s??e}}function n2(i,e){return i==e||!!(i&&e&&i.compare(e))}function Es(i,e,t,s=0){let r=t.length-1;r>=0&&t[r]+s>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class Er extends ds{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Er&&this.tagName==e.tagName&&sh(this.attributes,e.attributes)}static create(e){return new Er(e.tagName,e.attributes||Un)}static set(e,t=!1){return ce.of(e,t)}}Er.prototype.startSide=Er.prototype.endSide=-1;function Rr(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function ea(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function An(i,e){if(!e.anchorNode)return!1;try{return ea(i,e.anchorNode)}catch{return!1}}function Mn(i){return i.nodeType==3?Lr(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function yr(i,e,t,s){return t?Mc(i,e,t,s,-1)||Mc(i,e,t,s,1):!1}function zi(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function qn(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function Mc(i,e,t,s,r){for(;;){if(i==t&&e==s)return!0;if(e==(r<0?0:wi(i))){if(i.nodeName=="DIV")return!1;let n=i.parentNode;if(!n||n.nodeType!=1)return!1;e=zi(i)+(r<0?0:1),i=n}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?wi(i):0}else return!1}}function wi(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function Kn(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function o2(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Sf(i,e){let t=e.width/i.offsetWidth,s=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-i.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function l2(i,e,t,s,r,n,o,l){let a=i.ownerDocument,h=a.defaultView||window;for(let c=i,u=!1;c&&!u;)if(c.nodeType==1){let f,p=c==a.body,g=1,y=1;if(p)f=o2(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let k=c.getBoundingClientRect();({scaleX:g,scaleY:y}=Sf(c,k)),f={left:k.left,right:k.left+c.clientWidth*g,top:k.top,bottom:k.top+c.clientHeight*y}}let x=0,m=0;if(r=="nearest")e.top<f.top?(m=e.top-(f.top+o),t>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,t<0&&e.top-m<f.top&&(m=e.top-(f.top+o)));else{let k=e.bottom-e.top,C=f.bottom-f.top;m=(r=="center"&&k<=C?e.top+k/2-C/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-C+o)-f.top}if(s=="nearest"?e.left<f.left?(x=e.left-(f.left+n),t>0&&e.right>f.right+x&&(x=e.right-f.right+n)):e.right>f.right&&(x=e.right-f.right+n,t<0&&e.left<f.left+x&&(x=e.left-(f.left+n))):x=(s=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:s=="start"==l?e.left-n:e.right-(f.right-f.left)+n)-f.left,x||m)if(p)h.scrollBy(x,m);else{let k=0,C=0;if(m){let S=c.scrollTop;c.scrollTop+=m/y,C=(c.scrollTop-S)*y}if(x){let S=c.scrollLeft;c.scrollLeft+=x/g,k=(c.scrollLeft-S)*g}e={left:e.left-k,top:e.top-C,right:e.right-k,bottom:e.bottom-C},k&&Math.abs(k-x)<1&&(s="nearest"),C&&Math.abs(C-m)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function a2(i){let e=i.ownerDocument,t,s;for(let r=i.parentNode;r&&!(r==e.body||t&&s);)if(r.nodeType==1)!s&&r.scrollHeight>r.clientHeight&&(s=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:s}}class h2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?wi(t):0),s,Math.min(e.focusOffset,s?wi(s):0))}set(e,t,s,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=r}}let is=null;X.safari&&X.safari_version>=26&&(is=!1);function Cf(i){if(i.setActive)return i.setActive();if(is)return i.focus(is);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(is==null?{get preventScroll(){return is={preventScroll:!0},!0}}:void 0),!is){is=!1;for(let t=0;t<e.length;){let s=e[t++],r=e[t++],n=e[t++];s.scrollTop!=r&&(s.scrollTop=r),s.scrollLeft!=n&&(s.scrollLeft=n)}}}let Pc;function Lr(i,e,t=e){let s=Pc||(Pc=document.createRange());return s.setEnd(i,t),s.setStart(i,e),s}function Rs(i,e,t,s){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=s);let n=new KeyboardEvent("keydown",r);n.synthetic=!0,i.dispatchEvent(n);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,i.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function c2(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function u2(i,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,wi(t));;)if(s){if(t.nodeType!=1)return!1;let r=t.childNodes[s-1];r.contentEditable=="false"?s--:(t=r,s=wi(t))}else{if(t==i)return!0;s=zi(t),t=t.parentNode}}function Of(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function Af(i,e){for(let t=i,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=wi(t)}else if(t.parentNode&&!qn(t))s=zi(t),t=t.parentNode;else return null}}function Mf(i,e){for(let t=i,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!qn(t))s=zi(t)+1,t=t.parentNode;else return null}}class Et{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new Et(e.parentNode,zi(e),t)}static after(e,t){return new Et(e.parentNode,zi(e)+1,t)}}var Re=(function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i})(Re||(Re={}));const ps=Re.LTR,rh=Re.RTL;function Pf(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const d2=Pf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),f2=Pf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ta=Object.create(null),Kt=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);ta[e]=t,ta[t]=-e}function Tf(i){return i<=247?d2[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?f2[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const p2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class yi{get dir(){return this.level%2?rh:ps}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,r){let n=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==s)return o;(n<0||(r!=0?r<0?l.from<t:l.to>t:e[n].level>l.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}function _f(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let s=i[t],r=e[t];if(s.from!=r.from||s.to!=r.to||s.direction!=r.direction||!_f(s.inner,r.inner))return!1}return!0}const we=[];function g2(i,e,t,s,r){for(let n=0;n<=s.length;n++){let o=n?s[n-1].to:e,l=n<s.length?s[n].from:t,a=n?256:r;for(let h=o,c=a,u=a;h<l;h++){let f=Tf(i.charCodeAt(h));f==512?f=c:f==8&&u==4&&(f=16),we[h]=f==4?2:f,f&7&&(u=f),c=f}for(let h=o,c=a,u=a;h<l;h++){let f=we[h];if(f==128)h<l-1&&c==we[h+1]&&c&24?f=we[h]=c:we[h]=256;else if(f==64){let p=h+1;for(;p<l&&we[p]==64;)p++;let g=h&&c==8||p<t&&we[p]==8?u==1?1:8:256;for(let y=h;y<p;y++)we[y]=g;h=p-1}else f==8&&u==1&&(we[h]=1);c=f,f&7&&(u=f)}}}function m2(i,e,t,s,r){let n=r==1?2:1;for(let o=0,l=0,a=0;o<=s.length;o++){let h=o?s[o-1].to:e,c=o<s.length?s[o].from:t;for(let u=h,f,p,g;u<c;u++)if(p=ta[f=i.charCodeAt(u)])if(p<0){for(let y=l-3;y>=0;y-=3)if(Kt[y+1]==-p){let x=Kt[y+2],m=x&2?r:x&4?x&1?n:r:0;m&&(we[u]=we[Kt[y]]=m),l=y;break}}else{if(Kt.length==189)break;Kt[l++]=u,Kt[l++]=f,Kt[l++]=a}else if((g=we[u])==2||g==1){let y=g==r;a=y?0:1;for(let x=l-3;x>=0;x-=3){let m=Kt[x+2];if(m&2)break;if(y)Kt[x+2]|=2;else{if(m&4)break;Kt[x+2]|=4}}}}}function y2(i,e,t,s){for(let r=0,n=s;r<=t.length;r++){let o=r?t[r-1].to:i,l=r<t.length?t[r].from:e;for(let a=o;a<l;){let h=we[a];if(h==256){let c=a+1;for(;;)if(c==l){if(r==t.length)break;c=t[r++].to,l=r<t.length?t[r].from:e}else if(we[c]==256)c++;else break;let u=n==1,f=(c<e?we[c]:s)==1,p=u==f?u?1:2:s;for(let g=c,y=r,x=y?t[y-1].to:i;g>a;)g==x&&(g=t[--y].from,x=y?t[y-1].to:i),we[--g]=p;a=c}else n=h,a++}}}function ia(i,e,t,s,r,n,o){let l=s%2?2:1;if(s%2==r%2)for(let a=e,h=0;a<t;){let c=!0,u=!1;if(h==n.length||a<n[h].from){let y=we[a];y!=l&&(c=!1,u=y==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(h<n.length&&g==n[h].from){if(u)break e;let y=n[h];if(!c)for(let x=y.to,m=h+1;;){if(x==t)break e;if(m<n.length&&n[m].from==x)x=n[m++].to;else{if(we[x]==l)break e;break}}if(h++,f)f.push(y);else{y.from>a&&o.push(new yi(a,y.from,p));let x=y.direction==ps!=!(p%2);sa(i,x?s+1:s,r,y.inner,y.from,y.to,o),a=y.to}g=y.to}else{if(g==t||(c?we[g]!=l:we[g]==l))break;g++}f?ia(i,a,g,s+1,r,f,o):a<g&&o.push(new yi(a,g,p)),a=g}else for(let a=t,h=n.length;a>e;){let c=!0,u=!1;if(!h||a>n[h-1].to){let y=we[a-1];y!=l&&(c=!1,u=y==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(h&&g==n[h-1].to){if(u)break e;let y=n[--h];if(!c)for(let x=y.from,m=h;;){if(x==e)break e;if(m&&n[m-1].to==x)x=n[--m].from;else{if(we[x-1]==l)break e;break}}if(f)f.push(y);else{y.to<a&&o.push(new yi(y.to,a,p));let x=y.direction==ps!=!(p%2);sa(i,x?s+1:s,r,y.inner,y.from,y.to,o),a=y.from}g=y.from}else{if(g==e||(c?we[g-1]!=l:we[g-1]==l))break;g--}f?ia(i,g,a,s+1,r,f,o):g<a&&o.push(new yi(g,a,p)),a=g}}function sa(i,e,t,s,r,n,o){let l=e%2?2:1;g2(i,r,n,s,l),m2(i,r,n,s,l),y2(r,n,s,l),ia(i,r,n,e,t,s,o)}function b2(i,e,t){if(!i)return[new yi(0,0,e==rh?1:0)];if(e==ps&&!t.length&&!p2.test(i))return Df(i.length);if(t.length)for(;i.length>we.length;)we[we.length]=256;let s=[],r=e==ps?0:1;return sa(i,r,r,t,0,i.length,s),s}function Df(i){return[new yi(0,i,0)]}let Bf="";function x2(i,e,t,s,r){var n;let o=s.head-i.from,l=yi.find(e,o,(n=s.bidiLevel)!==null&&n!==void 0?n:-1,s.assoc),a=e[l],h=a.side(r,t);if(o==h){let f=l+=r?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!r,t),h=a.side(r,t)}let c=Ue(i.text,o,a.forward(r,t));(c<a.from||c>a.to)&&(c=h),Bf=i.text.slice(Math.min(o,c),Math.max(o,c));let u=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return u&&c==h&&u.level+(r?0:1)<a.level?N.cursor(u.side(!r,t)+i.from,u.forward(r,t)?1:-1,u.level):N.cursor(c+i.from,a.forward(r,t)?-1:1,a.level)}function v2(i,e,t){for(let s=e;s<t;s++){let r=Tf(i.charCodeAt(s));if(r==1)return ps;if(r==2||r==4)return rh}return ps}const $f=J.define(),Ef=J.define(),Rf=J.define(),Lf=J.define(),ra=J.define(),If=J.define(),Nf=J.define(),nh=J.define(),oh=J.define(),Vf=J.define({combine:i=>i.some(e=>e)}),k2=J.define({combine:i=>i.some(e=>e)}),Ff=J.define();class Ls{constructor(e,t="nearest",s="nearest",r=5,n=5,o=!1){this.range=e,this.y=t,this.x=s,this.yMargin=r,this.xMargin=n,this.isSnapshot=o}map(e){return e.empty?this:new Ls(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ls(N.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const nn=Ve.define({map:(i,e)=>i.map(e)}),Hf=Ve.define();function si(i,e,t){let s=i.facet(Lf);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const gi=J.define({combine:i=>i.length?i[0]:!0});let w2=0;const Ss=J.define({combine(i){return i.filter((e,t)=>{for(let s=0;s<t;s++)if(i[s].plugin==e.plugin)return!1;return!0})}});class Qi{constructor(e,t,s,r,n){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=r,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(Ss.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ss.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:r,provide:n,decorations:o}=t||{};return new Qi(w2++,e,s,r,l=>{let a=[];return o&&a.push(Ir.of(h=>{let c=h.plugin(l);return c?o(c):He.none})),n&&a.push(n(l)),a})}static fromClass(e,t){return Qi.define((s,r)=>new e(s,r),t)}}class el{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(si(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){si(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){si(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const jf=J.define(),lh=J.define(),Ir=J.define(),Wf=J.define(),zf=J.define(),Kr=J.define(),Qf=J.define();function Tc(i,e){let t=i.state.facet(Qf);if(!t.length)return t;let s=t.map(n=>n instanceof Function?n(i):n),r=[];return ce.spans(s,e.from,e.to,{point(){},span(n,o,l,a){let h=n-e.from,c=o-e.from,u=r;for(let f=l.length-1;f>=0;f--,a--){let p=l[f].spec.bidiIsolate,g;if(p==null&&(p=v2(e.text,h,c)),a>0&&u.length&&(g=u[u.length-1]).to==h&&g.direction==p)g.to=c,u=g.inner;else{let y={from:h,to:c,direction:p,inner:[]};u.push(y),u=y.inner}}}}),r}const Uf=J.define();function qf(i){let e=0,t=0,s=0,r=0;for(let n of i.state.facet(Uf)){let o=n(i);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(s=Math.max(s,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:s,bottom:r}}const or=J.define();class At{constructor(e,t,s,r){this.fromA=e,this.toA=t,this.fromB=s,this.toB=r}join(e){return new At(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>s.toA)){if(r.toA<s.fromA)break;s=s.join(r),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let r=0,n=0,o=0;;){let l=r<e.length?e[r].fromB:1e9,a=n<t.length?t[n]:1e9,h=Math.min(l,a);if(h==1e9)break;let c=h+o,u=h,f=c;for(;;)if(n<t.length&&t[n]<=u){let p=t[n+1];n+=2,u=Math.max(u,p);for(let g=r;g<e.length&&e[g].fromB<=u;g++)o=e[g].toA-e[g].toB;f=Math.max(f,p+o)}else if(r<e.length&&e[r].fromB<=u){let p=e[r++];u=Math.max(u,p.toB),f=Math.max(f,p.toA),o=p.toA-p.toB}else break;s.push(new At(c,f,h,u))}return s}}class Xn{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=Fe.empty(this.startState.doc.length);for(let n of s)this.changes=this.changes.compose(n.changes);let r=[];this.changes.iterChangedRanges((n,o,l,a)=>r.push(new At(n,o,l,a))),this.changedRanges=r}static create(e,t,s){return new Xn(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const S2=[];class Ne{constructor(e,t,s=0){this.dom=e,this.length=t,this.flags=s,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return S2}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&s2(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let s=t;for(let r of this.children){if(r==e)return s;s+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let s=zi(this.dom),r=this.length?e>0:t>0;return new Et(this.parent.dom,s+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof _o)return e;return null}static get(e){return e.cmTile}}class To extends Ne{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,s=null,r,n=e?.node==t?e:null,o=0;for(let l of this.children){if(l.sync(e),o+=l.length+l.breakAfter,r=s?s.nextSibling:t.firstChild,n&&r!=l.dom&&(n.written=!0),l.dom.parentNode==t)for(;r&&r!=l.dom;)r=_c(r);else t.insertBefore(l.dom,r);s=l.dom}for(r=s?s.nextSibling:t.firstChild,n&&r&&(n.written=!0);r;)r=_c(r);this.length=o}}function _c(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class _o extends To{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=Ne.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],s=this,r=0,n=0;;)if(r==s.children.length){if(!t.length)return;s=s.parent,s.breakAfter&&n++,r=t.pop()}else{let o=s.children[r++];if(o instanceof Ni)t.push(r),s=o,r=0;else{let l=n+o.length,a=e(o,n);if(a!==void 0)return a;n=l+o.breakAfter}}}resolveBlock(e,t){let s,r=-1,n,o=-1;if(this.blockTiles((l,a)=>{let h=a+l.length;if(e>=a&&e<=h){if(l.isWidget()&&t>=-1&&t<=1){if(l.flags&32)return!0;l.flags&16&&(s=void 0)}(a<e||e==h&&(t<-1?l.length:l.covers(1)))&&(!s||!l.isWidget()&&s.isWidget())&&(s=l,r=e-a),(h>e||e==a&&(t>1?l.length:l.covers(-1)))&&(!n||!l.isWidget()&&n.isWidget())&&(n=l,o=e-a)}}),!s&&!n)throw new Error("No tile at position "+e);return s&&t<0||!n?{tile:s,offset:r}:{tile:n,offset:o}}}class Ni extends To{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let s=new Ni(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class Fs extends To{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,s){let r=new Fs(t||document.createElement("div"),e);return(!t||!s)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,s){let r=null,n=-1,o=null,l=-1;function a(c,u){for(let f=0,p=0;f<c.children.length&&p<=u;f++){let g=c.children[f],y=p+g.length;y>=u&&(g.isComposite()?a(g,u-p):(!o||o.isHidden&&(t>0||s&&O2(o,g)))&&(y>u||g.flags&32)?(o=g,l=u-p):(p<u||g.flags&16&&!g.isHidden)&&(r=g,n=u-p)),p=y}}a(this,e);let h=(t<0?r:o)||r||o;return h?{tile:h,offset:h==r?n:l}:null}coordsIn(e,t){let s=this.resolveInline(e,t,!0);return s?s.tile.coordsIn(Math.max(0,s.offset),t):C2(this)}domIn(e,t){let s=this.resolveInline(e,t);if(s){let{tile:r,offset:n}=s;if(this.dom.contains(r.dom))return r.isText()?new Et(r.dom,Math.min(r.dom.nodeValue.length,n)):r.domPosFor(n,r.flags&16?1:r.flags&32?-1:t);let o=s.tile.parent,l=!1;for(let a of o.children){if(l)return new Et(a.dom,0);a==s.tile&&(l=!0)}}return new Et(this.dom,0)}}function C2(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Mn(e);return t[t.length-1]||null}function O2(i,e){let t=i.coordsIn(0,1),s=e.coordsIn(0,1);return t&&s&&s.top<t.bottom}class ft extends To{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let s=new ft(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class ls extends Ne{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let s=this.dom.nodeValue.length;e>s&&(e=s);let r=e,n=e,o=0;e==0&&t<0||e==s&&t>=0?X.chrome||X.gecko||(e?(r--,o=1):n<s&&(n++,o=-1)):t<0?r--:n<s&&n++;let l=Lr(this.dom,r,n).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return X.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?Kn(a,o<0):a||null}static of(e,t){let s=new ls(t||document.createTextNode(e),e);return t||(s.flags|=2),s}}class Hs extends Ne{constructor(e,t,s,r){super(e,t,r),this.widget=s}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,s){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(s)return Kn(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let n=this.dom.getClientRects(),o=null;if(!n.length)return null;let l=this.flags&16?!0:this.flags&32?!1:e>0;for(let a=l?n.length-1:0;o=n[a],!(e>0?a==0:a==n.length-1||o.top<o.bottom);a+=l?-1:1);return Kn(o,!l)}}get overrideDOMText(){if(!this.length)return ue.empty;let{root:e}=this;if(!e)return ue.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,s,r,n){return n||(n=e.toDOM(t),e.editable||(n.contentEditable="false")),new Hs(n,s,e,r)}}class Gn extends Ne{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!1}get overrideDOMText(){return ue.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class A2{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,s){let{tile:r,index:n,beforeBreak:o,parents:l}=this;for(;e||t>0;)if(r.isComposite())if(o){if(!e)break;s&&s.break(),e--,o=!1}else if(n==r.children.length){if(!e&&!l.length)break;s&&s.leave(r),o=!!r.breakAfter,{tile:r,index:n}=l.pop(),n++}else{let a=r.children[n],h=a.breakAfter;(t>0?a.length<=e:a.length<e)&&(!s||s.skip(a,0,a.length)!==!1||!a.isComposite)?(o=!!h,n++,e-=a.length):(l.push({tile:r,index:n}),r=a,n=0,s&&a.isComposite()&&s.enter(a))}else if(n==r.length)o=!!r.breakAfter,{tile:r,index:n}=l.pop(),n++;else if(e){let a=Math.min(e,r.length-n);s&&s.skip(r,n,n+a),e-=a,n+=a}else break;return this.tile=r,this.index=n,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class M2{constructor(e,t,s,r){this.from=e,this.to=t,this.wrapper=s,this.rank=r}}class P2{constructor(e,t,s){this.cache=e,this.root=t,this.blockWrappers=s,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,s,r){var n;this.flushBuffer();let o=this.ensureMarks(t,s),l=o.lastChild;if(l&&l.isText()&&!(l.flags&8)){this.cache.reused.set(l,2);let a=o.children[o.children.length-1]=new ls(l.dom,l.text+e);a.parent=o}else o.append(r||ls.of(e,(n=this.cache.find(ls))===null||n===void 0?void 0:n.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let s=this.curLine;s.dom!=t.line.dom&&(s.setDOM(this.cache.reused.has(t.line)?tl(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=s;for(let l=t.marks.length-1;l>=0;l--){let a=t.marks[l],h=r.lastChild;if(h instanceof ft&&h.mark.eq(a.mark))h.dom!=a.dom&&h.setDOM(tl(a.dom)),r=h;else{if(this.cache.reused.get(a)){let u=Ne.get(a.dom);u&&u.setDOM(tl(a.dom))}let c=ft.of(a.mark,a.dom);r.append(c),r=c}this.cache.reused.set(a,2)}let n=Ne.get(e.text);n&&this.cache.reused.set(n,2);let o=new ls(e.text,e.text.nodeValue);o.flags|=8,r.append(o)}addInlineWidget(e,t,s){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let n=this.ensureMarks(t,s);!r&&!(e.flags&16)&&n.append(this.getBuffer(1)),n.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,s){this.flushBuffer(),this.ensureMarks(t,s).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var s;e||(e=Kf);let r=Fs.start(e,t||((s=this.cache.find(Fs))===null||s===void 0?void 0:s.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var s;let r=this.curLine;for(let n=e.length-1;n>=0;n--){let o=e[n],l;if(t>0&&(l=r.lastChild)&&l instanceof ft&&l.mark.eq(o))r=l,t--;else{let a=ft.of(o,(s=this.cache.find(ft,h=>h.mark.eq(o)))===null||s===void 0?void 0:s.dom);r.append(a),r=a,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!Dc(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(X.ios&&Dc(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(il,0,32)||new Hs(il.toDOM(),0,il,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new M2(e.from,e.to,e.value,e.rank),s=this.wrappers.length;for(;s>0&&(this.wrappers[s-1].rank-t.rank||this.wrappers[s-1].to-t.to)<0;)s--;this.wrappers.splice(s,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let s of this.wrappers){let r=t.lastChild;if(s.from<this.pos&&r instanceof Ni&&r.wrapper.eq(s.wrapper))t=r;else{let n=Ni.of(s.wrapper,(e=this.cache.find(Ni,o=>o.wrapper.eq(s.wrapper)))===null||e===void 0?void 0:e.dom);t.append(n),t=n}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),s=this.cache.find(Gn,void 0,1);return s&&(s.flags=t),s||new Gn(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class T2{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:n,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=r;let l=this.textOff=Math.min(e,r.length);return n?null:r.slice(0,l)}let t=Math.min(this.text.length,this.textOff+e),s=this.text.slice(this.textOff,t);return this.textOff=t,s}}const Yn=[Hs,Fs,ls,ft,Gn,Ni,_o];for(let i=0;i<Yn.length;i++)Yn[i].bucket=i;class _2{constructor(e){this.view=e,this.buckets=Yn.map(()=>[]),this.index=Yn.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,s=this.buckets[t];s.length<6?s.push(e):s[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,s=2){let r=e.bucket,n=this.buckets[r],o=this.index[r];for(let l=n.length-1;l>=0;l--){let a=(l+o)%n.length,h=n[a];if((!t||t(h))&&!this.reused.has(h))return n.splice(a,1),a<o&&this.index[r]--,this.reused.set(h,s),h}return null}findWidget(e,t,s){let r=this.buckets[0];if(r.length)for(let n=0,o=0;;n++){if(n==r.length){if(o)return null;o=1,n=0}let l=r[n];if(!this.reused.has(l)&&(o==0?l.widget.compare(e):l.widget.constructor==e.constructor&&e.updateDOM(l.dom,this.view)))return r.splice(n,1),n<this.index[0]&&this.index[0]--,this.reused.set(l,1),l.length=t,l.flags=l.flags&-498|s,l}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}}class D2{constructor(e,t,s,r,n){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=n,this.openWidget=!1,this.openMarks=0,this.cache=new _2(e),this.text=new T2(e.state.doc),this.builder=new P2(this.cache,new _o(e,e.contentDOM),ce.iter(s)),this.cache.reused.set(t,2),this.old=new A2(t),this.reuseWalker={skip:(o,l,a)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,t){let s=t&&this.getCompositionContext(t.text);for(let r=0,n=0,o=0;;){let l=o<e.length?e[o++]:null,a=l?l.fromA:this.old.root.length;if(a>r){let h=a-r;this.preserve(h,!o,!l),r=a,n+=h}if(!l)break;this.forward(l.fromA,l.toA),t&&l.fromA<=t.range.fromA&&l.toA>=t.range.toA?(this.emit(n,t.range.fromB),this.builder.addComposition(t,s),this.text.skip(t.range.toB-t.range.fromB),this.emit(t.range.toB,l.toB)):this.emit(n,l.toB),n=l.toB,r=l.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,s){let r=E2(this.old),n=this.openMarks;this.old.advance(e,s?1:-1,{skip:(o,l,a)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(a-l);else{let h=a>0||l<o.length?Hs.of(o.widget,this.view,a-l,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,r,n),n=r.length)}else if(o.isText())this.builder.ensureLine(null),!l&&a==o.length?this.builder.addText(o.text,r,n,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(l,a),r,n)),n=r.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Gn)this.cache.add(o);else if(o instanceof ft)this.builder.ensureLine(null),this.builder.addMark(o,r,n),this.cache.reused.set(o,1),n=r.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof ft&&r.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?r.length&&(r.length=n=0):o instanceof ft&&(r.shift(),n=Math.min(n,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let s=null,r=this.builder,n=0,o=ce.spans(this.decorations,e,t,{point:(l,a,h,c,u,f)=>{if(h instanceof fs){if(this.disallowBlockEffectsFor[f]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.view.state.doc.lineAt(l).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(n=c.length,u>c.length)r.continueWidget(a-l);else{let p=h.widget||(h.block?js.block:js.inline),g=B2(h),y=this.cache.findWidget(p,a-l,g)||Hs.of(p,this.view,a-l,g);h.block?(h.startSide>0&&r.addLineStartIfNotCovered(s),r.addBlockWidget(y)):(r.ensureLine(s),r.addInlineWidget(y,c,u))}s=null}else s=$2(s,h);a>l&&this.text.skip(a-l)},span:(l,a,h,c)=>{for(let u=l;u<a;){let f=this.text.next(Math.min(512,a-u));f==null?(r.addLineStartIfNotCovered(s),r.addBreak(),u++):(r.ensureLine(s),r.addText(f,h,c),u+=f.length),s=null}}});r.addLineStartIfNotCovered(s),this.openWidget=o>n,this.openMarks=o}forward(e,t){t-e<=10?this.old.advance(t-e,1,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,1,this.reuseWalker))}getCompositionContext(e){let t=[],s=null;for(let r=e.parentNode;;r=r.parentNode){let n=Ne.get(r);if(r==this.view.contentDOM)break;n instanceof ft?t.push(n):n?.isLine()?s=n:r.nodeName=="DIV"&&!s&&r!=this.view.contentDOM?s=new Fs(r,Kf):t.push(ft.of(new Ur({tagName:r.nodeName.toLowerCase(),attributes:r2(r)}),r))}return{line:s,marks:t}}}function Dc(i,e){let t=s=>{for(let r of s.children)if((e?r.isText():r.length)||t(r))return!0;return!1};return t(i)}function B2(i){let e=i.isReplace?(i.startSide<0?64:0)|(i.endSide>0?128:0):i.startSide>0?32:16;return i.block&&(e|=256),e}const Kf={class:"cm-line"};function $2(i,e){let t=e.spec.attributes,s=e.spec.class;return!t&&!s||(i||(i={class:"cm-line"}),t&&ih(t,i),s&&(i.class+=" "+s)),i}function E2(i){let e=[];for(let t=i.parents.length;t>1;t--){let s=t==i.parents.length?i.tile:i.parents[t].tile;s instanceof ft&&e.push(s.mark)}return e}function tl(i){let e=Ne.get(i);return e&&e.setDOM(i.cloneNode()),i}class js extends Po{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}js.inline=new js("span");js.block=new js("div");const il=new class extends Po{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class Bc{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=He.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new _o(e,e.contentDOM),this.updateInner([new At(0,0,0,e.state.doc.length)],null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!W2(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let n=r>-1?L2(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:c,to:u}=this.hasComposition;s=new At(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(s.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(X.ie||X.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.blockWrappers;this.updateDeco();let a=V2(o,this.decorations,e.changes);a.length&&(s=At.extendWithRanges(s,a));let h=H2(l,this.blockWrappers,e.changes);return h.length&&(s=At.extendWithRanges(s,h)),n&&!s.some(c=>c.fromA<=n.range.fromA&&c.toA>=n.range.toA)&&(s=n.range.addToSet(s.slice())),this.tile.flags&2&&s.length==0?!1:(this.updateInner(s,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:s}=this.view;s.ignore(()=>{if(t||e.length){let o=this.tile,l=new D2(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=l.run(e,t),na(o,l.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let n=X.chrome||X.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(n),n&&(n.written||s.selectionRange.focusNode!=n.node||!this.tile.dom.contains(n.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let n of this.tile.children)n.isWidget()&&n.widget instanceof sl&&r.push(n.dom);s.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(Hf)&&(this.editContextFormatting=s.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:s}=this.tile,r=this.view.root.activeElement,n=r==s,o=!n&&!(this.view.state.facet(gi)||s.tabIndex>-1)&&An(s,this.view.observer.selectionRange)&&!(r&&s.contains(r));if(!(n||t||o))return;let l=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,h,c;if(a.empty?c=h=this.inlineDOMNearPos(a.anchor,a.assoc||1):(c=this.inlineDOMNearPos(a.head,a.head==a.from?1:-1),h=this.inlineDOMNearPos(a.anchor,a.anchor==a.from?1:-1)),X.gecko&&a.empty&&!this.hasComposition&&R2(h)){let f=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(f,h.node.childNodes[h.offset]||null)),h=c=new Et(f,0),l=!0}let u=this.view.observer.selectionRange;(l||!u.focusNode||(!yr(h.node,h.offset,u.anchorNode,u.anchorOffset)||!yr(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{X.android&&X.chrome&&s.contains(u.focusNode)&&j2(u.focusNode,s)&&(s.blur(),s.focus({preventScroll:!0}));let f=Rr(this.view.root);if(f)if(a.empty){if(X.gecko){let p=I2(h.node,h.offset);if(p&&p!=3){let g=(p==1?Af:Mf)(h.node,h.offset);g&&(h=new Et(g.node,g.offset))}}f.collapse(h.node,h.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(h.node,h.offset);try{f.extend(c.node,c.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([h,c]=[c,h]),p.setEnd(c.node,c.offset),p.setStart(h.node,h.offset),f.removeAllRanges(),f.addRange(p)}o&&this.view.root.activeElement==s&&(s.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,c)),this.impreciseAnchor=h.precise?null:new Et(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Et(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&yr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=Rr(e.root),{anchorNode:r,anchorOffset:n}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let o=this.lineAt(t.head,t.assoc);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc,t.assoc);s.collapse(c.node,c.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&s.collapse(r,n)}posFromDOM(e,t){let s=this.tile.nearest(e);if(!s)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=s.posAtStart;if(s.isComposite()){let n;if(e==s.dom)n=s.dom.childNodes[t];else{let o=wi(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==s.dom)break;o==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?o=-1:o=1),e=l}o<0?n=e:n=e.nextSibling}if(n==s.dom.firstChild)return r;for(;n&&!Ne.get(n);)n=n.nextSibling;if(!n)return r+s.length;for(let o=0,l=r;;o++){let a=s.children[o];if(a.dom==n)return l;l+=a.length+a.breakAfter}}else return s.isText()?e==s.dom?r+t:r+(t?s.length:0):r}domAtPos(e,t){let{tile:s,offset:r}=this.tile.resolveBlock(e,t);return s.isWidget()?s.domPosFor(e,t):s.domIn(r,t)}inlineDOMNearPos(e,t){let s,r=-1,n=!1,o,l=-1,a=!1;return this.tile.blockTiles((h,c)=>{if(h.isWidget()){if(h.flags&32&&c>=e)return!0;h.flags&16&&(n=!0)}else{let u=c+h.length;if(c<=e&&(s=h,r=e-c,n=u<e),u>=e&&!o&&(o=h,l=e-c,a=c>e),c>e&&o)return!0}}),!s&&!o?this.domAtPos(e,t):(n&&o?s=null:a&&s&&(o=null),s&&t<0||!o?s.domIn(r,t):o.domIn(l,t))}coordsAt(e,t){let{tile:s,offset:r}=this.tile.resolveBlock(e,t);return s.isWidget()?s.widget instanceof sl?null:s.coordsInWidget(r,t,!0):s.coordsIn(r,t)}lineAt(e,t){let{tile:s}=this.tile.resolveBlock(e,t);return s.isLine()?s:null}coordsForChar(e){let{tile:t,offset:s}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function r(n,o){if(n.isComposite())for(let l of n.children){if(l.length>=o){let a=r(l,o);if(a)return a}if(o-=l.length,o<0)break}else if(n.isText()&&o<n.length){let l=Ue(n.text,o);if(l==o)return null;let a=Lr(n.dom,o,l).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(h==a.length-1||c.top<c.bottom&&c.left<c.right)return c}}return null}return r(t,s)}measureVisibleLineHeights(e){let t=[],{from:s,to:r}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Re.LTR,h=0,c=(u,f,p)=>{for(let g=0;g<u.children.length&&!(f>r);g++){let y=u.children[g],x=f+y.length,m=y.dom.getBoundingClientRect(),{height:k}=m;if(p&&!g&&(h+=m.top-p.top),y instanceof Ni)x>s&&c(y,f,m);else if(f>=s&&(h>0&&t.push(-h),t.push(k+h),h=0,o)){let C=y.dom.lastChild,S=C?Mn(C):[];if(S.length){let $=S[S.length-1],P=a?$.right-m.left:m.right-$.left;P>l&&(l=P,this.minWidth=n,this.minWidthFrom=f,this.minWidthTo=x)}}p&&g==u.children.length-1&&(h+=p.bottom-m.bottom),f=x+y.breakAfter}};return c(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?Re.RTL:Re.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let l=0,a;for(let h of o.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let c=Mn(h.dom);if(c.length!=1)return;l+=c[0].width,a=c[0].height}if(l)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:l/o.length,textHeight:a}}});if(e)return e;let t=document.createElement("div"),s,r,n;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let o=Mn(t.firstChild)[0];s=t.getBoundingClientRect().height,r=o&&o.width?o.width/27:7,n=o&&o.height?o.height:s,t.remove()}),{lineHeight:s,charWidth:r,textHeight:n}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,r=0;;r++){let n=r==t.viewports.length?null:t.viewports[r],o=n?n.from-1:this.view.state.doc.length;if(o>s){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(He.replace({widget:new sl(l),block:!0,inclusive:!0,isBlockGap:!0}).range(s,o))}if(!n)break;s=n.to+1}return He.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ir).map(n=>(this.dynamicDecorationMap[e++]=typeof n=="function")?n(this.view):n),s=!1,r=this.view.state.facet(zf).map((n,o)=>{let l=typeof n=="function";return l&&(s=!0),l?n(this.view):n});for(r.length&&(this.dynamicDecorationMap[e++]=s,t.push(ce.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(Wf).map(n=>typeof n=="function"?n(this.view):n)}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Ff))try{if(h(this.view,e.range,e))return!0}catch(c){si(this.view.state,c,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!s)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,r.left),top:Math.min(s.top,r.top),right:Math.max(s.right,r.right),bottom:Math.max(s.bottom,r.bottom)});let n=qf(this.view),o={left:s.left-n.left,top:s.top-n.top,right:s.right+n.right,bottom:s.bottom+n.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;l2(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Re.LTR)}lineHasWidget(e){let t=s=>s.isWidget()||s.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){na(this.tile)}}function na(i,e){let t=e?.get(i);if(t!=1){t==null&&i.destroy();for(let s of i.children)na(s,e)}}function R2(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function Xf(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let s=Af(t.focusNode,t.focusOffset),r=Mf(t.focusNode,t.focusOffset),n=s||r;if(r&&s&&r.node!=s.node){let l=Ne.get(r.node);if(!l||l.isText()&&l.text!=r.node.nodeValue)n=r;else if(i.docView.lastCompositionAfterCursor){let a=Ne.get(s.node);!a||a.isText()&&a.text!=s.node.nodeValue||(n=r)}}if(i.docView.lastCompositionAfterCursor=n!=s,!n)return null;let o=e-n.offset;return{from:o,to:o+n.node.nodeValue.length,node:n.node}}function L2(i,e,t){let s=Xf(i,t);if(!s)return null;let{node:r,from:n,to:o}=s,l=r.nodeValue;if(/[\n\r]/.test(l)||i.state.doc.sliceString(s.from,s.to)!=l)return null;let a=e.invertedDesc;return{range:new At(a.mapPos(n),a.mapPos(o),n,o),text:r}}function I2(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let N2=class{constructor(){this.changes=[]}compareRange(e,t){Es(e,t,this.changes)}comparePoint(e,t){Es(e,t,this.changes)}boundChange(e){Es(e,e,this.changes)}};function V2(i,e,t){let s=new N2;return ce.compare(i,e,t,s),s.changes}class F2{constructor(){this.changes=[]}compareRange(e,t){Es(e,t,this.changes)}comparePoint(){}boundChange(e){Es(e,e,this.changes)}}function H2(i,e,t){let s=new F2;return ce.compare(i,e,t,s),s.changes}function j2(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function W2(i,e){let t=!1;return e&&i.iterChangedRanges((s,r)=>{s<e.to&&r>e.from&&(t=!0)}),t}class sl extends Po{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function z2(i,e,t=1){let s=i.charCategorizer(e),r=i.doc.lineAt(e),n=e-r.from;if(r.length==0)return N.cursor(e);n==0?t=1:n==r.length&&(t=-1);let o=n,l=n;t<0?o=Ue(r.text,n,!1):l=Ue(r.text,n);let a=s(r.text.slice(o,l));for(;o>0;){let h=Ue(r.text,o,!1);if(s(r.text.slice(h,o))!=a)break;o=h}for(;l<r.length;){let h=Ue(r.text,l);if(s(r.text.slice(l,h))!=a)break;l=h}return N.range(o+r.from,l+r.from)}function Q2(i,e,t,s,r){let n=Math.round((s-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let l=i.viewState.heightOracle.textHeight,a=Math.floor((r-t.top-(i.defaultLineHeight-l)*.5)/l);n+=a*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+Yk(o,n,i.state.tabSize)}function U2(i,e,t){let s=i.lineBlockAt(e);if(Array.isArray(s.type)){let r;for(let n of s.type){if(n.from>e)break;if(!(n.to<e)){if(n.from<e&&n.to>e)return n;(!r||n.type==pt.Text&&(r.type!=n.type||(t<0?n.from<e:n.to>e)))&&(r=n)}}return r||s}return s}function q2(i,e,t,s){let r=U2(i,e.head,e.assoc||-1),n=!s||r.type!=pt.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(n){let o=i.dom.getBoundingClientRect(),l=i.textDirectionAt(r.from),a=i.posAtCoords({x:t==(l==Re.LTR)?o.right-1:o.left+1,y:(n.top+n.bottom)/2});if(a!=null)return N.cursor(a,t?-1:1)}return N.cursor(t?r.to:r.from,t?-1:1)}function $c(i,e,t,s){let r=i.state.doc.lineAt(e.head),n=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let l=e,a=null;;){let h=x2(r,n,o,l,t),c=Bf;if(!h){if(r.number==(t?i.state.doc.lines:1))return l;c=`
`,r=i.state.doc.line(r.number+(t?1:-1)),n=i.bidiSpans(r),h=i.visualLineSide(r,!t)}if(a){if(!a(c))return l}else{if(!s)return h;a=s(c)}l=h}}function K2(i,e,t){let s=i.state.charCategorizer(e),r=s(t);return n=>{let o=s(n);return r==mi.Space&&(r=o),r==o}}function X2(i,e,t,s){let r=e.head,n=t?1:-1;if(r==(t?i.state.doc.length:0))return N.cursor(r,e.assoc);let o=e.goalColumn,l,a=i.contentDOM.getBoundingClientRect(),h=i.coordsAtPos(r,e.assoc||-1),c=i.documentTop;if(h)o==null&&(o=h.left-a.left),l=n<0?h.top:h.bottom;else{let p=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,i.defaultCharacterWidth*(r-p.from))),l=(n<0?p.top:p.bottom)+c}let u=a.left+o,f=s??i.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=l+(f+p)*n,y=oa(i,{x:u,y:g},!1,n);return N.cursor(y.pos,y.assoc,void 0,o)}}function br(i,e,t){for(;;){let s=0;for(let r of i)r.between(e-1,e+1,(n,o,l)=>{if(e>n&&e<o){let a=s||t||(e-n<o-e?-1:1);e=a<0?n:o,s=a}});if(!s)return e}}function Gf(i,e){let t=null;for(let s=0;s<e.ranges.length;s++){let r=e.ranges[s],n=null;if(r.empty){let o=br(i,r.from,0);o!=r.from&&(n=N.cursor(o,-1))}else{let o=br(i,r.from,-1),l=br(i,r.to,1);(o!=r.from||l!=r.to)&&(n=N.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}n&&(t||(t=e.ranges.slice()),t[s]=n)}return t?N.create(t,e.mainIndex):e}function rl(i,e,t){let s=br(i.state.facet(Kr).map(r=>r(i)),t.from,e.head>t.from?-1:1);return s==t.from?t:N.cursor(s,s<t.from?1:-1)}class ti{constructor(e,t){this.pos=e,this.assoc=t}}function oa(i,e,t,s){let r=i.contentDOM.getBoundingClientRect(),n=r.top+i.viewState.paddingTop,{x:o,y:l}=e,a=l-n,h;for(;;){if(a<0)return new ti(0,1);if(a>i.viewState.docHeight)return new ti(i.state.doc.length,-1);if(h=i.elementAtHeight(a),s==null)break;if(h.type==pt.Text){let f=i.docView.coordsAt(s<0?h.from:h.to,s);if(f&&(s<0?f.top<=a+n:f.bottom>=a+n))break}let u=i.viewState.heightOracle.textHeight/2;a=s>0?h.bottom+u:h.top-u}if(i.viewport.from>=h.to||i.viewport.to<=h.from){if(t)return null;if(h.type==pt.Text){let u=Q2(i,r,h,o,l);return new ti(u,u==h.from?1:-1)}}if(h.type!=pt.Text)return a<(h.top+h.bottom)/2?new ti(h.from,1):new ti(h.to,-1);let c=i.docView.lineAt(h.from,2);return(!c||c.length!=h.length)&&(c=i.docView.lineAt(h.from,-2)),Yf(i,c,h.from,o,l)}function Yf(i,e,t,s,r){let n=-1,o=null,l=1e9,a=1e9,h=r,c=r,u=(f,p)=>{for(let g=0;g<f.length;g++){let y=f[g];if(y.top==y.bottom)continue;let x=y.left>s?y.left-s:y.right<s?s-y.right:0,m=y.top>r?y.top-r:y.bottom<r?r-y.bottom:0;y.top<=c&&y.bottom>=h&&(h=Math.min(y.top,h),c=Math.max(y.bottom,c),m=0),(n<0||(m-a||x-l)<0)&&(n>=0&&a&&l<x&&o.top<=c-2&&o.bottom>=h+2?a=0:(n=p,l=x,a=m,o=y))}};if(e.isText()){for(let p=0;p<e.length;){let g=Ue(e.text,p);if(u(Lr(e.dom,p,g).getClientRects(),p),!l&&!a)break;p=g}return s>(o.left+o.right)/2==(Ec(i,n+t)==Re.LTR)?new ti(t+Ue(e.text,n),-1):new ti(t+n,1)}else{if(!e.length)return new ti(t,1);for(let y=0;y<e.children.length;y++){let x=e.children[y];if(x.flags&48)continue;let m=(x.dom.nodeType==1?x.dom:Lr(x.dom,0,x.length)).getClientRects();if(u(m,y),!l&&!a)break}let f=e.children[n],p=e.posBefore(f,t);return f.isComposite()||f.isText()?Yf(i,f,p,Math.max(o.left,Math.min(o.right,s)),r):s>(o.left+o.right)/2==(Ec(i,n+t)==Re.LTR)?new ti(p+f.length,-1):new ti(p,1)}}function Ec(i,e){let t=i.state.doc.lineAt(e);return i.bidiSpans(t)[yi.find(i.bidiSpans(t),e-t.from,-1,1)].dir}const lr="";class G2{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(ge.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=lr}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let r=e;;){this.findPointBefore(s,r);let n=this.text.length;this.readNode(r);let o=Ne.get(r),l=r.nextSibling;if(l==t){o?.breakAfter&&!l&&s!=this.view.contentDOM&&this.lineBreak();break}let a=Ne.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:qn(r))||qn(l)&&(r.nodeName!="BR"||o?.isWidget())&&this.text.length>n)&&!J2(l,t)&&this.lineBreak(),r=l}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,o=1,l;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,s),o=this.lineSeparator.length):(l=r.exec(t))&&(n=l.index,o=l[0].length),this.append(t.slice(s,n<0?t.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);s=n+o}}readNode(e){let t=Ne.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let r=s.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(Y2(e,s.node,s.offset)?t:0))}}function Y2(i,e,t){for(;;){if(!e||t<wi(e))return!1;if(e==i)return!0;t=zi(e)+1,e=e.parentNode}}function J2(i,e){let t;for(;!(i==e||!i);i=i.nextSibling){let s=Ne.get(i);if(!s?.isWidget())return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let r=s.overrideDOMText;if(r?.length)return!1}return!0}class Rc{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Z2{constructor(e,t,s,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=Jf(e.docView.tile,t,s,0))){let l=n||o?[]:tw(e),a=new G2(l,e);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=iw(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=n&&n.node==l.focusNode&&n.offset==l.focusOffset||!ea(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!ea(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((X.ios||X.chrome)&&e.state.selection.main.empty&&a!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(a,h),f=Math.max(a,h),p=c.from-u,g=c.to-f;(p==0||p==1||u==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,h=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(N.range(h,a)):this.newSel=N.single(h,a)}}}function Jf(i,e,t,s){if(i.isComposite()){let r=-1,n=-1,o=-1,l=-1;for(let a=0,h=s,c=s;a<i.children.length;a++){let u=i.children[a],f=h+u.length;if(h<e&&f>t)return Jf(u,e,t,h);if(f>=e&&r==-1&&(r=a,n=h),h>t&&u.dom.parentNode==i.dom){o=a,l=c;break}c=f,h=f+u.breakAfter}return{from:n,to:l<0?s+i.length:l,startDOM:(r?i.children[r-1].dom.nextSibling:null)||i.dom.firstChild,endDOM:o<i.children.length&&o>=0?i.children[o].dom:null}}else return i.isText()?{from:s,to:s+i.length,startDOM:i.dom,endDOM:i.dom.nextSibling}:null}function Zf(i,e){let t,{newSel:s}=e,r=i.state.selection.main,n=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,h=null;(n===8||X.android&&e.text.length<l-o)&&(a=r.to,h="end");let c=ep(i.state.doc.sliceString(o,l,lr),e.text,a-o,h);c&&(X.chrome&&n==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==lr+lr&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:ue.of(e.text.slice(c.from,c.toB).split(lr))})}else s&&(!i.hasFocus&&i.state.facet(gi)||s.main.eq(r))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!r.empty&&s&&s.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:(X.mac||X.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=N.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:ue.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:i.state.doc.lineAt(r.from).to<r.to&&i.docView.lineHasWidget(r.to)&&i.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:i.state.toText(i.inputState.insertingText)}:X.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(s&&(s=N.single(s.main.anchor-1,s.main.head-1)),t={from:r.from,to:r.to,insert:ue.of([" "])}),t)return ah(i,t,s,n);if(s&&!s.main.eq(r)){let o=!1,l="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(o=!0),l=i.inputState.lastSelectionOrigin,l=="select.pointer"&&(s=Gf(i.state.facet(Kr).map(a=>a(i)),s))),i.dispatch({selection:s,scrollIntoView:o,userEvent:l}),!0}else return!1}function ah(i,e,t,s=-1){if(X.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(X.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Rs(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Rs(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Rs(i.contentDOM,"Delete",46)))return!0;let n=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let o,l=()=>o||(o=ew(i,e,t));return i.state.facet(If).some(a=>a(i,e.from,e.to,n,l))||i.dispatch(l()),!0}function ew(i,e,t){let s,r=i.state,n=r.selection.main,o=-1;if(e.from==e.to&&e.from<n.from||e.from>n.to){let a=e.from<n.from?-1:1,h=a<0?n.from:n.to,c=br(r.facet(Kr).map(u=>u(i)),h,a);e.from==c&&(o=c)}if(o>-1)s={changes:e,selection:N.cursor(e.from+e.insert.length,-1)};else if(e.from>=n.from&&e.to<=n.to&&e.to-e.from>=(n.to-n.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let a=n.from<e.from?r.sliceDoc(n.from,e.from):"",h=n.to>e.to?r.sliceDoc(e.to,n.to):"";s=r.replaceSelection(i.state.toText(a+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let a=r.changes(e),h=t&&t.main.to<=a.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(i.inputState.composing>=0||i.inputState.compositionPendingChange)&&e.to<=n.to+10&&e.to>=n.to-10){let c=i.state.sliceDoc(e.from,e.to),u,f=t&&Xf(i,t.main.head);if(f){let g=e.insert.length-(e.to-e.from);u={from:f.from,to:f.to-g}}else u=i.state.doc.lineAt(n.head);let p=n.to-e.to;s=r.changeByRange(g=>{if(g.from==n.from&&g.to==n.to)return{changes:a,range:h||g.map(a)};let y=g.to-p,x=y-c.length;if(i.state.sliceDoc(x,y)!=c||y>=u.from&&x<=u.to)return{range:g};let m=r.changes({from:x,to:y,insert:e.insert}),k=g.to-n.to;return{changes:m,range:h?N.range(Math.max(0,h.anchor+k),Math.max(0,h.head+k)):g.map(m)}})}else s={changes:a,selection:h&&r.selection.replaceRange(h)}}let l="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,l+=".compose",i.inputState.compositionFirstChange&&(l+=".start",i.inputState.compositionFirstChange=!1)),r.update(s,{userEvent:l,scrollIntoView:!0})}function ep(i,e,t,s){let r=Math.min(i.length,e.length),n=0;for(;n<r&&i.charCodeAt(n)==e.charCodeAt(n);)n++;if(n==r&&i.length==e.length)return null;let o=i.length,l=e.length;for(;o>0&&l>0&&i.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(s=="end"){let a=Math.max(0,n-Math.min(o,l));t-=o+a-n}if(o<n&&i.length<e.length){let a=t<=n&&t>=o?n-t:0;n-=a,l=n+(l-o),o=n}else if(l<n){let a=t<=n&&t>=l?n-t:0;n-=a,o=n+(o-l),l=n}return{from:n,toA:o,toB:l}}function tw(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:r,focusOffset:n}=i.observer.selectionRange;return t&&(e.push(new Rc(t,s)),(r!=t||n!=s)&&e.push(new Rc(r,n))),e}function iw(i,e){if(i.length==0)return null;let t=i[0].pos,s=i.length==2?i[1].pos:t;return t>-1&&s>-1?N.single(t+e,s+e):null}class sw{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,X.safari&&e.contentDOM.addEventListener("input",()=>null),X.gecko&&bw(e.contentDOM.ownerDocument)}handleEvent(e){!uw(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let r of s.observers)r(this.view,t);for(let r of s.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=rw(e),s=this.handlers,r=this.view.contentDOM;for(let n in t)if(n!="scroll"){let o=!t[n].handlers.length,l=s[n];l&&o!=!l.handlers.length&&(r.removeEventListener(n,this.handleEvent),l=null),l||r.addEventListener(n,this.handleEvent,{passive:o})}for(let n in s)n!="scroll"&&!t[n]&&r.removeEventListener(n,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&ip.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),X.android&&X.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return X.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=tp.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||nw.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Rs(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:X.safari&&!X.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Lc(i,e){return(t,s)=>{try{return e.call(i,s,t)}catch(r){si(t.state,r)}}}function rw(i){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of i){let r=s.spec,n=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(n)for(let l in n){let a=n[l];a&&t(l).handlers.push(Lc(s.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(Lc(s.value,a))}}for(let s in Vt)t(s).handlers.push(Vt[s]);for(let s in _t)t(s).observers.push(_t[s]);return e}const tp=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],nw="dthko",ip=[16,17,18,20,91,92,224,225],on=6;function ln(i){return Math.max(0,i)*.7+8}function ow(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class lw{constructor(e,t,s,r){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=a2(e.contentDOM),this.atoms=e.state.facet(Kr).map(o=>o(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ge.allowMultipleSelections)&&aw(e,t),this.dragging=cw(e,t)&&np(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ow(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,r=0,n=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=qf(this.view);e.clientX-a.left<=r+on?t=-ln(r-e.clientX):e.clientX+a.right>=o-on&&(t=ln(e.clientX-o)),e.clientY-a.top<=n+on?s=-ln(n-e.clientY):e.clientY+a.bottom>=l-on&&(s=ln(e.clientY-l)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=Gf(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function aw(i,e){let t=i.state.facet($f);return t.length?t[0](e):X.mac?e.metaKey:e.ctrlKey}function hw(i,e){let t=i.state.facet(Ef);return t.length?t[0](e):X.mac?!e.altKey:!e.ctrlKey}function cw(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let s=Rr(i.root);if(!s||s.rangeCount==0)return!0;let r=s.getRangeAt(0).getClientRects();for(let n=0;n<r.length;n++){let o=r[n];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function uw(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=Ne.get(t))&&s.isWidget()&&!s.isHidden&&s.widget.ignoreEvent(e))return!1;return!0}const Vt=Object.create(null),_t=Object.create(null),sp=X.ie&&X.ie_version<15||X.ios&&X.webkit_version<604;function dw(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),rp(i,t.value)},50)}function Do(i,e,t){for(let s of i.facet(e))t=s(t,i);return t}function rp(i,e){e=Do(i.state,nh,e);let{state:t}=i,s,r=1,n=t.toText(e),o=n.lines==t.selection.ranges.length;if(la!=null&&t.selection.ranges.every(a=>a.empty)&&la==n.toString()){let a=-1;s=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?n.line(r++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:N.cursor(h.from+u.length)}})}else o?s=t.changeByRange(a=>{let h=n.line(r++);return{changes:{from:a.from,to:a.to,insert:h.text},range:N.cursor(a.from+h.length)}}):s=t.replaceSelection(n);i.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}_t.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};Vt.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);_t.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};_t.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};Vt.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of i.state.facet(Rf))if(t=s(i,e),t)break;if(!t&&e.button==0&&(t=pw(i,e)),t){let s=!i.hasFocus;i.inputState.startMouseSelection(new lw(i,e,t,s)),s&&i.observer.ignore(()=>{Cf(i.contentDOM);let n=i.root.activeElement;n&&!n.contains(i.contentDOM)&&n.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else i.inputState.setSelectionOrigin("select.pointer");return!1};function Ic(i,e,t,s){if(s==1)return N.cursor(e,t);if(s==2)return z2(i.state,e,t);{let r=i.docView.lineAt(e,t),n=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:n.from,l=r?r.posAtEnd:n.to;return l<i.state.doc.length&&l==n.to&&l++,N.range(o,l)}}const fw=X.ie&&X.ie_version<=11;let Nc=null,Vc=0,Fc=0;function np(i){if(!fw)return i.detail;let e=Nc,t=Fc;return Nc=i,Fc=Date.now(),Vc=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Vc+1)%3:1}function pw(i,e){let t=i.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),s=np(e),r=i.state.selection;return{update(n){n.docChanged&&(t.pos=n.changes.mapPos(t.pos),r=r.map(n.changes))},get(n,o,l){let a=i.posAndSideAtCoords({x:n.clientX,y:n.clientY},!1),h,c=Ic(i,a.pos,a.assoc,s);if(t.pos!=a.pos&&!o){let u=Ic(i,t.pos,t.assoc,s),f=Math.min(u.from,c.from),p=Math.max(u.to,c.to);c=f<c.from?N.range(f,p):N.range(p,f)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&s==1&&r.ranges.length>1&&(h=gw(r,a.pos))?h:l?r.addRange(c):N.create([c])}}}function gw(i,e){for(let t=0;t<i.ranges.length;t++){let{from:s,to:r}=i.ranges[t];if(s<=e&&r>=e)return N.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}Vt.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let r=i.docView.tile.nearest(e.target);if(r&&r.isWidget()){let n=r.posAtStart,o=n+r.length;(n>=t.to||o<=t.from)&&(t=N.range(n,o))}}let{inputState:s}=i;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Do(i.state,oh,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vt.dragend=i=>(i.inputState.draggedContent=null,!1);function Hc(i,e,t,s){if(t=Do(i.state,nh,t),!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:n}=i.inputState,o=s&&n&&hw(i,e)?{from:n.from,to:n.to}:null,l={from:r,insert:t},a=i.state.changes(o?[o,l]:l);i.focus(),i.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),i.inputState.draggedContent=null}Vt.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),r=0,n=()=>{++r==t.length&&Hc(i,e,s.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=n,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(s[o]=l.result),n()},l.readAsText(t[o])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return Hc(i,e,s,!0),!0}return!1};Vt.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=sp?null:e.clipboardData;return t?(rp(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(dw(i),!1)};function mw(i,e){let t=i.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),i.focus()},50)}function yw(i){let e=[],t=[],s=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:n}of i.selection.ranges){let o=i.doc.lineAt(n);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}s=!0}return{text:Do(i,oh,e.join(i.lineBreak)),ranges:t,linewise:s}}let la=null;Vt.copy=Vt.cut=(i,e)=>{let{text:t,ranges:s,linewise:r}=yw(i.state);if(!t&&!r)return!1;la=r?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let n=sp?null:e.clipboardData;return n?(n.clearData(),n.setData("text/plain",t),!0):(mw(i,t),!1)};const op=Ks.define();function lp(i,e){let t=[];for(let s of i.facet(Nf)){let r=s(i,e);r&&t.push(r)}return t.length?i.update({effects:t,annotations:op.of(!0)}):null}function ap(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=lp(i.state,e);t?i.dispatch(t):i.update([])}},10)}_t.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),ap(i)};_t.blur=i=>{i.observer.clearSelectionRange(),ap(i)};_t.compositionstart=_t.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};_t.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,X.chrome&&X.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};_t.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Vt.beforeinput=(i,e)=>{var t,s;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(i.inputState.insertingText=e.data,i.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&i.observer.editContext){let n=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(n&&o.length){let l=o[0],a=i.posAtDOM(l.startContainer,l.startOffset),h=i.posAtDOM(l.endContainer,l.endOffset);return ah(i,{from:a,to:h,insert:i.state.toText(n)},null),!0}}let r;if(X.chrome&&X.android&&(r=tp.find(n=>n.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let n=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return X.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),X.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>_t.compositionend(i,e),20),!1};const jc=new Set;function bw(i){jc.has(i)||(jc.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const Wc=["pre-wrap","normal","pre-line","break-spaces"];let Ws=!1;function zc(){Ws=!1}class xw{constructor(e){this.lineWrapping=e,this.doc=ue.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Wc.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let r=e[s];r<0?s++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,s,r,n,o){let l=Wc.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=s,this.textHeight=r,this.lineLength=n,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class vw{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class $t{constructor(e,t,s,r,n){this.from=e,this.length=t,this.top=s,this.height=r,this._content=n}get type(){return typeof this._content=="number"?pt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof fs?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $t(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ae=(function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i})(Ae||(Ae={}));const Pn=.001;class ht{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Pn&&(Ws=!0),this.height=e)}replace(e,t,s){return ht.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,r){let n=this,o=s.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=r[l],f=n.lineAt(a,Ae.ByPosNoHeight,s.setDoc(t),0,0),p=f.to>=h?f:n.lineAt(h,Ae.ByPosNoHeight,s,0,0);for(u+=p.to-h,h=p.to;l>0&&f.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<f.from&&(f=n.lineAt(a,Ae.ByPosNoHeight,s,0,0));c+=f.from-a,a=f.from;let g=hh.build(s.setDoc(o),e,c,u);n=Jn(n,n.replace(a,h,g))}return n.updateHeight(s,0)}static empty(){return new vt(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,r=0,n=0;for(;;)if(t==s)if(r>n*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),s+=1+l.break,r-=l.size}else if(n>r*2){let l=e[s];l.break?e.splice(s,1,l.left,null,l.right):e.splice(s,1,l.left,l.right),s+=2+l.break,n-=l.size}else break;else if(r<n){let l=e[t++];l&&(r+=l.size)}else{let l=e[--s];l&&(n+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,s++),new ww(ht.of(e.slice(0,t)),o,ht.of(e.slice(s)))}}function Jn(i,e){return i==e?i:(i.constructor!=e.constructor&&(Ws=!0),e)}ht.prototype.size=1;const kw=He.replace({});class hp extends ht{constructor(e,t,s){super(e,t),this.deco=s,this.spaceAbove=0}mainBlock(e,t){return new $t(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,s,r){return this.spaceAbove&&e<s+this.spaceAbove?new $t(r,0,s,this.spaceAbove,kw):this.mainBlock(s,r)}lineAt(e,t,s,r,n){let o=this.mainBlock(r,n);return this.spaceAbove?this.blockAt(0,s,r,n).join(o):o}forEachLine(e,t,s,r,n,o){e<=n+this.length&&t>=n&&o(this.lineAt(0,Ae.ByPos,s,r,n))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,s=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class vt extends hp{constructor(e,t,s){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=s}mainBlock(e,t){return new $t(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,s){let r=s[0];return s.length==1&&(r instanceof vt||r instanceof We&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof We?r=new vt(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):ht.of(s)}updateHeight(e,t=0,s=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(s||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class We extends ht{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,n=r-s+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*n);o=a/n,this.length>n+1&&(l=(this.height-a)/(this.length-n-1))}else o=this.height/n;return{firstLine:s,lastLine:r,perLine:o,perChar:l}}blockAt(e,t,s,r){let{firstLine:n,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),c=t.doc.lineAt(h),u=l+c.length*a,f=Math.max(s,e-u/2);return new $t(c.from,c.length,f,u,0)}else{let h=Math.max(0,Math.min(o-n,Math.floor((e-s)/l))),{from:c,length:u}=t.doc.line(n+h);return new $t(c,u,s+l*h,l,0)}}lineAt(e,t,s,r,n){if(t==Ae.ByHeight)return this.blockAt(e,s,r,n);if(t==Ae.ByPosNoHeight){let{from:p,to:g}=s.doc.lineAt(e);return new $t(p,g-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(s,n),h=s.doc.lineAt(e),c=l+h.length*a,u=h.number-o,f=r+l*u+a*(h.from-n-u);return new $t(h.from,h.length,Math.max(r,Math.min(f,r+this.height-c)),c,0)}forEachLine(e,t,s,r,n,o){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(s,n);for(let c=e,u=r;c<=t;){let f=s.doc.lineAt(c);if(c==e){let g=f.number-l;u+=a*g+h*(e-n-g)}let p=a+h*f.length;o(new $t(f.from,f.length,u,p,0)),u+=p,c=f.to+1}}replace(e,t,s){let r=this.length-t;if(r>0){let n=s[s.length-1];n instanceof We?s[s.length-1]=new We(n.length+r):s.push(null,new We(r-1))}if(e>0){let n=s[0];n instanceof We?s[0]=new We(e+n.length):s.unshift(new We(e-1),null)}return ht.of(s)}decomposeLeft(e,t){t.push(new We(e-1),null)}decomposeRight(e,t){t.push(null,new We(this.length-e-1))}updateHeight(e,t=0,s=!1,r){let n=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1;for(r.from>t&&o.push(new We(r.from-t-1).updateHeight(e,t));l<=n&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let u=r.heights[r.index++],f=0;u<0&&(f=-u,u=r.heights[r.index++]),a==-1?a=u:Math.abs(u-a)>=Pn&&(a=-2);let p=new vt(c,u,f);p.outdated=!1,o.push(p),l+=c+1}l<=n&&o.push(null,new We(n-l).updateHeight(e,l));let h=ht.of(o);return(a<0||Math.abs(h.height-this.height)>=Pn||Math.abs(a-this.heightMetrics(e,t).perLine)>=Pn)&&(Ws=!0),Jn(this,h)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ww extends ht{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,r){let n=s+this.left.height;return e<n?this.left.blockAt(e,t,s,r):this.right.blockAt(e,t,n,r+this.left.length+this.break)}lineAt(e,t,s,r,n){let o=r+this.left.height,l=n+this.left.length+this.break,a=t==Ae.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,s,r,n):this.right.lineAt(e,t,s,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==Ae.ByPosNoHeight?Ae.ByPosNoHeight:Ae.ByPos;return a?h.join(this.right.lineAt(l,c,s,o,l)):this.left.lineAt(l,c,s,r,n).join(h)}forEachLine(e,t,s,r,n,o){let l=r+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,s,r,n,o),t>=a&&this.right.forEachLine(e,t,s,l,a,o);else{let h=this.lineAt(a,Ae.ByPos,s,r,n);e<h.from&&this.left.forEachLine(e,h.from-1,s,r,n,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,s,l,a,o)}}replace(e,t,s){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,s));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let l of s)n.push(l);if(e>0&&Qc(n,o-1),t<this.length){let l=n.length;this.decomposeRight(t,n),Qc(n,l)}return ht.of(n)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,r=s+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ht.of(this.break?[e,null,t]:[e,t]):(this.left=Jn(this.left,e),this.right=Jn(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,r){let{left:n,right:o}=this,l=t+n.length+this.break,a=null;return r&&r.from<=t+n.length&&r.more?a=n=n.updateHeight(e,t,s,r):n.updateHeight(e,t,s),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,s,r):o.updateHeight(e,l,s),a?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Qc(i,e){let t,s;i[e]==null&&(t=i[e-1])instanceof We&&(s=i[e+1])instanceof We&&i.splice(e-1,3,new We(t.length+1+s.length))}const Sw=5;class hh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof vt?r.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new vt(s-this.pos,-1,0)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let r=s.widget?s.widget.estimatedHeight:0,n=s.widget?s.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;s.block?this.addBlock(new hp(o,r,s)):(o||n||r>=Sw)&&this.addLineDeco(r,n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new vt(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let s=new We(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof vt)return e;let t=new vt(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let r=this.ensureLine();r.length+=s,r.collapsed+=s,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof vt)&&!this.isCovered?this.nodes.push(new vt(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let r of this.nodes)r instanceof vt&&r.updateHeight(this.oracle,s),s+=r?r.length:1;return this.nodes}static build(e,t,s,r){let n=new hh(s,e);return ce.spans(t,s,r,n,0),n.finish(s)}}function Cw(i,e,t){let s=new Ow;return ce.compare(i,e,t,s,0),s.changes}class Ow{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,r){(e<t||s&&s.heightRelevant||r&&r.heightRelevant)&&Es(e,t,this.changes,5)}}function Aw(i,e){let t=i.getBoundingClientRect(),s=i.ownerDocument,r=s.defaultView||window,n=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let h=i.parentNode;h&&h!=s.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let f=c.getBoundingClientRect();n=Math.max(n,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(h==i.parentNode?r.innerHeight:a,f.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:n-t.left,right:Math.max(n,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function Mw(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Pw(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class nl{constructor(e,t,s,r){this.from=e,this.to=t,this.size=s,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let r=e[s],n=t[s];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(e,t){return He.replace({widget:new Tw(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Tw extends Po{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Uc{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=qc,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Re.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(lh).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new xw(t),this.stateDeco=e.facet(Ir).filter(s=>typeof s!="function"),this.heightMap=ht.empty().applyChanges(this.stateDeco,ue.empty,this.heightOracle.setDoc(e.doc),[new At(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=He.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let r=s?t.head:t.anchor;if(!e.some(({from:n,to:o})=>r>=n&&r<=o)){let{from:n,to:o}=this.lineBlockAt(r);e.push(new an(n,o))}}return this.viewports=e.sort((s,r)=>s.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?qc:new ch(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ar(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(Ir).filter(c=>typeof c!="function");let r=e.changedRanges,n=At.extendWithRanges(r,Cw(s,this.stateDeco,e?e.changes:Fe.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);zc(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=o||Ws)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(k2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),r=this.heightOracle,n=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Re.RTL:Re.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:S,scaleY:$}=Sf(t,l);(S>.005&&Math.abs(this.scaleX-S)>.005||$>.005&&Math.abs(this.scaleY-$)>.005)&&(this.scaleX=S,this.scaleY=$,h|=16,o=a=!0)}let u=(parseInt(s.paddingTop)||0)*this.scaleY,f=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Of(e.scrollDOM);let g=(this.printing?Pw:Aw)(t,this.paddingTop),y=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!Mw(e.dom))return 0;let k=l.width;if((this.contentDOMWidth!=k||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(k-this.contentDOMWidth)>r.charWidth){let{lineHeight:$,charWidth:P,textHeight:v}=e.docView.measureTextSize();o=$>0&&r.refresh(n,$,P,v,Math.max(5,k/P),S),o&&(e.docView.minWidth=0,h|=16)}y>0&&x>0?c=Math.max(y,x):y<0&&x<0&&(c=Math.min(y,x)),zc();for(let $ of this.viewports){let P=$.from==this.viewport.from?S:e.docView.measureVisibleLineHeights($);this.heightMap=(o?ht.empty().applyChanges(this.stateDeco,ue.empty,this.heightOracle,[new At(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new vw($.from,P))}Ws&&(h|=2)}let C=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return C&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||C)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,n=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new an(r.lineAt(o-s*1e3,Ae.ByHeight,n,0,0).from,r.lineAt(l+(1-s)*1e3,Ae.ByHeight,n,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(h,Ae.ByPos,n,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?f=u.top:f=u.bottom-c,a=new an(r.lineAt(f-1e3/2,Ae.ByHeight,n,0,0).from,r.lineAt(f+c+1e3/2,Ae.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let s=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new an(this.heightMap.lineAt(s,Ae.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ae.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ae.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,Ae.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||n>=l+Math.max(10,Math.min(s,250)))&&r>o-2*1e3&&n<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let r of e)t.touchesRange(r.from,r.to)||s.push(new nl(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,r=s?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=Re.LTR&&!s)return[];let l=[],a=(c,u,f,p)=>{if(u-c<n)return;let g=this.state.selection.main,y=[g.from];g.empty||y.push(g.to);for(let m of y)if(m>c&&m<u){a(c,m-10,f,p),a(m+10,u,f,p);return}let x=Dw(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<n&&Math.abs(m.to-u)<n&&!y.some(k=>m.from<k&&m.to>k));if(!x){if(u<f.to&&t&&s&&t.visibleRanges.some(C=>C.from<=u&&C.to>=u)){let C=t.moveToLineBoundary(N.cursor(u),!1,!0).head;C>c&&(u=C)}let m=this.gapSize(f,c,u,p),k=s||m<2e6?m:2e6;x=new nl(c,u,m,k)}l.push(x)},h=c=>{if(c.length<o||c.type!=pt.Text)return;let u=_w(c.from,c.to,this.stateDeco);if(u.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(s){let y=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,m;if(f!=null){let k=cn(u,f),C=((this.visibleBottom-this.visibleTop)/2+y)/c.height;x=k-C,m=k+C}else x=(this.visibleTop-c.top-y)/c.height,m=(this.visibleBottom-c.top+y)/c.height;p=hn(u,x),g=hn(u,m)}else{let y=u.total*this.heightOracle.charWidth,x=r*this.heightOracle.charWidth,m=0;if(y>2e6)for(let P of e)P.from>=c.from&&P.from<c.to&&P.size!=P.displaySize&&P.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=P.size-P.displaySize);let k=this.pixelViewport.left+m,C=this.pixelViewport.right+m,S,$;if(f!=null){let P=cn(u,f),v=((C-k)/2+x)/y;S=P-v,$=P+v}else S=(k-x)/y,$=(C+x)/y;p=hn(u,S),g=hn(u,$)}p>c.from&&a(c.from,p,c,u),g<c.to&&a(g,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return l}gapSize(e,t,s,r){let n=cn(r,s)-cn(r,t);return this.heightOracle.lineWrapping?e.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(e){nl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=He.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];ce.spans(t,this.viewport.from,this.viewport.to,{span(n,o){s.push({from:n,to:o})},point(){}},20);let r=0;if(s.length!=this.visibleRanges.length)r=12;else for(let n=0;n<s.length&&!(r&8);n++){let o=this.visibleRanges[n],l=s[n];(o.from!=l.from||o.to!=l.to)&&(r|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(r|=8))}return this.visibleRanges=s,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ar(this.heightMap.lineAt(e,Ae.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||ar(this.heightMap.lineAt(this.scaler.fromDOM(e),Ae.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return ar(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class an{constructor(e,t){this.from=e,this.to=t}}function _w(i,e,t){let s=[],r=i,n=0;return ce.spans(t,i,e,{span(){},point(o,l){o>r&&(s.push({from:r,to:o}),n+=o-r),r=l}},20),r<e&&(s.push({from:r,to:e}),n+=e-r),{total:n,ranges:s}}function hn({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(i*t);for(let r=0;;r++){let{from:n,to:o}=e[r],l=o-n;if(s<=l)return n+s;s-=l}}function cn(i,e){let t=0;for(let{from:s,to:r}of i.ranges){if(e<=r){t+=e-s;break}t+=r-s}return t/i.total}function Dw(i,e){for(let t of i)if(e(t))return t}const qc={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class ch{constructor(e,t,s){let r=0,n=0,o=0;this.viewports=s.map(({from:l,to:a})=>{let h=t.lineAt(l,Ae.ByPos,e,0,0).top,c=t.lineAt(a,Ae.ByPos,e,0,0).bottom;return r+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-n)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),n=l.bottom}toDOM(e){for(let t=0,s=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return r+(e-s)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);s=n.bottom,r=n.domBottom}}fromDOM(e){for(let t=0,s=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return s+(e-r)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);s=n.bottom,r=n.domBottom}}eq(e){return e instanceof ch?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function ar(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),s=e.toDOM(i.bottom);return new $t(i.from,i.length,t,s-t,Array.isArray(i._content)?i._content.map(r=>ar(r,e)):i._content)}const un=J.define({combine:i=>i.join(" ")}),aa=J.define({combine:i=>i.indexOf(!0)>-1}),ha=ji.newName(),cp=ji.newName(),up=ji.newName(),dp={"&light":"."+cp,"&dark":"."+up};function ca(i,e,t){return new ji(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+s}})}const Bw=ca("."+ha,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dp),$w={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ol=X.ie&&X.ie_version<=11;class Ew{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new h2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(X.ie&&X.ie_version<=11||X.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&X.android&&e.constructor.EDIT_CONTEXT!==!1&&!(X.chrome&&X.chrome_version<126)&&(this.editContext=new Lw(e),e.state.facet(gi)&&(e.contentDOM.editContext=this.editContext.editContext)),ol&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,r=this.selectionRange;if(s.state.facet(gi)?s.root.activeElement!=this.dom:!An(this.dom,r))return;let n=r.anchorNode&&s.docView.tile.nearest(r.anchorNode);if(n&&n.isWidget()&&n.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(X.ie&&X.ie_version<=11||X.android&&X.chrome)&&!s.state.selection.main.empty&&r.focusNode&&yr(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Rr(e.root);if(!t)return!1;let s=X.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Rw(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let r=An(this.dom,s);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&u2(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$w),ol&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ol&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let r=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=n.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&n.force&&Rs(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,r=!1;for(let n of e){let o=this.readMutation(n);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:s}=o:(t=Math.min(o.from,t),s=Math.max(o.to,s)))}return{from:t,to:s,typeOver:r}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),r=this.selectionChanged&&An(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new Z2(this.view,e,t,s);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,r=Zf(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let s=Kc(t,e.previousSibling||e.target.previousSibling,-1),r=Kc(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(gi)!=e.state.facet(gi)&&(e.view.contentDOM.editContext=e.state.facet(gi)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Kc(i,e,t){for(;e;){let s=Ne.get(e);if(s&&s.parent==i)return s;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function Xc(i,e){let t=e.startContainer,s=e.startOffset,r=e.endContainer,n=e.endOffset,o=i.docView.domAtPos(i.state.selection.main.anchor,1);return yr(o.node,o.offset,r,n)&&([t,s,r,n]=[r,n,t,s]),{anchorNode:t,anchorOffset:s,focusNode:r,focusOffset:n}}function Rw(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return Xc(i,r)}let t=null;function s(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",s,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",s,!0),t?Xc(i,t):null}class Lw{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let r=e.state.selection.main,{anchor:n,head:o}=r,l=this.toEditorPos(s.updateRangeStart),a=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:l,drifted:!1});let h=a-l>s.text.length;l==this.from&&n<this.from?l=n:a==this.to&&n>this.to&&(a=n);let c=ep(e.state.sliceDoc(l,a),s.text,(h?r.from:r.to)-l,h?"end":null);if(!c){let f=N.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));f.main.eq(r)||e.dispatch({selection:f,userEvent:"select"});return}let u={from:c.from+l,to:c.toA+l,insert:ue.of(s.text.slice(c.from,c.toB).split(`
`))};if((X.mac||X.android)&&u.from==o-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:l,to:a,insert:ue.of([s.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let f=this.to-this.from+(u.to-u.from+u.insert.length);ah(e,u,N.single(this.toEditorPos(s.selectionStart,f),this.toEditorPos(s.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let r=[],n=null;for(let o=this.toEditorPos(s.rangeStart),l=this.toEditorPos(s.rangeEnd);o<l;o++){let a=e.coordsForChar(o);n=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||n||new DOMRect,r.push(n)}t.updateCharacterBounds(s.rangeStart,r)},this.handlers.textformatupdate=s=>{let r=[];for(let n of s.getTextFormats()){let o=n.underlineStyle,l=n.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(n.rangeStart),h=this.toEditorPos(n.rangeEnd);if(a<h){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;r.push(He.mark({attributes:{style:c}}).range(a,h))}}}e.dispatch({effects:Hf.of(He.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let r=Rr(s.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,r=this.pendingContextChange;return e.changes.iterChanges((n,o,l,a,h)=>{if(s)return;let c=h.length-(o-n);if(r&&o>=r.to)if(r.from==n&&r.to==o&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(n+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(n<this.to){if(n<this.from||o>this.to||this.to-this.from+h.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),r&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(s,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class se{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(r=>r.forEach(n=>s(n,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||c2(e.parent)||document,this.viewState=new Uc(e.state||ge.create(e)),e.scrollTo&&e.scrollTo.is(nn)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ss).map(r=>new el(r));for(let r of this.plugins)r.update(this);this.observer=new Ew(this),this.inputState=new sw(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Bc(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ze?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,r,n=this.state;for(let f of e){if(f.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=f.state}if(this.destroyed){this.viewState.state=n;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(op))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=lp(n,o),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(c=null)):this.observer.clear(),n.facet(ge.phrases)!=this.state.facet(ge.phrases))return this.setState(n);r=Xn.create(this,n,e),r.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(u&&(u=u.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;u=new Ls(p.empty?p:N.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(nn)&&(u=p.value.clip(this.state))}this.viewState.update(r,u),this.bidiCache=Zn.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(or)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(un)!=r.state.facet(un)&&(this.viewState.mustMeasureContent=!0),(t||s||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(ra))try{f(r)}catch(p){si(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Zf(this,c)&&h.force&&Rs(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new Uc(e),this.plugins=e.facet(Ss).map(s=>new el(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new Bc(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ss),s=e.state.facet(Ss);if(t!=s){let r=[];for(let n of s){let o=t.indexOf(n);if(o<0)r.push(new el(n));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){si(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,r=s.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Of(s))n=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);n=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(p=>{try{return p.read(this)}catch(g){return si(this.state,g),Gc}}),u=Xn.create(this,this.state,[]),f=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),f=this.docView.update(u),f&&this.docViewUpdate());for(let p=0;p<h.length;p++)if(c[p]!=Gc)try{let g=h[p];g.write&&g.write(c[p],this)}catch(g){si(this.state,g)}if(f&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-o;if(g>1||g<-1){r=r+g,s.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(ra))l(t)}get themeClasses(){return ha+" "+(this.state.facet(aa)?up:cp)+" "+this.state.facet(un)}updateAttrs(){let e=Yc(this,jf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(gi)?"true":"false",class:"cm-content",style:`${X.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Yc(this,lh,t);let s=this.observer.ignore(()=>{let r=Ac(this.contentDOM,this.contentAttrs,t),n=Ac(this.dom,this.editorAttrs,e);return r||n});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let r of s.effects)if(r.is(se.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(or);let e=this.state.facet(se.cspNonce);ji.mount(this.root,this.styleModules.concat(Bw).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return rl(this,e,$c(this,e,t,s))}moveByGroup(e,t){return rl(this,e,$c(this,e,t,s=>K2(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),r=this.textDirectionAt(e.from),n=s[t?s.length-1:0];return N.cursor(n.side(t,r)+e.from,n.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,s=!0){return q2(this,e,t,s)}moveVertically(e,t,s){return rl(this,e,X2(this,e,t,s))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let s=oa(this,e,t);return s&&s.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),oa(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let r=this.state.doc.lineAt(e),n=this.bidiSpans(r),o=n[yi.find(n,e-r.from,-1,t)];return Kn(s,o.dir==Re.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Vf)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Iw)return Df(e.length);let t=this.textDirectionAt(e.from),s;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||_f(n.isolates,s=Tc(this,e))))return n.order;s||(s=Tc(this,e));let r=b2(e.text,t,s);return this.bidiCache.push(new Zn(e.from,e.to,t,s,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||X.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Cf(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return nn.of(new Ls(typeof e=="number"?N.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return nn.of(new Ls(N.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Qi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Qi.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=ji.newName(),r=[un.of(s),or.of(ca(`.${s}`,e))];return t&&t.dark&&r.push(aa.of(!0)),r}static baseTheme(e){return Za.lowest(or.of(ca("."+ha,e,dp)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),r=s&&Ne.get(s)||Ne.get(e);return((t=r?.root)===null||t===void 0?void 0:t.view)||null}}se.styleModule=or;se.inputHandler=If;se.clipboardInputFilter=nh;se.clipboardOutputFilter=oh;se.scrollHandler=Ff;se.focusChangeEffect=Nf;se.perLineTextDirection=Vf;se.exceptionSink=Lf;se.updateListener=ra;se.editable=gi;se.mouseSelectionStyle=Rf;se.dragMovesSelection=Ef;se.clickAddsSelectionRange=$f;se.decorations=Ir;se.blockWrappers=Wf;se.outerDecorations=zf;se.atomicRanges=Kr;se.bidiIsolatedRanges=Qf;se.scrollMargins=Uf;se.darkTheme=aa;se.cspNonce=J.define({combine:i=>i.length?i[0]:""});se.contentAttributes=lh;se.editorAttributes=jf;se.lineWrapping=se.contentAttributes.of({class:"cm-lineWrapping"});se.announce=Ve.define();const Iw=4096,Gc={};class Zn{constructor(e,t,s,r,n,o){this.from=e,this.to=t,this.dir=s,this.isolates=r,this.fresh=n,this.order=o}static update(e,t){if(t.empty&&!e.some(n=>n.fresh))return e;let s=[],r=e.length?e[e.length-1].dir:Re.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir==r&&!t.touchesRange(o.from,o.to)&&s.push(new Zn(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return s}}function Yc(i,e,t){for(let s=i.state.facet(e),r=s.length-1;r>=0;r--){let n=s[r],o=typeof n=="function"?n(i):n;o&&ih(o,t)}return t}const Nw=X.mac?"mac":X.windows?"win":X.linux?"linux":"key";function Vw(i,e){const t=i.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let r,n,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))n=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:n=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(s="Alt-"+s),n&&(s="Ctrl-"+s),l&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function dn(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const Fw=Za.default(se.domEventHandlers({keydown(i,e){return zw(Hw(e.state),i,e,"editor")}})),fp=J.define({enables:Fw}),Jc=new WeakMap;function Hw(i){let e=i.facet(fp),t=Jc.get(e);return t||Jc.set(e,t=Ww(e.reduce((s,r)=>s.concat(r),[]))),t}let Ei=null;const jw=4e3;function Ww(i,e=Nw){let t=Object.create(null),s=Object.create(null),r=(o,l)=>{let a=s[o];if(a==null)s[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},n=(o,l,a,h,c)=>{var u,f;let p=t[o]||(t[o]=Object.create(null)),g=l.split(/ (?!$)/).map(m=>Vw(m,e));for(let m=1;m<g.length;m++){let k=g.slice(0,m).join(" ");r(k,!0),p[k]||(p[k]={preventDefault:!0,stopPropagation:!1,run:[C=>{let S=Ei={view:C,prefix:k,scope:o};return setTimeout(()=>{Ei==S&&(Ei=null)},jw),!0}]})}let y=g.join(" ");r(y,!1);let x=p[y]||(p[y]={preventDefault:!1,stopPropagation:!1,run:((f=(u=p._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),h&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let o of i){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let f in c)c[f].run.push(p=>u(p,ua))}let a=o[e]||o.key;if(a)for(let h of l)n(h,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&n(h,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let ua=null;function zw(i,e,t,s){ua=e;let r=t2(e),n=Lk(r,0),o=Ik(n)==r.length&&r!=" ",l="",a=!1,h=!1,c=!1;Ei&&Ei.view==t&&Ei.scope==s&&(l=Ei.prefix+" ",ip.indexOf(e.keyCode)<0&&(h=!0,Ei=null));let u=new Set,f=x=>{if(x){for(let m of x.run)if(!u.has(m)&&(u.add(m),m(t)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),h=!0)}return!1},p=i[s],g,y;return p&&(f(p[l+dn(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(X.windows&&e.ctrlKey&&e.altKey)&&!(X.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=Wi[e.keyCode])&&g!=r?(f(p[l+dn(g,e,!0)])||e.shiftKey&&(y=$r[e.keyCode])!=r&&y!=g&&f(p[l+dn(y,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[l+dn(r,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),h&&(a=!0),a&&c&&e.stopPropagation(),ua=null,a}class gs extends ds{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}gs.prototype.elementClass="";gs.prototype.toDOM=void 0;gs.prototype.mapMode=wt.TrackBefore;gs.prototype.startSide=gs.prototype.endSide=-1;gs.prototype.point=!0;const ll=J.define(),Qw=J.define(),Tn=J.define(),Zc=J.define({combine:i=>i.some(e=>e)});function Uw(i){return[qw]}const qw=Qi.fromClass(class{constructor(i){this.view=i,this.domAfter=null,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(Tn).map(e=>new tu(i,e)),this.fixed=!i.state.facet(Zc);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(i.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Zc)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=ce.iter(this.view.state.facet(ll),this.view.viewport.from),s=[],r=this.gutters.map(n=>new Kw(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(n.type)){let o=!0;for(let l of n.type)if(l.type==pt.Text&&o){da(t,s,l.from);for(let a of r)a.line(this.view,l,s);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(n.type==pt.Text){da(t,s,n.from);for(let o of r)o.line(this.view,n,s)}else if(n.widget)for(let o of r)o.widget(this.view,n);for(let n of r)n.finish();i&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(i){let e=i.startState.facet(Tn),t=i.state.facet(Tn),s=i.docChanged||i.heightChanged||i.viewportChanged||!ce.eq(i.startState.facet(ll),i.state.facet(ll),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(s=!0);else{s=!0;let r=[];for(let n of t){let o=e.indexOf(n);o<0?r.push(new tu(this.view,n)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let n of this.gutters)n.dom.remove(),r.indexOf(n)<0&&n.destroy();for(let n of r)n.config.side=="after"?this.getDOMAfter().appendChild(n.dom):this.dom.appendChild(n.dom);this.gutters=r}return s}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:i=>se.scrollMargins.of(e=>{let t=e.plugin(i);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Re.LTR?{left:s,right:r}:{right:s,left:r}})});function eu(i){return Array.isArray(i)?i:[i]}function da(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class Kw{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=ce.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:r}=this,n=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let l=new pp(e,o,n,s);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,n,s);this.height=t.bottom,this.i++}line(e,t,s){let r=[];da(this.cursor,r,t.from),s.length&&(r=r.concat(s));let n=this.gutter.config.lineMarker(e,t,r);n&&r.unshift(n);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),r=s?[s]:null;for(let n of e.state.facet(Qw)){let o=n(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class tu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,r=>{let n=r.target,o;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let a=n.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[s](e,l,r)&&r.preventDefault()});this.markers=eu(t.markers(e)),t.initialSpacer&&(this.spacer=new pp(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=eu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let s=e.view.viewport;return!ce.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class pp{constructor(e,t,s,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,r)}update(e,t,s,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),Xw(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let s="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let l=o,a=n<t.length?t[n++]:null,h=!1;if(a){let c=a.elementClass;c&&(s+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!a)break;a.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),h&&o++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function Xw(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const Gw=J.define(),Yw=J.define(),Cs=J.define({combine(i){return Xk(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let r in t){let n=s[r],o=t[r];s[r]=n?(l,a,h)=>n(l,a,h)||o(l,a,h):o}return s}})}});class al extends gs{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function hl(i,e){return i.state.facet(Cs).formatNumber(e,i.state)}const Jw=Tn.compute([Cs],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Gw)},lineMarker(e,t,s){return s.some(r=>r.toDOM)?null:new al(hl(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let r of e.state.facet(Yw)){let n=r(e,t,s);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(Cs)!=e.state.facet(Cs),initialSpacer(e){return new al(hl(e,iu(e.state.doc.lines)))},updateSpacer(e,t){let s=hl(t.view,iu(t.view.state.doc.lines));return s==e.number?e:new al(s)},domEventHandlers:i.facet(Cs).domEventHandlers,side:"before"}));function Zw(i={}){return[Cs.of(i),Uw(),Jw]}function iu(i){let e=9;for(;e<i;)e=e*10+9;return e}const gp=1024;let eS=0;class cl{constructor(e,t){this.from=e,this.to=t}}class le{constructor(e={}){this.id=eS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gt.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}le.closedBy=new le({deserialize:i=>i.split(" ")});le.openedBy=new le({deserialize:i=>i.split(" ")});le.group=new le({deserialize:i=>i.split(" ")});le.isolate=new le({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});le.contextHash=new le({perNode:!0});le.lookAhead=new le({perNode:!0});le.mounted=new le({perNode:!0});class xr{constructor(e,t,s,r=!1){this.tree=e,this.overlay=t,this.parser=s,this.bracketed=r}static get(e){return e&&e.props&&e.props[le.mounted.id]}}const tS=Object.create(null);class gt{constructor(e,t,s,r=0){this.name=e,this.props=t,this.id=s,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):tS,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new gt(e.name||"",t,e.id,s);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(le.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let r of s.split(" "))t[r]=e[s];return s=>{for(let r=s.prop(le.group),n=-1;n<(r?r.length:0);n++){let o=t[n<0?s.name:r[n]];if(o)return o}}}}gt.none=new gt("",Object.create(null),0,8);class uh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let r=null;for(let n of e){let o=n(s);if(o){r||(r=Object.assign({},s.props));let l=o[1],a=o[0];a.combine&&a.id in r&&(l=a.combine(r[a.id],l)),r[a.id]=l}}t.push(r?new gt(s.name,r,s.id,s.flags):s)}return new uh(t)}}const fn=new WeakMap,su=new WeakMap;var $e;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays",i[i.EnterBracketed=16]="EnterBracketed"})($e||($e={}));class Le{constructor(e,t,s,r,n){if(this.type=e,this.children=t,this.positions=s,this.length=r,this.props=null,n&&n.length){this.props=Object.create(null);for(let[o,l]of n)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=xr.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let r=s.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new pa(this.topNode,e)}cursorAt(e,t=0,s=0){let r=fn.get(this)||this.topNode,n=new pa(r);return n.moveTo(e,t),fn.set(this,n._tree),n}get topNode(){return new Tt(this,0,0,null)}resolve(e,t=0){let s=Nr(fn.get(this)||this.topNode,e,t,!1);return fn.set(this,s),s}resolveInner(e,t=0){let s=Nr(su.get(this)||this.topNode,e,t,!0);return su.set(this,s),s}resolveStack(e,t=0){return rS(this,e,t)}iterate(e){let{enter:t,leave:s,from:r=0,to:n=this.length}=e,o=e.mode||0,l=(o&$e.IncludeAnonymous)>0;for(let a=this.cursor(o|$e.IncludeAnonymous);;){let h=!1;if(a.from<=n&&a.to>=r&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&s&&(l||!a.type.isAnonymous)&&s(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ph(gt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,r)=>new Le(this.type,t,s,r,this.propValues),e.makeTree||((t,s,r)=>new Le(gt.none,t,s,r)))}static build(e){return nS(e)}}Le.empty=new Le(gt.none,[],[],0);class dh{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dh(this.buffer,this.index)}}class Ui{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return gt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],r=this.set.types[t],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),e+=4,s==e)return n;let o=[];for(;e<s;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,s,r,n){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(mp(n,r,o[a+1],o[a+2])&&(l=a,s>0));a=o[a+3]);return l}slice(e,t,s){let r=this.buffer,n=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){n[a++]=r[l++],n[a++]=r[l++]-s;let h=n[a++]=r[l++]-s;n[a++]=r[l++]-e,o=Math.max(o,h)}return new Ui(n,o,this.set)}}function mp(i,e,t,s){switch(i){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function Nr(i,e,t,s){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!s&&i instanceof Tt&&i.index<0?null:i.parent;if(!o)return i;i=o}let n=s?0:$e.IgnoreOverlays;if(s)for(let o=i,l=o.parent;l;o=l,l=o.parent)o instanceof Tt&&o.index<0&&((r=l.enter(e,t,n))===null||r===void 0?void 0:r.from)!=o.from&&(i=l);for(;;){let o=i.enter(e,t,n);if(!o)return i;i=o}}class yp{cursor(e=0){return new pa(this,e)}getChild(e,t=null,s=null){let r=ru(this,e,t,s);return r.length?r[0]:null}getChildren(e,t=null,s=null){return ru(this,e,t,s)}resolve(e,t=0){return Nr(this,e,t,!1)}resolveInner(e,t=0){return Nr(this,e,t,!0)}matchContext(e){return fa(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(s=t,t=r.prevSibling):t=r}return s}get node(){return this}get next(){return this.parent}}class Tt extends yp{constructor(e,t,s,r){super(),this._tree=e,this.from=t,this.index=s,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,r,n=0){var o;for(let l=this;;){for(let{children:a,positions:h}=l._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],f=h[e]+l.from;if(!(!(n&$e.EnterBracketed&&u instanceof Le&&((o=xr.get(u))===null||o===void 0?void 0:o.overlay)===null&&(f>=s||f+u.length<=s))&&!mp(r,s,f,f+u.length))){if(u instanceof Ui){if(n&$e.ExcludeBuffers)continue;let p=u.findChild(0,u.buffer.length,t,s-f,r);if(p>-1)return new Li(new iS(l,u,e,f),null,p)}else if(n&$e.IncludeAnonymous||!u.type.isAnonymous||fh(u)){let p;if(!(n&$e.IgnoreMounts)&&(p=xr.get(u))&&!p.overlay)return new Tt(p.tree,f,e,l);let g=new Tt(u,f,e,l);return n&$e.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?u.children.length-1:0,t,s,r,n)}}}if(n&$e.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,s=0){let r;if(!(s&$e.IgnoreOverlays)&&(r=xr.get(this._tree))&&r.overlay){let n=e-this.from,o=s&$e.EnterBracketed&&r.bracketed;for(let{from:l,to:a}of r.overlay)if((t>0||o?l<=n:l<n)&&(t<0||o?a>=n:a>n))return new Tt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function ru(i,e,t,s){let r=i.cursor(),n=[];if(!r.firstChild())return n;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return n}for(;;){if(s!=null&&r.type.is(s))return n;if(r.type.is(e)&&n.push(r.node),!r.nextSibling())return s==null?n:[]}}function fa(i,e,t=e.length-1){for(let s=i;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class iS{constructor(e,t,s,r){this.parent=e,this.buffer=t,this.index=s,this.start=r}}class Li extends yp{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,s);return n<0?null:new Li(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,s=0){if(s&$e.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Li(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Li(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Li(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,r=this.index+4,n=s.buffer[this.index+3];if(n>r){let o=s.buffer[this.index+1];e.push(s.slice(r,n,o)),t.push(0)}return new Le(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function bp(i){if(!i.length)return null;let e=0,t=i[0];for(let n=1;n<i.length;n++){let o=i[n];(o.from>t.from||o.to<t.to)&&(t=o,e=n)}let s=t instanceof Tt&&t.index<0?null:t.parent,r=i.slice();return s?r[e]=s:r.splice(e,1),new sS(r,t)}class sS{constructor(e,t){this.heads=e,this.node=t}get next(){return bp(this.heads)}}function rS(i,e,t){let s=i.resolveInner(e,t),r=null;for(let n=s instanceof Tt?s:s.context.parent;n;n=n.parent)if(n.index<0){let o=n.parent;(r||(r=[s])).push(o.resolve(e,t)),n=o}else{let o=xr.get(n.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Tt(o.tree,o.overlay[0].from+n.from,-1,n);(r||(r=[s])).push(Nr(l,e,t,!1))}}return r?bp(r):s}class pa{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~$e.EnterBracketed,e instanceof Tt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=s+r.buffer[e+1],this.to=s+r.buffer[e+2],!0}yield(e){return e?e instanceof Tt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,s);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&$e.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$e.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$e.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let r=s<0?0:this.stack[s]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(r)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(r.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:s}=r)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let n=t+e,o=e<0?-1:s._tree.children.length;n!=o;n+=e){let l=s._tree.children[n];if(this.mode&$e.IncludeAnonymous||l instanceof Ui||!l.type.isAnonymous||fh(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,s=n+1;break e}r=this.stack[--n]}for(let r=s;r<this.stack.length;r++)t=new Li(this.buffer,t,this.stack[r]);return this.bufferNode=new Li(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,r=!0}}}matchContext(e){if(!this.buffer)return fa(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let r=e.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return fa(this._tree,e,r);let o=s[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function fh(i){return i.children.some(e=>e instanceof Ui||!e.type.isAnonymous||fh(e))}function nS(i){var e;let{buffer:t,nodeSet:s,maxBufferLength:r=gp,reused:n=[],minRepeatType:o=s.types.length}=i,l=Array.isArray(t)?new dh(t,t.length):t,a=s.types,h=0,c=0;function u($,P,v,T,W,K){let{id:G,start:_,end:te,size:ne}=l,ve=c,ke=h;if(ne<0)if(l.next(),ne==-1){let je=n[G];v.push(je),T.push(_-$);return}else if(ne==-3){h=G;return}else if(ne==-4){c=G;return}else throw new RangeError(`Unrecognized record size: ${ne}`);let ye=a[G],de,st,Ki=_-$;if(te-_<=r&&(st=x(l.pos-P,W))){let je=new Uint16Array(st.size-st.skip),De=l.pos-st.size,mt=je.length;for(;l.pos>De;)mt=m(st.start,je,mt);de=new Ui(je,te-st.start,s),Ki=st.start-$}else{let je=l.pos-ne;l.next();let De=[],mt=[],oi=G>=o?G:-1,Ai=0,Wt=te;for(;l.pos>je;)oi>=0&&l.id==oi&&l.size>=0?(l.end<=Wt-r&&(g(De,mt,_,Ai,l.end,Wt,oi,ve,ke),Ai=De.length,Wt=l.end),l.next()):K>2500?f(_,je,De,mt):u(_,je,De,mt,oi,K+1);if(oi>=0&&Ai>0&&Ai<De.length&&g(De,mt,_,Ai,_,Wt,oi,ve,ke),De.reverse(),mt.reverse(),oi>-1&&Ai>0){let Xi=p(ye,ke);de=ph(ye,De,mt,0,De.length,0,te-_,Xi,Xi)}else de=y(ye,De,mt,te-_,ve-te,ke)}v.push(de),T.push(Ki)}function f($,P,v,T){let W=[],K=0,G=-1;for(;l.pos>P;){let{id:_,start:te,end:ne,size:ve}=l;if(ve>4)l.next();else{if(G>-1&&te<G)break;G<0&&(G=ne-r),W.push(_,te,ne),K++,l.next()}}if(K){let _=new Uint16Array(K*4),te=W[W.length-2];for(let ne=W.length-3,ve=0;ne>=0;ne-=3)_[ve++]=W[ne],_[ve++]=W[ne+1]-te,_[ve++]=W[ne+2]-te,_[ve++]=ve;v.push(new Ui(_,W[2]-te,s)),T.push(te-$)}}function p($,P){return(v,T,W)=>{let K=0,G=v.length-1,_,te;if(G>=0&&(_=v[G])instanceof Le){if(!G&&_.type==$&&_.length==W)return _;(te=_.prop(le.lookAhead))&&(K=T[G]+_.length+te)}return y($,v,T,W,K,P)}}function g($,P,v,T,W,K,G,_,te){let ne=[],ve=[];for(;$.length>T;)ne.push($.pop()),ve.push(P.pop()+v-W);$.push(y(s.types[G],ne,ve,K-W,_-K,te)),P.push(W-v)}function y($,P,v,T,W,K,G){if(K){let _=[le.contextHash,K];G=G?[_].concat(G):[_]}if(W>25){let _=[le.lookAhead,W];G=G?[_].concat(G):[_]}return new Le($,P,v,T,G)}function x($,P){let v=l.fork(),T=0,W=0,K=0,G=v.end-r,_={size:0,start:0,skip:0};e:for(let te=v.pos-$;v.pos>te;){let ne=v.size;if(v.id==P&&ne>=0){_.size=T,_.start=W,_.skip=K,K+=4,T+=4,v.next();continue}let ve=v.pos-ne;if(ne<0||ve<te||v.start<G)break;let ke=v.id>=o?4:0,ye=v.start;for(v.next();v.pos>ve;){if(v.size<0)if(v.size==-3||v.size==-4)ke+=4;else break e;else v.id>=o&&(ke+=4);v.next()}W=ye,T+=ne,K+=ke}return(P<0||T==$)&&(_.size=T,_.start=W,_.skip=K),_.size>4?_:void 0}function m($,P,v){let{id:T,start:W,end:K,size:G}=l;if(l.next(),G>=0&&T<o){let _=v;if(G>4){let te=l.pos-(G-4);for(;l.pos>te;)v=m($,P,v)}P[--v]=_,P[--v]=K-$,P[--v]=W-$,P[--v]=T}else G==-3?h=T:G==-4&&(c=T);return v}let k=[],C=[];for(;l.pos>0;)u(i.start||0,i.bufferStart||0,k,C,-1,0);let S=(e=i.length)!==null&&e!==void 0?e:k.length?C[0]+k[0].length:0;return new Le(a[i.topID],k.reverse(),C.reverse(),S)}const nu=new WeakMap;function _n(i,e){if(!i.isAnonymous||e instanceof Ui||e.type!=i)return 1;let t=nu.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=i||!(s instanceof Le)){t=1;break}t+=_n(i,s)}nu.set(e,t)}return t}function ph(i,e,t,s,r,n,o,l,a){let h=0;for(let g=s;g<r;g++)h+=_n(i,e[g]);let c=Math.ceil(h*1.5/8),u=[],f=[];function p(g,y,x,m,k){for(let C=x;C<m;){let S=C,$=y[C],P=_n(i,g[C]);for(C++;C<m;C++){let v=_n(i,g[C]);if(P+v>=c)break;P+=v}if(C==S+1){if(P>c){let v=g[S];p(v.children,v.positions,0,v.children.length,y[S]+k);continue}u.push(g[S])}else{let v=y[C-1]+g[C-1].length-$;u.push(ph(i,g,y,S,C,$,v,null,a))}f.push($+k-n)}}return p(e,t,s,r,0),(l||a)(u,f,o)}class cs{constructor(e,t,s,r,n=!1,o=!1){this.from=e,this.to=t,this.tree=s,this.offset=r,this.open=(n?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let r=[new cs(0,e.length,e,0,!1,s)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,s=128){if(!t.length)return e;let r=[],n=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=s)for(;o&&o.from<u;){let f=o;if(a>=f.from||u<=f.to||h){let p=Math.max(f.from,a)-h,g=Math.min(f.to,u)-h;f=p>=g?null:new cs(p,g,f.tree,f.offset+h,l>0,!!c)}if(f&&r.push(f),o.to>u)break;o=n<e.length?e[n++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return r}}class xp{startParse(e,t,s){return typeof e=="string"&&(e=new oS(e)),s=s?s.length?s.map(r=>new cl(r.from,r.to)):[new cl(0,0)]:[new cl(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let r=this.startParse(e,t,s);for(;;){let n=r.advance();if(n)return n}}}class oS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new le({perNode:!0});var ou={};class eo{constructor(e,t,s,r,n,o,l,a,h,c=0,u){this.p=e,this.stack=t,this.state=s,this.reducePos=r,this.pos=n,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,s=0){let r=e.parser.context;return new eo(e,[],t,s,s,0,[],0,r?new lu(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let s=e>>19,r=e&65535,{parser:n}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),l=n.dynamicPrecedence(r);if(l&&(this.score+=l),s==0){this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(s-1)*3-(e&262144?6:0),h=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,f=this.bufferBase+this.buffer.length-u;if(r<n.minRepeatTerm||e&131072){let p=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,p,f+4,!0)}if(e&262144)this.state=this.stack[a];else{let p=this.stack[a-3];this.state=n.getGoto(p,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,s,r=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==s)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=s;return}}}if(!n||this.pos==s)this.buffer.push(e,t,s,r);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>s;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>s;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=s,this.buffer[o+3]=r}}shift(e,t,s,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,s),this.shiftContext(t,s),t<=o.maxNode&&this.buffer.push(t,s,r,4)}else this.pos=r,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,r,4)}apply(e,t,s,r){e&65536?this.reduce(e):this.shift(e,t,s,r)}useNode(e,t){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=e)&&(this.p.reused.push(e),s++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(s,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let s=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new eo(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let s=e<=this.p.parser.maxNode;s&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,s?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new lS(this);;){let s=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(s==0)return!1;if((s&65536)==0)return!0;t.reduce(s)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n=0,o;n<t.length;n+=2)(o=t[n+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[n],o);if(this.stack.length<120)for(let n=0;r.length<8&&n<t.length;n+=2){let o=t[n+1];r.some((l,a)=>a&1&&l==o)||r.push(t[n],o)}t=r}let s=[];for(let r=0;r<t.length&&s.length<4;r+=2){let n=t[r+1];if(n==this.state)continue;let o=this.split();o.pushState(n,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,s.push(o)}return s}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let s=t>>19,r=t&65535,n=this.stack.length-s*3;if(n<0||e.getGoto(this.stack[n],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],s=(r,n)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-n;if(l>1){let a=o&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],a,!1)>=0)return l<<19|65536|a}}else{let l=s(o,n+1);if(l!=null)return l}})};return s(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new lu(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lu{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class lS{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,s=e>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class to{constructor(e,t,s){this.stack=e,this.pos=t,this.index=s,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new to(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new to(this.stack,this.pos,this.index)}}function pn(i,e=Uint16Array){if(typeof i!="string")return i;let t=null;for(let s=0,r=0;s<i.length;){let n=0;for(;;){let o=i.charCodeAt(s++),l=!1;if(o==126){n=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),n+=a,l)break;n*=46}t?t[r++]=n:t=new e(n)}return t}class Dn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const au=new Dn;class aS{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=au,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let s=this.range,r=this.rangeIndex,n=this.pos+e;for(;n<s.from;){if(!r)return null;let o=this.ranges[--r];n-=s.from-o.to,s=o}for(;t<0?n>s.to:n>=s.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];n+=o.from-s.to,s=o}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,s,r;if(t>=0&&t<this.chunk.length)s=this.pos+e,r=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(s=n,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=s;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-s)),r=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),r}acceptToken(e,t=0){let s=t?this.resolveOffset(t,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=s}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=au,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let s="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(s+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return s}}class Is{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:s}=t.p;hS(this.data,e,t,this.id,s.data,s.tokenPrecTable)}}Is.prototype.contextual=Is.prototype.fallback=Is.prototype.extend=!1;Is.prototype.fallback=Is.prototype.extend=!1;class Bo{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function hS(i,e,t,s,r,n){let o=0,l=1<<s,{dialect:a}=t.p.parser;e:for(;(l&i[o])!=0;){let h=i[o+1];for(let p=o+3;p<h;p+=2)if((i[p+1]&l)>0){let g=i[p];if(a.allows(g)&&(e.token.value==-1||e.token.value==g||cS(g,e.token.value,r,n))){e.acceptToken(g);break}}let c=e.next,u=0,f=i[o+2];if(e.next<0&&f>u&&i[h+f*3-3]==65535){o=i[h+f*3-1];continue e}for(;u<f;){let p=u+f>>1,g=h+p+(p<<1),y=i[g],x=i[g+1]||65536;if(c<y)f=p;else if(c>=x)u=p+1;else{o=i[g+2],e.advance();continue e}}break}}function hu(i,e,t){for(let s=e,r;(r=i[s])!=65535;s++)if(r==t)return s-e;return-1}function cS(i,e,t,s){let r=hu(t,s,e);return r<0||hu(t,s,i)<r}const bt=typeof process<"u"&&ou&&/\bparse\b/.test(ou.LOG);let ul=null;function cu(i,e,t){let s=i.cursor($e.IncludeAnonymous);for(s.moveTo(e);;)if(!(t<0?s.childBefore(e):s.childAfter(e)))for(;;){if((t<0?s.to<e:s.from>e)&&!s.type.isError)return t<0?Math.max(0,Math.min(s.to-1,e-25)):Math.min(i.length,Math.max(s.from+1,e+25));if(t<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return t<0?0:i.length}}class uS{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cu(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let s=this.trees[t],r=this.index[t];if(r==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=s.children[r],o=this.start[t]+s.positions[r];if(o>e)return this.nextStart=o,null;if(n instanceof Le){if(o==e){if(o<this.safeFrom)return null;let l=o+n.length;if(l<=this.safeTo){let a=n.prop(le.lookAhead);if(!a||l+a<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class dS{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(s=>new Dn)}getActions(e){let t=0,s=null,{parser:r}=e.p,{tokenizers:n}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<n.length;h++){if((1<<h&o)==0)continue;let c=n[h],u=this.tokens[h];if(!(s&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(s=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!s&&e.pos==this.stream.end&&(s=new Dn,s.value=e.p.parser.eofTerm,s.start=s.end=e.pos,t=this.addActions(e,s.value,s.end,t)),this.mainToken=s,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Dn,{pos:s,p:r}=e;return t.start=s,t.end=Math.min(s+1,r.stream.end),t.value=s==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,s){let r=this.stream.clipPos(s.pos);if(t.token(this.stream.reset(r,e),s),e.value>-1){let{parser:n}=s.p;for(let o=0;o<n.specialized.length;o++)if(n.specialized[o]==e.value){let l=n.specializers[o](this.stream.read(e.start,e.end),s);if(l>=0&&s.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,s,r){for(let n=0;n<r;n+=3)if(this.actions[n]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=s,r}addActions(e,t,s,r){let{state:n}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(n,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=ui(l,h+2);else{r==0&&l[h+1]==2&&(r=this.putAction(ui(l,h+2),t,s,r));break}l[h]==t&&(r=this.putAction(ui(l,h+1),t,s,r))}return r}}class fS{constructor(e,t,s,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new aS(t,r),this.tokens=new dS(e,this.stream),this.topTerm=e.top[1];let{from:n}=r[0];this.stacks=[eo.start(this,e.top[0],n)],this.fragments=s.length&&this.stream.end-n>e.bufferLength*4?new uS(s,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,s=this.stacks=[],r,n;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)s.push(l);else{if(this.advanceStack(l,s,e))continue;{r||(r=[],n=[]),r.push(l);let a=this.tokens.getMainToken(l);n.push(a.value,a.end)}}break}}if(!s.length){let o=r&&mS(r);if(o)return bt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw bt&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,n,s);if(o)return bt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(s.length>o)for(s.sort((l,a)=>a.score-l.score);s.length>o;)s.pop();s.some(l=>l.reducePos>t)&&this.recovering--}else if(s.length>1){e:for(let o=0;o<s.length-1;o++){let l=s[o];for(let a=o+1;a<s.length;a++){let h=s[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)s.splice(a--,1);else{s.splice(o--,1);continue e}}}s.length>12&&(s.sort((o,l)=>l.score-o.score),s.splice(12,s.length-12))}this.minStackPos=s[0].pos;for(let o=1;o<s.length;o++)s[o].pos<this.minStackPos&&(this.minStackPos=s[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,s){let r=e.pos,{parser:n}=this,o=bt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?n.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!h||(u.prop(le.contextHash)||0)==c))return e.useNode(u,f),bt&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(u.type.id)})`),!0;if(!(u instanceof Le)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof Le&&u.positions[0]==0)u=p;else break}}let l=n.stateSlot(e.state,4);if(l>0)return e.reduce(l),bt&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let c=a[h++],u=a[h++],f=a[h++],p=h==a.length||!s,g=p?e:e.split(),y=this.tokens.mainToken;if(g.apply(c,u,y?y.start:g.pos,f),bt&&console.log(o+this.stackID(g)+` (via ${(c&65536)==0?"shift":`reduce of ${n.getName(c&65535)}`} for ${n.getName(u)} @ ${r}${g==e?"":", split"})`),p)return!0;g.pos>r?t.push(g):s.push(g)}return!1}advanceFully(e,t){let s=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>s)return uu(e,t),!0}}runRecovery(e,t,s){let r=null,n=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],c=bt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(n||(n=!0,l.restart(),bt&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,s))))continue;let u=l.split(),f=c;for(let p=0;p<10&&u.forceReduce()&&(bt&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,s));p++)bt&&(f=this.stackID(u)+" -> ");for(let p of l.recoverByInsert(a))bt&&console.log(c+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,s);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),bt&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),uu(l,s)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),Le.build({buffer:to.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ul||(ul=new WeakMap)).get(e);return t||ul.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function uu(i,e){for(let t=0;t<e.length;t++){let s=e[t];if(s.pos==i.pos&&s.sameState(i)){e[t].score<i.score&&(e[t]=i);return}}e.push(i)}class pS{constructor(e,t,s){this.source=e,this.flags=t,this.disabled=s}allows(e){return!this.disabled||this.disabled[e]==0}}const dl=i=>i;class gS{constructor(e){this.start=e.start,this.shift=e.shift||dl,this.reduce=e.reduce||dl,this.reuse=e.reuse||dl,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class io extends xp{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let s=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function n(l,a,h){r[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=le[a]);for(let h=1;h<l.length;){let c=l[h++];if(c>=0)n(c,a,l[h++]);else{let u=l[h+-c];for(let f=-c;f>0;f--)n(l[h++],a,u);h++}}}this.nodeSet=new uh(t.map((l,a)=>gt.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:s.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=gp;let o=pn(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(du),this.states=pn(e.states,Uint32Array),this.data=pn(e.stateData),this.goto=pn(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Is(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,s){let r=new fS(this,e,t,s);for(let n of this.wrappers)r=n(r,e,t,s);return r}getGoto(e,t,s=!1){let r=this.goto;if(t>=r[0])return-1;for(let n=r[t+1];;){let o=r[n++],l=o&1,a=r[n++];if(l&&s)return a;for(let h=n+(o>>1);n<h;n++)if(r[n]==e)return a;if(l)return-1}}hasAction(e,t){let s=this.data;for(let r=0;r<2;r++)for(let n=this.stateSlot(e,r?2:1),o;;n+=3){if((o=s[n])==65535)if(s[n+1]==1)o=s[n=ui(s,n+2)];else{if(s[n+1]==2)return ui(s,n+2);break}if(o==t||o==0)return ui(s,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,s=>s==t?!0:null)}allActions(e,t){let s=this.stateSlot(e,4),r=s?t(s):void 0;for(let n=this.stateSlot(e,1);r==null;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=ui(this.data,n+2);else break;r=t(ui(this.data,n+1))}return r}nextStates(e){let t=[];for(let s=this.stateSlot(e,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=ui(this.data,s+2);else break;if((this.data[s+2]&1)==0){let r=this.data[s+1];t.some((n,o)=>o&1&&n==r)||t.push(this.data[s],r)}}return t}configure(e){let t=Object.assign(Object.create(io.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let s=this.topRules[e.top];if(!s)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=s}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(s=>{let r=e.tokenizers.find(n=>n.from==s);return r?r.to:s})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((s,r)=>{let n=e.specializers.find(l=>l.from==s.external);if(!n)return s;let o=Object.assign(Object.assign({},s),{external:n.to});return t.specializers[r]=du(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),s=t.map(()=>!1);if(e)for(let n of e.split(" ")){let o=t.indexOf(n);o>=0&&(s[o]=!0)}let r=null;for(let n=0;n<t.length;n++)if(!s[n])for(let o=this.dialects[t[n]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new pS(e,s,r)}static deserialize(e){return new io(e)}}function ui(i,e){return i[e]|i[e+1]<<16}function mS(i){let e=null;for(let t of i){let s=t.p.stoppedAt;(t.pos==t.p.stream.end||s!=null&&t.pos>s)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function du(i){if(i.external){let e=i.extend?1:0;return(t,s)=>i.external(t,s)<<1|e}return i.get}let yS=0,di=class ga{constructor(e,t,s,r){this.name=e,this.set=t,this.base=s,this.modified=r,this.id=yS++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof ga&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new ga(s,[],null,[]);if(r.set.push(r),t)for(let n of t.set)r.set.push(n);return r}static defineModifier(e){let t=new so(e);return s=>s.modified.indexOf(t)>-1?s:so.get(s.base||s,s.modified.concat(t).sort((r,n)=>r.id-n.id))}},bS=0;class so{constructor(e){this.name=e,this.instances=[],this.id=bS++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(l=>l.base==e&&xS(t,l.modified));if(s)return s;let r=[],n=new di(e.name,r,e,t);for(let l of t)l.instances.push(n);let o=vS(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(so.get(l,a));return n}}function xS(i,e){return i.length==e.length&&i.every((t,s)=>t==e[s])}function vS(i){let e=[[]];for(let t=0;t<i.length;t++)for(let s=0,r=e.length;s<r;s++)e.push(e[s].concat(i[t]));return e.sort((t,s)=>s.length-t.length)}function vp(i){let e=Object.create(null);for(let t in i){let s=i[t];Array.isArray(s)||(s=[s]);for(let r of t.split(" "))if(r){let n=[],o=2,l=r;for(let u=0;;){if(l=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(n.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let p=r[u++];if(u==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);l=r.slice(u)}let a=n.length-1,h=n[a];if(!h)throw new RangeError("Invalid path: "+r);let c=new Vr(s,o,a>0?n.slice(0,a):null);e[h]=c.sort(e[h])}}return kp.add(e)}const kp=new le({combine(i,e){let t,s,r;for(;i||e;){if(!i||e&&i.depth>=e.depth?(r=e,e=e.next):(r=i,i=i.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let n=new Vr(r.tags,r.mode,r.context);t?t.next=n:s=n,t=n}return s}});class Vr{constructor(e,t,s,r){this.tags=e,this.mode=t,this.context=s,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Vr.empty=new Vr([],2,null);function wp(i,e){let t=Object.create(null);for(let n of i)if(!Array.isArray(n.tag))t[n.tag.id]=n.class;else for(let o of n.tag)t[o.id]=n.class;let{scope:s,all:r=null}=e||{};return{style:n=>{let o=r;for(let l of n)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:s}}function kS(i,e){let t=null;for(let s of i){let r=s.style(e);r&&(t=t?t+" "+r:r)}return t}function wS(i,e,t,s=0,r=i.length){let n=new SS(s,Array.isArray(e)?e:[e],t);n.highlightRange(i.cursor(),s,r,"",n.highlighters),n.flush(r)}class SS{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,r,n){let{type:o,from:l,to:a}=e;if(l>=s||a<=t)return;o.isTop&&(n=this.highlighters.filter(p=>!p.scope||p.scope(o)));let h=r,c=CS(e)||Vr.empty,u=kS(n,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,l),h),c.opaque)return;let f=e.tree&&e.tree.prop(le.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+l,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),y=e.firstChild();for(let x=0,m=l;;x++){let k=x<f.overlay.length?f.overlay[x]:null,C=k?k.from+l:a,S=Math.max(t,m),$=Math.min(s,C);if(S<$&&y)for(;e.from<$&&(this.highlightRange(e,S,$,r,n),this.startSpan(Math.min($,e.to),h),!(e.to>=C||!e.nextSibling())););if(!k||C>s)break;m=k.to+l,m>t&&(this.highlightRange(p.cursor(),Math.max(t,k.from+l),Math.min(s,m),"",g),this.startSpan(Math.min(s,m),h))}y&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,r,n),this.startSpan(Math.min(s,e.to),h)}while(e.nextSibling());e.parent()}}}function CS(i){let e=i.type.prop(kp);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const j=di.define,gn=j(),Di=j(),fu=j(Di),pu=j(Di),Bi=j(),mn=j(Bi),fl=j(Bi),Yt=j(),es=j(Yt),Xt=j(),Gt=j(),ma=j(),ir=j(ma),yn=j(),D={comment:gn,lineComment:j(gn),blockComment:j(gn),docComment:j(gn),name:Di,variableName:j(Di),typeName:fu,tagName:j(fu),propertyName:pu,attributeName:j(pu),className:j(Di),labelName:j(Di),namespace:j(Di),macroName:j(Di),literal:Bi,string:mn,docString:j(mn),character:j(mn),attributeValue:j(mn),number:fl,integer:j(fl),float:j(fl),bool:j(Bi),regexp:j(Bi),escape:j(Bi),color:j(Bi),url:j(Bi),keyword:Xt,self:j(Xt),null:j(Xt),atom:j(Xt),unit:j(Xt),modifier:j(Xt),operatorKeyword:j(Xt),controlKeyword:j(Xt),definitionKeyword:j(Xt),moduleKeyword:j(Xt),operator:Gt,derefOperator:j(Gt),arithmeticOperator:j(Gt),logicOperator:j(Gt),bitwiseOperator:j(Gt),compareOperator:j(Gt),updateOperator:j(Gt),definitionOperator:j(Gt),typeOperator:j(Gt),controlOperator:j(Gt),punctuation:ma,separator:j(ma),bracket:ir,angleBracket:j(ir),squareBracket:j(ir),paren:j(ir),brace:j(ir),content:Yt,heading:es,heading1:j(es),heading2:j(es),heading3:j(es),heading4:j(es),heading5:j(es),heading6:j(es),contentSeparator:j(Yt),list:j(Yt),quote:j(Yt),emphasis:j(Yt),strong:j(Yt),link:j(Yt),monospace:j(Yt),strikethrough:j(Yt),inserted:j(),deleted:j(),changed:j(),invalid:j(),meta:yn,documentMeta:j(yn),annotation:j(yn),processingInstruction:j(yn),definition:di.defineModifier("definition"),constant:di.defineModifier("constant"),function:di.defineModifier("function"),standard:di.defineModifier("standard"),local:di.defineModifier("local"),special:di.defineModifier("special")};for(let i in D){let e=D[i];e instanceof di&&(e.name=i)}wp([{tag:D.link,class:"tok-link"},{tag:D.heading,class:"tok-heading"},{tag:D.emphasis,class:"tok-emphasis"},{tag:D.strong,class:"tok-strong"},{tag:D.keyword,class:"tok-keyword"},{tag:D.atom,class:"tok-atom"},{tag:D.bool,class:"tok-bool"},{tag:D.url,class:"tok-url"},{tag:D.labelName,class:"tok-labelName"},{tag:D.inserted,class:"tok-inserted"},{tag:D.deleted,class:"tok-deleted"},{tag:D.literal,class:"tok-literal"},{tag:D.string,class:"tok-string"},{tag:D.number,class:"tok-number"},{tag:[D.regexp,D.escape,D.special(D.string)],class:"tok-string2"},{tag:D.variableName,class:"tok-variableName"},{tag:D.local(D.variableName),class:"tok-variableName tok-local"},{tag:D.definition(D.variableName),class:"tok-variableName tok-definition"},{tag:D.special(D.variableName),class:"tok-variableName2"},{tag:D.definition(D.propertyName),class:"tok-propertyName tok-definition"},{tag:D.typeName,class:"tok-typeName"},{tag:D.namespace,class:"tok-namespace"},{tag:D.className,class:"tok-className"},{tag:D.macroName,class:"tok-macroName"},{tag:D.propertyName,class:"tok-propertyName"},{tag:D.operator,class:"tok-operator"},{tag:D.comment,class:"tok-comment"},{tag:D.meta,class:"tok-meta"},{tag:D.invalid,class:"tok-invalid"},{tag:D.punctuation,class:"tok-punctuation"}]);const ks=63,gu=64,OS=1,AS=2,Sp=3,MS=4,Cp=5,PS=6,TS=7,Op=65,_S=66,DS=8,BS=9,$S=10,ES=11,RS=12,Ap=13,LS=19,IS=20,NS=29,VS=33,FS=34,HS=47,jS=0,gh=1,ya=2,Fr=3,ba=4;class ns{constructor(e,t,s){this.parent=e,this.depth=t,this.type=s,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+s}}ns.top=new ns(null,-1,jS);function vr(i,e){for(let t=0,s=e-i.pos-1;;s--,t++){let r=i.peek(s);if(Si(r)||r==-1)return t}}function xa(i){return i==32||i==9}function Si(i){return i==10||i==13}function Mp(i){return xa(i)||Si(i)}function as(i){return i<0||Mp(i)}const WS=new gS({start:ns.top,reduce(i,e){return i.type==Fr&&(e==IS||e==FS)?i.parent:i},shift(i,e,t,s){if(e==Sp)return new ns(i,vr(s,s.pos),gh);if(e==Op||e==Cp)return new ns(i,vr(s,s.pos),ya);if(e==ks)return i.parent;if(e==LS||e==VS)return new ns(i,0,Fr);if(e==Ap&&i.type==ba)return i.parent;if(e==HS){let r=/[1-9]/.exec(s.read(s.pos,t.pos));if(r)return new ns(i,i.depth+ +r[0],ba)}return i},hash(i){return i.hash}});function zs(i,e,t=0){return i.peek(t)==e&&i.peek(t+1)==e&&i.peek(t+2)==e&&as(i.peek(t+3))}const zS=new Bo((i,e)=>{if(i.next==-1&&e.canShift(gu))return i.acceptToken(gu);let t=i.peek(-1);if((Si(t)||t<0)&&e.context.type!=Fr){if(zs(i,45))if(e.canShift(ks))i.acceptToken(ks);else return i.acceptToken(OS,3);if(zs(i,46))if(e.canShift(ks))i.acceptToken(ks);else return i.acceptToken(AS,3);let s=0;for(;i.next==32;)s++,i.advance();(s<e.context.depth||s==e.context.depth&&e.context.type==gh&&(i.next!=45||!as(i.peek(1))))&&i.next!=-1&&!Si(i.next)&&i.next!=35&&i.acceptToken(ks,-s)}},{contextual:!0}),QS=new Bo((i,e)=>{if(e.context.type==Fr){i.next==63&&(i.advance(),as(i.next)&&i.acceptToken(TS));return}if(i.next==45)i.advance(),as(i.next)&&i.acceptToken(e.context.type==gh&&e.context.depth==vr(i,i.pos-1)?MS:Sp);else if(i.next==63)i.advance(),as(i.next)&&i.acceptToken(e.context.type==ya&&e.context.depth==vr(i,i.pos-1)?PS:Cp);else{let t=i.pos;for(;;)if(xa(i.next)){if(i.pos==t)return;i.advance()}else if(i.next==33)Pp(i);else if(i.next==38)va(i);else if(i.next==42){va(i);break}else if(i.next==39||i.next==34){if(mh(i,!0))break;return}else if(i.next==91||i.next==123){if(!qS(i))return;break}else{Tp(i,!0,!1,0);break}for(;xa(i.next);)i.advance();if(i.next==58){if(i.pos==t&&e.canShift(NS))return;let s=i.peek(1);as(s)&&i.acceptTokenTo(e.context.type==ya&&e.context.depth==vr(i,t)?_S:Op,t)}}},{contextual:!0});function US(i){return i>32&&i<127&&i!=34&&i!=37&&i!=44&&i!=60&&i!=62&&i!=92&&i!=94&&i!=96&&i!=123&&i!=124&&i!=125}function mu(i){return i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70}function yu(i,e){return i.next==37?(i.advance(),mu(i.next)&&i.advance(),mu(i.next)&&i.advance(),!0):US(i.next)||e&&i.next==44?(i.advance(),!0):!1}function Pp(i){if(i.advance(),i.next==60){for(i.advance();;)if(!yu(i,!0)){i.next==62&&i.advance();break}}else for(;yu(i,!1););}function va(i){for(i.advance();!as(i.next)&&ro(i.tag)!="f";)i.advance()}function mh(i,e){let t=i.next,s=!1,r=i.pos;for(i.advance();;){let n=i.next;if(n<0)break;if(i.advance(),n==t)if(n==39)if(i.next==39)i.advance();else break;else break;else if(n==92&&t==34)i.next>=0&&i.advance();else if(Si(n)){if(e)return!1;s=!0}else if(e&&i.pos>=r+1024)return!1}return!s}function qS(i){for(let e=[],t=i.pos+1024;;)if(i.next==91||i.next==123)e.push(i.next),i.advance();else if(i.next==39||i.next==34){if(!mh(i,!0))return!1}else if(i.next==93||i.next==125){if(e[e.length-1]!=i.next-2)return!1;if(e.pop(),i.advance(),!e.length)return!0}else{if(i.next<0||i.pos>t||Si(i.next))return!1;i.advance()}}const KS="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function ro(i){return i<33?"u":i>125?"s":KS[i-33]}function pl(i,e){let t=ro(i);return t!="u"&&!(e&&t=="f")}function Tp(i,e,t,s){if(ro(i.next)=="s"||(i.next==63||i.next==58||i.next==45)&&pl(i.peek(1),t))i.advance();else return!1;let r=i.pos;for(;;){let n=i.next,o=0,l=s+1;for(;Mp(n);){if(Si(n)){if(e)return!1;l=0}else l++;n=i.peek(++o)}if(!(n>=0&&(n==58?pl(i.peek(o+1),t):n==35?i.peek(o-1)!=32:pl(n,t)))||!t&&l<=s||l==0&&!t&&(zs(i,45,o)||zs(i,46,o)))break;if(e&&ro(n)=="f")return!1;for(let h=o;h>=0;h--)i.advance();if(e&&i.pos>r+1024)return!1}return!0}const XS=new Bo((i,e)=>{if(i.next==33)Pp(i),i.acceptToken(RS);else if(i.next==38||i.next==42){let t=i.next==38?$S:ES;va(i),i.acceptToken(t)}else i.next==39||i.next==34?(mh(i,!1),i.acceptToken(BS)):Tp(i,!1,e.context.type==Fr,e.context.depth)&&i.acceptToken(DS)}),GS=new Bo((i,e)=>{let t=e.context.type==ba?e.context.depth:-1,s=i.pos;e:for(;;){let r=0,n=i.next;for(;n==32;)n=i.peek(++r);if(!r&&(zs(i,45,r)||zs(i,46,r))||!Si(n)&&(t<0&&(t=Math.max(e.context.depth+1,r)),r<t))break;for(;;){if(i.next<0)break e;let o=Si(i.next);if(i.advance(),o)continue e;s=i.pos}}i.acceptTokenTo(Ap,s)}),YS=vp({DirectiveName:D.keyword,DirectiveContent:D.attributeValue,"DirectiveEnd DocEnd":D.meta,QuotedLiteral:D.string,BlockLiteralHeader:D.special(D.string),BlockLiteralContent:D.content,Literal:D.content,"Key/Literal Key/QuotedLiteral":D.definition(D.propertyName),"Anchor Alias":D.labelName,Tag:D.typeName,Comment:D.lineComment,": , -":D.separator,"?":D.punctuation,"[ ]":D.squareBracket,"{ }":D.brace}),JS=io.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:WS,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[YS],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[zS,QS,XS,GS,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var gl;const Os=new le;function ZS(i){return J.define({combine:i?e=>e.concat(i):void 0})}const eC=new le;class Rt{constructor(e,t,s=[],r=""){this.data=e,this.name=r,ge.prototype.hasOwnProperty("tree")||Object.defineProperty(ge.prototype,"tree",{get(){return ni(this)}}),this.parser=t,this.extension=[Us.of(this),ge.languageData.of((n,o,l)=>{let a=bu(n,o,l),h=a.type.prop(Os);if(!h)return[];let c=n.facet(h),u=a.type.prop(eC);if(u){let f=a.resolve(o-a.from,l);for(let p of u)if(p.test(f,n)){let g=n.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(s)}isActiveAt(e,t,s=-1){return bu(e,t,s).type.prop(Os)==this.data}findRegions(e){let t=e.facet(Us);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],r=(n,o)=>{if(n.prop(Os)==this.data){s.push({from:o,to:o+n.length});return}let l=n.prop(le.mounted);if(l){if(l.tree.prop(Os)==this.data){if(l.overlay)for(let a of l.overlay)s.push({from:a.from+o,to:a.to+o});else s.push({from:o,to:o+n.length});return}else if(l.overlay){let a=s.length;if(r(l.tree,l.overlay[0].from+o),s.length>a)return}}for(let a=0;a<n.children.length;a++){let h=n.children[a];h instanceof Le&&r(h,n.positions[a]+o)}};return r(ni(e),0),s}get allowsNesting(){return!0}}Rt.setState=Ve.define();function bu(i,e,t){let s=i.facet(Us),r=ni(i).topNode;if(!s||s.allowsNesting)for(let n=r;n;n=n.enter(e,t,$e.ExcludeBuffers|$e.EnterBracketed))n.type.isTop&&(r=n);return r}class no extends Rt{constructor(e,t,s){super(e,t,[],s),this.parser=t}static define(e){let t=ZS(e.languageData);return new no(t,e.parser.configure({props:[Os.add(s=>s.isTop?t:void 0)]}),e.name)}configure(e,t){return new no(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ni(i){let e=i.field(Rt.state,!1);return e?e.tree:Le.empty}class tC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let sr=null;class oo{constructor(e,t,s=[],r,n,o,l,a){this.parser=e,this.state=t,this.fragments=s,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new oo(e,t,[],Le.empty,0,s,[],null)}startParse(){return this.parser.startParse(new tC(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Le.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(cs.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(cs.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=sr;sr=this;try{return e()}finally{sr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=xu(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:r,treeLen:n,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,f)=>a.push({fromA:h,toA:c,fromB:u,toB:f})),s=cs.applyChanges(s,a),r=Le.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new oo(this.parser,t,s,r,n,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:r,to:n}=this.skipped[s];r<e.to&&n>e.from&&(this.fragments=xu(this.fragments,r,n),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends xp{createParse(t,s,r){let n=r[0].from,o=r[r.length-1].to;return{parsedPos:n,advance(){let a=sr;if(a){for(let h of r)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Le(gt.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return sr}}function xu(i,e,t){return cs.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class Qs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new Qs(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=oo.create(e.facet(Us).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new Qs(s)}}Rt.state=ys.define({create:Qs.init,update(i,e){for(let t of e.effects)if(t.is(Rt.setState))return t.value;return e.startState.facet(Us)!=e.state.facet(Us)?Qs.init(e.state):i.apply(e)}});let _p=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_p=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const ml=typeof navigator<"u"&&(!((gl=navigator.scheduling)===null||gl===void 0)&&gl.isInputPending)?()=>navigator.scheduling.isInputPending():null,iC=Qi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Rt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Rt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=_p(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:r}}=this.view,n=s.field(Rt.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ml?Math.max(25,e.timeRemaining()-5):1e9),l=n.context.treeLen<r&&s.doc.length>r+1e3,a=n.context.work(()=>ml&&ml()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:Rt.setState.of(new Qs(n.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>si(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Us=J.define({combine(i){return i.length?i[0]:null},enables:i=>[Rt.state,iC,se.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class sC{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const rC=J.define(),yh=J.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function lo(i){let e=i.facet(yh);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function ao(i,e){let t="",s=i.tabSize,r=i.facet(yh)[0];if(r=="	"){for(;e>=s;)t+="	",e-=s;r=" "}for(let n=0;n<e;n++)t+=r;return t}function Dp(i,e){i instanceof ge&&(i=new $o(i));for(let s of i.state.facet(rC)){let r=s(i,e);if(r!==void 0)return r}let t=ni(i.state);return t.length>=e?nC(i,t,e):null}class $o{constructor(e,t={}){this.state=e,this.options=t,this.unit=lo(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:n}=this.options;return r!=null&&r>=s.from&&r<=s.to?n&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:s.text.slice(r-s.from),from:r}:{text:s.text.slice(0,r-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:r}=this.lineAt(e,t);return s.slice(e-r,Math.min(s.length,e+100-r))}column(e,t=1){let{text:s,from:r}=this.lineAt(e,t),n=this.countColumn(s,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(s,s.search(/\S|$/))),n}countColumn(e,t=e.length){return Ao(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:r}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let o=n(r);if(o>-1)return o}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Bp=new le;function nC(i,e,t){let s=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=s.node){let n=[];for(let o=r;o&&!(o.from<s.node.from||o.to>s.node.to||o.from==s.node.from&&o.type==s.node.type);o=o.parent)n.push(o);for(let o=n.length-1;o>=0;o--)s={node:n[o],next:s}}return $p(s,i,t)}function $p(i,e,t){for(let s=i;s;s=s.next){let r=lC(s.node);if(r)return r(bh.create(e,t,s))}return 0}function oC(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function lC(i){let e=i.type.prop(Bp);if(e)return e;let t=i.firstChild,s;if(t&&(s=t.type.prop(le.closedBy))){let r=i.lastChild,n=r&&s.indexOf(r.name)>-1;return o=>Ep(o,!0,1,void 0,n&&!oC(o)?r.from:void 0)}return i.parent==null?aC:null}function aC(){return 0}class bh extends $o{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new bh(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(hC(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return $p(this.context.next,this.base,this.pos)}}function hC(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function cC(i){let e=i.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,n=i.state.doc.lineAt(t.from),o=r==null||r<=n.from?n.to:Math.min(n.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==s)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let h=/^ */.exec(n.text.slice(t.to-n.from))[0].length;return{from:t.from,to:t.to+h}}l=a.to}}function vu({closing:i,align:e=!0,units:t=1}){return s=>Ep(s,e,t,i)}function Ep(i,e,t,s,r){let n=i.textAfter,o=n.match(/^\s*/)[0].length,l=s&&n.slice(o,o+s.length)==s||r==i.pos+o,a=e?cC(i):null;return a?l?i.column(a.from):i.column(a.to):i.baseIndent+(l?0:i.unit*t)}const uC=new le;function dC(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}class Eo{constructor(e,t){this.specs=e;let s;function r(l){let a=ji.newName();return(s||(s=Object.create(null)))["."+a]=l,a}const n=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Rt?l=>l.prop(Os)==o.data:o?l=>l==o:void 0,this.style=wp(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:n}).style,this.module=s?new ji(s):null,this.themeType=t.themeType}static define(e,t){return new Eo(e,t||{})}}const ka=J.define(),fC=J.define({combine(i){return i.length?[i[0]]:null}});function yl(i){let e=i.facet(ka);return e.length?e:i.facet(fC)}function pC(i,e){let t=[mC],s;return i instanceof Eo&&(i.module&&t.push(se.styleModule.of(i.module)),s=i.themeType),s?t.push(ka.computeN([se.darkTheme],r=>r.facet(se.darkTheme)==(s=="dark")?[i]:[])):t.push(ka.of(i)),t}class gC{constructor(e){this.markCache=Object.create(null),this.tree=ni(e.state),this.decorations=this.buildDeco(e,yl(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ni(e.state),s=yl(e.state),r=s!=yl(e.startState),{viewport:n}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!r&&t.type==this.tree.type&&o>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return He.none;let s=new Dr;for(let{from:r,to:n}of e.visibleRanges)wS(this.tree,t,(o,l,a)=>{s.add(o,l,this.markCache[a]||(this.markCache[a]=He.mark({class:a})))},r,n);return s.finish()}}const mC=Za.high(Qi.fromClass(gC,{decorations:i=>i.decorations})),yC=1e4,bC="()[]{}",xC=new le;function wa(i,e,t){let s=i.prop(e<0?le.openedBy:le.closedBy);if(s)return s;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Sa(i){let e=i.type.prop(xC);return e?e(i.node):i}function As(i,e,t,s={}){let r=s.maxScanDistance||yC,n=s.brackets||bC,o=ni(i),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=wa(a.type,t,n);if(h&&a.from<a.to){let c=Sa(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return vC(i,e,t,a,c,h,n)}}return kC(i,e,t,o,l.type,r,n)}function vC(i,e,t,s,r,n,o){let l=s.parent,a={from:r.from,to:r.to},h=0,c=l?.cursor();if(c&&(t<0?c.childBefore(s.from):c.childAfter(s.to)))do if(t<0?c.to<=s.from:c.from>=s.to){if(h==0&&n.indexOf(c.type.name)>-1&&c.from<c.to){let u=Sa(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(wa(c.type,t,o))h++;else if(wa(c.type,-t,o)){if(h==0){let u=Sa(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function kC(i,e,t,s,r,n,o){let l=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=i.doc.iterRange(e,t>0?i.doc.length:0),u=0;for(let f=0;!c.next().done&&f<=n;){let p=c.value;t<0&&(f+=p.length);let g=e+f*t;for(let y=t>0?0:p.length-1,x=t>0?p.length:-1;y!=x;y+=t){let m=o.indexOf(p[y]);if(!(m<0||s.resolveInner(g+y,1).type!=r))if(m%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:g+y,to:g+y+1},matched:m>>1==a>>1};u--}}t>0&&(f+=p.length)}return c.done?{start:h,matched:!1}:null}const wC=Object.create(null),ku=[gt.none],wu=[],Su=Object.create(null),SC=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])SC[i]=CC(wC,e);function bl(i,e){wu.indexOf(i)>-1||(wu.push(i),console.warn(e))}function CC(i,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let c=i[h]||D[h];c?typeof c=="function"?a.length?a=a.map(c):bl(h,`Modifier ${h} used at start of tag`):a.length?bl(h,`Tag ${h} used as modifier`):a=Array.isArray(c)?c:[c]:bl(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),r=s+" "+t.map(l=>l.id),n=Su[r];if(n)return n.id;let o=Su[r]=gt.define({id:ku.length,name:s,props:[vp({[s]:t})]});return ku.push(o),o.id}Re.RTL,Re.LTR;const OC=no.define({name:"yaml",parser:JS.configure({props:[Bp.add({Stream:i=>{for(let e=i.node.resolve(i.pos,-1);e&&e.to>=i.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return i.baseIndentFor(e);if(e.name=="BlockLiteral")return i.baseIndentFor(e)+i.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return i.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=i.column(e.from,1);if(t==i.lineIndent(e.from,1))return t;if(e.to>i.pos)return null}}return null},FlowMapping:vu({closing:"}"}),FlowSequence:vu({closing:"]"})}),uC.add({"FlowMapping FlowSequence":dC,"Item Pair BlockLiteral":(i,e)=>({from:e.doc.lineAt(i.from).to,to:i.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function AC(){return new sC(OC)}const MC="#e5c07b",Cu="#e06c75",PC="#56b6c2",TC="#ffffff",Bn="#abb2bf",Ca="#7d8799",_C="#61afef",DC="#98c379",Ou="#d19a66",BC="#c678dd",$C="#21252b",Au="#2c313a",Mu="#282c34",xl="#353a42",EC="#3E4451",Pu="#528bff",RC=se.theme({"&":{color:Bn,backgroundColor:Mu},".cm-content":{caretColor:Pu},".cm-cursor, .cm-dropCursor":{borderLeftColor:Pu},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:EC},".cm-panels":{backgroundColor:$C,color:Bn},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Mu,color:Ca,border:"none"},".cm-activeLineGutter":{backgroundColor:Au},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xl},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xl,borderBottomColor:xl},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Au,color:Bn}}},{dark:!0}),LC=Eo.define([{tag:D.keyword,color:BC},{tag:[D.name,D.deleted,D.character,D.propertyName,D.macroName],color:Cu},{tag:[D.function(D.variableName),D.labelName],color:_C},{tag:[D.color,D.constant(D.name),D.standard(D.name)],color:Ou},{tag:[D.definition(D.name),D.separator],color:Bn},{tag:[D.typeName,D.className,D.number,D.changed,D.annotation,D.modifier,D.self,D.namespace],color:MC},{tag:[D.operator,D.operatorKeyword,D.url,D.escape,D.regexp,D.link,D.special(D.string)],color:PC},{tag:[D.meta,D.comment],color:Ca},{tag:D.strong,fontWeight:"bold"},{tag:D.emphasis,fontStyle:"italic"},{tag:D.strikethrough,textDecoration:"line-through"},{tag:D.link,color:Ca,textDecoration:"underline"},{tag:D.heading,fontWeight:"bold",color:Cu},{tag:[D.atom,D.bool,D.special(D.variableName)],color:Ou},{tag:[D.processingInstruction,D.string,D.inserted],color:DC},{tag:D.invalid,color:TC}]),IC=[RC,pC(LC)],NC=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),s=vh(i.state,t.from);return s.line?VC(i):s.block?HC(i):!1};function xh(i,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(s(t.update(r)),!0):!1}}const VC=xh(zC,0),FC=xh(Rp,0),HC=xh((i,e)=>Rp(i,e,WC(e)),0);function vh(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const rr=50;function jC(i,{open:e,close:t},s,r){let n=i.sliceDoc(s-rr,s),o=i.sliceDoc(r,r+rr),l=/\s*$/.exec(n)[0].length,a=/^\s*/.exec(o)[0].length,h=n.length-l;if(n.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:s-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,u;r-s<=2*rr?c=u=i.sliceDoc(s,r):(c=i.sliceDoc(s,s+rr),u=i.sliceDoc(r-rr,r));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(u)[0].length,g=u.length-p-t.length;return c.slice(f,f+e.length)==e&&u.slice(g,g+t.length)==t?{open:{pos:s+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:r-p-t.length,margin:/\s/.test(u.charAt(g-1))?1:0}}:null}function WC(i){let e=[];for(let t of i.selection.ranges){let s=i.doc.lineAt(t.from),r=t.to<=s.to?s:i.doc.lineAt(t.to);r.from>s.from&&r.from==t.to&&(r=t.to==s.to+1?s:i.doc.lineAt(t.to-1));let n=e.length-1;n>=0&&e[n].to>s.from?e[n].to=r.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:r.to})}return e}function Rp(i,e,t=e.selection.ranges){let s=t.map(n=>vh(e,n.from).block);if(!s.every(n=>n))return null;let r=t.map((n,o)=>jC(e,s[o],n.from,n.to));if(i!=2&&!r.every(n=>n))return{changes:e.changes(t.map((n,o)=>r[o]?[]:[{from:n.from,insert:s[o].open+" "},{from:n.to,insert:" "+s[o].close}]))};if(i!=1&&r.some(n=>n)){let n=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=s[o],{open:h,close:c}=l;n.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:n}}return null}function zC(i,e,t=e.selection.ranges){let s=[],r=-1;for(let{from:n,to:o}of t){let l=s.length,a=1e9,h=vh(e,n).line;if(h){for(let c=n;c<=o;){let u=e.doc.lineAt(c);if(u.from>r&&(n==o||o>u.from)){r=u.from;let f=/^\s*/.exec(u.text)[0].length,p=f==u.length,g=u.text.slice(f,f+h.length)==h?f:-1;f<u.text.length&&f<a&&(a=f),s.push({line:u,comment:g,token:h,indent:f,empty:p,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<s.length;c++)s[c].indent<s[c].line.text.length&&(s[c].indent=a);s.length==l+1&&(s[l].single=!0)}}if(i!=2&&s.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of s)(u||!c)&&n.push({from:l.from+h,insert:a+" "});let o=e.changes(n);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&s.some(n=>n.comment>=0)){let n=[];for(let{line:o,comment:l,token:a}of s)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,n.push({from:h,to:c})}return{changes:n}}return null}function Xs(i,e){return N.create(i.ranges.map(e),i.mainIndex)}function Ht(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function jt({state:i,dispatch:e},t){let s=Xs(i.selection,t);return s.eq(i.selection,!0)?!1:(e(Ht(i,s)),!0)}function Ro(i,e){return N.cursor(e?i.to:i.from)}function Lp(i,e){return jt(i,t=>t.empty?i.moveByChar(t,e):Ro(t,e))}function it(i){return i.textDirectionAt(i.state.selection.main.head)==Re.LTR}const Ip=i=>Lp(i,!it(i)),Np=i=>Lp(i,it(i));function Vp(i,e){return jt(i,t=>t.empty?i.moveByGroup(t,e):Ro(t,e))}const QC=i=>Vp(i,!it(i)),UC=i=>Vp(i,it(i));function qC(i,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Lo(i,e,t){let s=ni(i).resolveInner(e.head),r=t?le.closedBy:le.openedBy;for(let a=e.head;;){let h=t?s.childAfter(a):s.childBefore(a);if(!h)break;qC(i,h,r)?s=h:a=t?h.to:h.from}let n=s.type.prop(r),o,l;return n&&(o=t?As(i,s.from,1):As(i,s.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?s.to:s.from,N.cursor(l,t?-1:1)}const KC=i=>jt(i,e=>Lo(i.state,e,!it(i))),XC=i=>jt(i,e=>Lo(i.state,e,it(i)));function Fp(i,e){return jt(i,t=>{if(!t.empty)return Ro(t,e);let s=i.moveVertically(t,e);return s.head!=t.head?s:i.moveToLineBoundary(t,e)})}const Hp=i=>Fp(i,!1),jp=i=>Fp(i,!0);function Wp(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,s=0,r;if(e){for(let n of i.state.facet(se.scrollMargins)){let o=n(i);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(s=Math.max(o?.bottom,s))}r=i.scrollDOM.clientHeight-t-s}else r=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(i.defaultLineHeight,r-5)}}function zp(i,e){let t=Wp(i),{state:s}=i,r=Xs(s.selection,o=>o.empty?i.moveVertically(o,e,t.height):Ro(o,e));if(r.eq(s.selection))return!1;let n;if(t.selfScroll){let o=i.coordsAtPos(s.selection.main.head),l=i.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<h&&(n=se.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return i.dispatch(Ht(s,r),{effects:n}),!0}const Tu=i=>zp(i,!1),Oa=i=>zp(i,!0);function qi(i,e,t){let s=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?s.to:s.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==s.from&&s.length){let n=/^\s*/.exec(i.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;n&&e.head!=s.from+n&&(r=N.cursor(s.from+n))}return r}const GC=i=>jt(i,e=>qi(i,e,!0)),YC=i=>jt(i,e=>qi(i,e,!1)),JC=i=>jt(i,e=>qi(i,e,!it(i))),ZC=i=>jt(i,e=>qi(i,e,it(i))),eO=i=>jt(i,e=>N.cursor(i.lineBlockAt(e.head).from,1)),tO=i=>jt(i,e=>N.cursor(i.lineBlockAt(e.head).to,-1));function iO(i,e,t){let s=!1,r=Xs(i.selection,n=>{let o=As(i,n.head,-1)||As(i,n.head,1)||n.head>0&&As(i,n.head-1,1)||n.head<i.doc.length&&As(i,n.head+1,-1);if(!o||!o.end)return n;s=!0;let l=o.start.from==n.head?o.end.to:o.end.from;return N.cursor(l)});return s?(e(Ht(i,r)),!0):!1}const sO=({state:i,dispatch:e})=>iO(i,e);function Dt(i,e){let t=Xs(i.state.selection,s=>{let r=e(s);return N.range(s.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(Ht(i.state,t)),!0)}function Qp(i,e){return Dt(i,t=>i.moveByChar(t,e))}const Up=i=>Qp(i,!it(i)),qp=i=>Qp(i,it(i));function Kp(i,e){return Dt(i,t=>i.moveByGroup(t,e))}const rO=i=>Kp(i,!it(i)),nO=i=>Kp(i,it(i)),oO=i=>Dt(i,e=>Lo(i.state,e,!it(i))),lO=i=>Dt(i,e=>Lo(i.state,e,it(i)));function Xp(i,e){return Dt(i,t=>i.moveVertically(t,e))}const Gp=i=>Xp(i,!1),Yp=i=>Xp(i,!0);function Jp(i,e){return Dt(i,t=>i.moveVertically(t,e,Wp(i).height))}const _u=i=>Jp(i,!1),Du=i=>Jp(i,!0),aO=i=>Dt(i,e=>qi(i,e,!0)),hO=i=>Dt(i,e=>qi(i,e,!1)),cO=i=>Dt(i,e=>qi(i,e,!it(i))),uO=i=>Dt(i,e=>qi(i,e,it(i))),dO=i=>Dt(i,e=>N.cursor(i.lineBlockAt(e.head).from)),fO=i=>Dt(i,e=>N.cursor(i.lineBlockAt(e.head).to)),Bu=({state:i,dispatch:e})=>(e(Ht(i,{anchor:0})),!0),$u=({state:i,dispatch:e})=>(e(Ht(i,{anchor:i.doc.length})),!0),Eu=({state:i,dispatch:e})=>(e(Ht(i,{anchor:i.selection.main.anchor,head:0})),!0),Ru=({state:i,dispatch:e})=>(e(Ht(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),pO=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),gO=({state:i,dispatch:e})=>{let t=Io(i).map(({from:s,to:r})=>N.range(s,Math.min(r+1,i.doc.length)));return e(i.update({selection:N.create(t),userEvent:"select"})),!0},mO=({state:i,dispatch:e})=>{let t=Xs(i.selection,s=>{let r=ni(i),n=r.resolveStack(s.from,1);if(s.empty){let o=r.resolveStack(s.from,-1);o.node.from>=n.node.from&&o.node.to<=n.node.to&&(n=o)}for(let o=n;o;o=o.next){let{node:l}=o;if((l.from<s.from&&l.to>=s.to||l.to>s.to&&l.from<=s.from)&&o.next)return N.range(l.to,l.from)}return s});return t.eq(i.selection)?!1:(e(Ht(i,t)),!0)};function Zp(i,e){let{state:t}=i,s=t.selection,r=t.selection.ranges.slice();for(let n of t.selection.ranges){let o=t.doc.lineAt(n.head);if(e?o.to<i.state.doc.length:o.from>0)for(let l=n;;){let a=i.moveVertically(l,e);if(a.head<o.from||a.head>o.to){r.some(h=>h.head==a.head)||r.push(a);break}else{if(a.head==l.head)break;l=a}}}return r.length==s.ranges.length?!1:(i.dispatch(Ht(t,N.create(r,r.length-1))),!0)}const yO=i=>Zp(i,!1),bO=i=>Zp(i,!0),xO=({state:i,dispatch:e})=>{let t=i.selection,s=null;return t.ranges.length>1?s=N.create([t.main]):t.main.empty||(s=N.create([N.cursor(t.main.head)])),s?(e(Ht(i,s)),!0):!1};function Xr(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:s}=i,r=s.changeByRange(n=>{let{from:o,to:l}=n;if(o==l){let a=e(n);a<o?(t="delete.backward",a=bn(i,a,!1)):a>o&&(t="delete.forward",a=bn(i,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=bn(i,o,!1),l=bn(i,l,!0);return o==l?{range:n}:{changes:{from:o,to:l},range:N.cursor(o,o<n.head?-1:1)}});return r.changes.empty?!1:(i.dispatch(s.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?se.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function bn(i,e,t){if(i instanceof se)for(let s of i.state.facet(se.atomicRanges).map(r=>r(i)))s.between(e,e,(r,n)=>{r<e&&n>e&&(e=t?n:r)});return e}const eg=(i,e,t)=>Xr(i,s=>{let r=s.from,{state:n}=i,o=n.doc.lineAt(r),l,a;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let h=Ao(l,n.tabSize),c=h%lo(n)||lo(n);for(let u=0;u<c&&l[l.length-1-u]==" ";u++)r--;a=r}else a=Ue(o.text,r-o.from,e,e)+o.from,a==r&&o.number!=(e?n.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,r-o.from))&&(a=Ue(o.text,a-o.from,!1,!1)+o.from);return a}),Aa=i=>eg(i,!1,!0),tg=i=>eg(i,!0,!1),ig=(i,e)=>Xr(i,t=>{let s=t.head,{state:r}=i,n=r.doc.lineAt(s),o=r.charCategorizer(s);for(let l=null;;){if(s==(e?n.to:n.from)){s==t.head&&n.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);break}let a=Ue(n.text,s-n.from,e)+n.from,h=n.text.slice(Math.min(s,a)-n.from,Math.max(s,a)-n.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||s!=t.head)&&(l=c),s=a}return s}),sg=i=>ig(i,!1),vO=i=>ig(i,!0),kO=i=>Xr(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),wO=i=>Xr(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),SO=i=>Xr(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),CO=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:ue.of(["",""])},range:N.cursor(s.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},OO=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(s=>{if(!s.empty||s.from==0||s.from==i.doc.length)return{range:s};let r=s.from,n=i.doc.lineAt(r),o=r==n.from?r-1:Ue(n.text,r-n.from,!1)+n.from,l=r==n.to?r+1:Ue(n.text,r-n.from,!0)+n.from;return{changes:{from:o,to:l,insert:i.doc.slice(r,l).append(i.doc.slice(o,r))},range:N.cursor(l)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Io(i){let e=[],t=-1;for(let s of i.selection.ranges){let r=i.doc.lineAt(s.from),n=i.doc.lineAt(s.to);if(!s.empty&&s.to==n.from&&(n=i.doc.lineAt(s.to-1)),t>=r.number){let o=e[e.length-1];o.to=n.to,o.ranges.push(s)}else e.push({from:r.from,to:n.to,ranges:[s]});t=n.number+1}return e}function rg(i,e,t){if(i.readOnly)return!1;let s=[],r=[];for(let n of Io(i)){if(t?n.to==i.doc.length:n.from==0)continue;let o=i.doc.lineAt(t?n.to+1:n.from-1),l=o.length+1;if(t){s.push({from:n.to,to:o.to},{from:n.from,insert:o.text+i.lineBreak});for(let a of n.ranges)r.push(N.range(Math.min(i.doc.length,a.anchor+l),Math.min(i.doc.length,a.head+l)))}else{s.push({from:o.from,to:n.from},{from:n.to,insert:i.lineBreak+o.text});for(let a of n.ranges)r.push(N.range(a.anchor-l,a.head-l))}}return s.length?(e(i.update({changes:s,scrollIntoView:!0,selection:N.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const AO=({state:i,dispatch:e})=>rg(i,e,!1),MO=({state:i,dispatch:e})=>rg(i,e,!0);function ng(i,e,t){if(i.readOnly)return!1;let s=[];for(let n of Io(i))t?s.push({from:n.from,insert:i.doc.slice(n.from,n.to)+i.lineBreak}):s.push({from:n.to,insert:i.lineBreak+i.doc.slice(n.from,n.to)});let r=i.changes(s);return e(i.update({changes:r,selection:i.selection.map(r,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const PO=({state:i,dispatch:e})=>ng(i,e,!1),TO=({state:i,dispatch:e})=>ng(i,e,!0),_O=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(Io(e).map(({from:r,to:n})=>(r>0?r--:n<e.doc.length&&n++,{from:r,to:n}))),s=Xs(e.selection,r=>{let n;if(i.lineWrapping){let o=i.lineBlockAt(r.head),l=i.coordsAtPos(r.head,r.assoc||1);l&&(n=o.bottom+i.documentTop-l.bottom+i.defaultLineHeight/2)}return i.moveVertically(r,!0,n)}).map(t);return i.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function DO(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ni(i).resolveInner(e),s=t.childBefore(e),r=t.childAfter(e),n;return s&&r&&s.to<=e&&r.from>=e&&(n=s.type.prop(le.closedBy))&&n.indexOf(r.name)>-1&&i.doc.lineAt(s.to).from==i.doc.lineAt(r.from).from&&!/\S/.test(i.sliceDoc(s.to,r.from))?{from:s.to,to:r.from}:null}const Lu=og(!1),BO=og(!0);function og(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(r=>{let{from:n,to:o}=r,l=e.doc.lineAt(n),a=!i&&n==o&&DO(e,n);i&&(n=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new $o(e,{simulateBreak:n,simulateDoubleBreak:!!a}),c=Dp(h,n);for(c==null&&(c=Ao(/^\s*/.exec(e.doc.lineAt(n).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:n,to:o}=a:n>l.from&&n<l.from+100&&!/\S/.test(l.text.slice(0,n))&&(n=l.from);let u=["",ao(e,c)];return a&&u.push(ao(e,h.lineIndent(l.from,-1))),{changes:{from:n,to:o,insert:ue.of(u)},range:N.cursor(n+1+u[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function kh(i,e){let t=-1;return i.changeByRange(s=>{let r=[];for(let o=s.from;o<=s.to;){let l=i.doc.lineAt(o);l.number>t&&(s.empty||s.to>l.from)&&(e(l,r,s),t=l.number),o=l.to+1}let n=i.changes(r);return{changes:r,range:N.range(n.mapPos(s.anchor,1),n.mapPos(s.head,1))}})}const $O=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),s=new $o(i,{overrideIndentation:n=>{let o=t[n];return o??-1}}),r=kh(i,(n,o,l)=>{let a=Dp(s,n.from);if(a==null)return;/\S/.test(n.text)||(a=0);let h=/^\s*/.exec(n.text)[0],c=ao(i,a);(h!=c||l.from<n.from+h.length)&&(t[n.from]=a,o.push({from:n.from,to:n.from+h.length,insert:c}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},EO=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(kh(i,(t,s)=>{s.push({from:t.from,insert:i.facet(yh)})}),{userEvent:"input.indent"})),!0),RO=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(kh(i,(t,s)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let n=Ao(r,i.tabSize),o=0,l=ao(i,Math.max(0,n-lo(i)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;s.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),LO=i=>(i.setTabFocusMode(),!0),IO=[{key:"Ctrl-b",run:Ip,shift:Up,preventDefault:!0},{key:"Ctrl-f",run:Np,shift:qp},{key:"Ctrl-p",run:Hp,shift:Gp},{key:"Ctrl-n",run:jp,shift:Yp},{key:"Ctrl-a",run:eO,shift:dO},{key:"Ctrl-e",run:tO,shift:fO},{key:"Ctrl-d",run:tg},{key:"Ctrl-h",run:Aa},{key:"Ctrl-k",run:kO},{key:"Ctrl-Alt-h",run:sg},{key:"Ctrl-o",run:CO},{key:"Ctrl-t",run:OO},{key:"Ctrl-v",run:Oa}],NO=[{key:"ArrowLeft",run:Ip,shift:Up,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:QC,shift:rO,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:JC,shift:cO,preventDefault:!0},{key:"ArrowRight",run:Np,shift:qp,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:UC,shift:nO,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ZC,shift:uO,preventDefault:!0},{key:"ArrowUp",run:Hp,shift:Gp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Bu,shift:Eu},{mac:"Ctrl-ArrowUp",run:Tu,shift:_u},{key:"ArrowDown",run:jp,shift:Yp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$u,shift:Ru},{mac:"Ctrl-ArrowDown",run:Oa,shift:Du},{key:"PageUp",run:Tu,shift:_u},{key:"PageDown",run:Oa,shift:Du},{key:"Home",run:YC,shift:hO,preventDefault:!0},{key:"Mod-Home",run:Bu,shift:Eu},{key:"End",run:GC,shift:aO,preventDefault:!0},{key:"Mod-End",run:$u,shift:Ru},{key:"Enter",run:Lu,shift:Lu},{key:"Mod-a",run:pO},{key:"Backspace",run:Aa,shift:Aa,preventDefault:!0},{key:"Delete",run:tg,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:sg,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:vO,preventDefault:!0},{mac:"Mod-Backspace",run:wO,preventDefault:!0},{mac:"Mod-Delete",run:SO,preventDefault:!0}].concat(IO.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),VO=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:KC,shift:oO},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:XC,shift:lO},{key:"Alt-ArrowUp",run:AO},{key:"Shift-Alt-ArrowUp",run:PO},{key:"Alt-ArrowDown",run:MO},{key:"Shift-Alt-ArrowDown",run:TO},{key:"Mod-Alt-ArrowUp",run:yO},{key:"Mod-Alt-ArrowDown",run:bO},{key:"Escape",run:xO},{key:"Mod-Enter",run:BO},{key:"Alt-l",mac:"Ctrl-l",run:gO},{key:"Mod-i",run:mO,preventDefault:!0},{key:"Mod-[",run:RO},{key:"Mod-]",run:EO},{key:"Mod-Alt-\\",run:$O},{key:"Shift-Mod-k",run:_O},{key:"Shift-Mod-\\",run:sO},{key:"Mod-/",run:NC},{key:"Alt-A",run:FC},{key:"Ctrl-m",mac:"Shift-Alt-m",run:LO}].concat(NO),FO=(i,e)=>{const t=i.__vccOpts||i;for(const[s,r]of e)t[s]=r;return t},HO={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},jO={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10"},WO={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},zO={class:"flex items-center justify-between"},QO={class:"flex items-center gap-4"},UO={class:"text-2xl font-bold text-gray-900 dark:text-white"},qO={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},KO={class:"flex items-center gap-3"},XO=["disabled"],GO=["disabled"],YO={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},JO={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ZO={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},e4={class:"lg:col-span-1 space-y-6"},t4={class:"card"},i4={class:"space-y-4"},s4={class:"card"},r4={class:"flex items-center justify-between mb-4"},n4=["disabled"],o4={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},l4={class:"bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-900 dark:text-gray-100"},a4={key:0,class:"text-sm text-gray-500 dark:text-gray-400 text-center py-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},h4={key:1,class:"space-y-3"},c4={key:0,class:"text-xs text-gray-500 mt-1"},u4={class:"flex items-center justify-between"},d4={class:"flex items-center gap-2"},f4=["onUpdate:modelValue","id","disabled"],p4=["for"],g4=["onClick","disabled"],m4={class:"lg:col-span-2"},y4={class:"card p-0 overflow-hidden"},b4={__name:"PipelineEditor",props:{pipelineId:{type:Number,default:null}},emits:["close","saved"],setup(i,{emit:e}){const t=i,s=e,r=Zd(),n=F(!1),o=F(!1),l=F(""),a=F(null);let h=null;const c=F({name:"",description:"",definition:"",variables:[]});function u(){if(!a.value)return;const x=se.updateListener.of(C=>{C.docChanged&&(c.value.definition=C.state.doc.toString())}),m=[Zw(),AC(),fp.of(VO),x,se.theme({"&":{fontSize:"14px",minHeight:"600px"},".cm-content":{padding:"16px",minHeight:"600px",fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, "source-code-pro", monospace'},".cm-scroller":{overflow:"auto"},".cm-editor":{height:"100%"},".cm-editor.cm-focused":{outline:"none"}})];r.isDark.value&&m.push(IC);const k=ge.create({doc:c.value.definition,extensions:m});h=new se({state:k,parent:a.value})}Pt(()=>r.isDark.value,x=>{if(h){const m=h.state.doc.toString();h.destroy(),h=null,setTimeout(()=>{if(u(),h){const k=h.state;h.dispatch({changes:{from:0,to:k.doc.length,insert:m}})}},10)}});async function f(){if(!t.pipelineId){c.value.definition=`name: "My Pipeline"
description: "Pipeline description"
steps:
  - name: "Example Step"
    type: "docker"
    action: "pull"
    config:
      image: "nginx:latest"
`,u();return}n.value=!0;try{const x=await Gm(t.pipelineId);if(c.value.name=x.name||"",c.value.description=x.description||"",c.value.definition=x.definition||"",x.variables&&typeof x.variables=="object"?c.value.variables=Object.entries(x.variables).map(([m,k])=>{const C=k==="***MASKED***";return{name:m,value:C?"***MASKED***":String(k),isSecret:C}}):c.value.variables=[],!h)u();else{const m=h.state.doc.toString();m!==c.value.definition&&h.dispatch({changes:{from:0,to:m.length,insert:c.value.definition}})}}catch(x){l.value=x.message||"Error loading pipeline"}finally{n.value=!1}}function p(){c.value.variables.push({name:"",value:"",isSecret:!1})}function g(x){c.value.variables.splice(x,1)}async function y(){if(!c.value.name||!c.value.definition){l.value="Pipeline name and definition are required";return}o.value=!0,l.value="";try{const x={};for(const k of c.value.variables)k.name&&(x[k.name]={value:k.value||"",is_secret:k.isSecret});const m={name:c.value.name,description:c.value.description||"",definition:c.value.definition,variables:x};t.pipelineId?await Jm(t.pipelineId,m):await Ym(m),s("saved")}catch(x){l.value=x.message||(t.pipelineId?"Error updating pipeline":"Error creating pipeline")}finally{o.value=!1}}return Pt(()=>c.value.definition,x=>{if(h){const m=h.state.doc.toString();m!==x&&h.dispatch({changes:{from:0,to:m.length,insert:x}})}}),Ft(()=>{f()}),ja(()=>{h&&h.destroy()}),(x,m)=>(O(),A("div",HO,[d("div",jO,[d("div",WO,[d("div",zO,[d("div",QO,[d("button",{onClick:m[0]||(m[0]=k=>x.$emit("close")),class:"p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...m[5]||(m[5]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),d("div",null,[d("h1",UO,L(i.pipelineId?"Edit Pipeline":"Create Pipeline"),1),d("p",qO,L(i.pipelineId?`Editing pipeline #${i.pipelineId}`:"Create a new pipeline from scratch"),1)])]),d("div",KO,[d("button",{onClick:m[1]||(m[1]=k=>x.$emit("close")),class:"btn btn-secondary px-4 py-2",disabled:o.value}," Cancel ",8,XO),d("button",{onClick:y,disabled:o.value||!c.value.name||!c.value.definition,class:"btn btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[o.value?(O(),A("svg",YO,[...m[6]||(m[6]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Q("",!0),oe(" "+L(o.value?"Saving...":i.pipelineId?"Save Changes":"Create Pipeline"),1)],8,GO)])])])]),d("div",JO,[d("div",ZO,[d("div",e4,[d("div",t4,[m[7]||(m[7]=d("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Pipeline Information",-1)),d("div",i4,[U(Te,{label:"Pipeline Name",required:""},{default:he(()=>[U(Be,{modelValue:c.value.name,"onUpdate:modelValue":m[2]||(m[2]=k=>c.value.name=k),type:"text",placeholder:"Enter pipeline name",disabled:n.value||o.value,required:""},null,8,["modelValue","disabled"])]),_:1}),U(Te,{label:"Description",description:"Optional: Brief description of the pipeline"},{default:he(()=>[U(Be,{modelValue:c.value.description,"onUpdate:modelValue":m[3]||(m[3]=k=>c.value.description=k),type:"text",placeholder:"Enter description",disabled:n.value||o.value},null,8,["modelValue","disabled"])]),_:1})])]),d("div",s4,[d("div",r4,[m[9]||(m[9]=d("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Variables & Secrets",-1)),d("button",{type:"button",onClick:p,class:"btn btn-secondary text-sm px-3 py-1.5 flex items-center gap-1.5",disabled:n.value||o.value},[...m[8]||(m[8]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Add Variable ",-1)])],8,n4)]),d("p",o4,[m[10]||(m[10]=oe(" Define variables that can be used in your pipeline using ",-1)),m[11]||(m[11]=d("code",{class:"bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-900 dark:text-gray-100"},"${VAR_NAME}",-1)),m[12]||(m[12]=oe(" or ",-1)),d("code",l4,L(x.VAR_NAME),1),m[13]||(m[13]=oe(" syntax. ",-1))]),c.value.variables.length===0?(O(),A("div",a4,' No variables defined. Click "Add Variable" to add one. ')):(O(),A("div",h4,[(O(!0),A(_e,null,Oi(c.value.variables,(k,C)=>(O(),A("div",{key:C,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 space-y-3"},[d("div",null,[m[14]||(m[14]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variable Name",-1)),U(Be,{modelValue:k.name,"onUpdate:modelValue":S=>k.name=S,type:"text",placeholder:"VAR_NAME",disabled:n.value||o.value,class:"font-mono"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),d("div",null,[m[15]||(m[15]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Value",-1)),U(Be,{modelValue:k.value,"onUpdate:modelValue":S=>k.value=S,type:k.isSecret&&k.value!=="***MASKED***"?"password":"text",placeholder:k.isSecret&&k.value==="***MASKED***"?"Secret value (enter new value to update)":k.isSecret?"Enter secret value":"Enter value",disabled:n.value||o.value},null,8,["modelValue","onUpdate:modelValue","type","placeholder","disabled"]),k.isSecret&&k.value==="***MASKED***"?(O(),A("p",c4," Secret value is masked. Enter a new value to update it. ")):Q("",!0)]),d("div",u4,[d("div",d4,[Bt(d("input",{"onUpdate:modelValue":S=>k.isSecret=S,type:"checkbox",id:`secret-${C}`,disabled:n.value||o.value,class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,f4),[[Qd,k.isSecret]]),d("label",{for:`secret-${C}`,class:"text-sm text-gray-700 cursor-pointer"}," Mark as secret ",8,p4)]),d("button",{type:"button",onClick:S=>g(C),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",disabled:n.value||o.value},[...m[16]||(m[16]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,g4)])]))),128))]))])]),d("div",m4,[d("div",y4,[m[17]||(m[17]=d("div",{class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600 px-4 py-3 flex items-center justify-between"},[d("div",null,[d("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Pipeline Definition (YAML)"),d("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Edit your pipeline YAML definition with syntax highlighting")])],-1)),d("div",{ref_key:"editorContainer",ref:a,class:"codemirror-container"},null,512)])])]),l.value?(O(),Me(us,{key:0,type:"error",message:l.value,dismissible:"",onDismiss:m[4]||(m[4]=k=>l.value=""),class:"mt-6"},null,8,["message"])):Q("",!0)])]))}},x4=FO(b4,[["__scopeId","data-v-c7ad6352"]]),v4={class:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"},k4={class:"bg-white dark:bg-gray-800 shadow-lg"},w4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},S4={class:"flex items-center justify-between"},C4={class:"flex items-center space-x-3"},O4={class:"flex items-center space-x-2"},A4={class:"text-sm text-gray-600 dark:text-gray-300"},M4={class:"flex items-center space-x-4"},P4=["title"],T4={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_4={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D4={key:2,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},B4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},$4={__name:"App",setup(i){const e=Zd(),t=F("dashboard"),s=F("dashboard"),r=F(!1),n=F(!1),o=F(null),l=F(null),a=F(!1);function h(C){s.value=t.value,o.value=C,t.value="logs"}function c(){t.value=s.value,o.value=null}function u(C=null){s.value=t.value,l.value=C,t.value="pipeline-editor"}function f(){t.value=s.value,l.value=null}function p(){t.value="pipelines",l.value=null}async function g(){try{const C=await Hm();n.value=!C.setup_complete||C.setup_complete===!1}catch(C){console.error("Error checking setup status:",C),n.value=!0}}function y(C=!1){n.value=!1,C||window.location.reload()}function x(){a.value=!0,El(C=>{r.value=!0,console.log("WebSocket message:",C)})}async function m(){try{await Qm(),a.value=!1,t.value="dashboard"}catch(C){console.error("Logout error:",C),a.value=!1}}function k(){console.log("Session expired. Logging out automatically."),a.value=!1,t.value="dashboard",r.value=!1}return Ft(()=>{g(),a.value=!!wo(),window.addEventListener($l,k),!n.value&&a.value&&(El(C=>{r.value=!0,console.log("WebSocket message:",C)}),setTimeout(()=>{r.value=!0},500))}),zr(()=>{window.removeEventListener($l,k)}),(C,S)=>(O(),A("div",v4,[n.value?(O(),Me(Fv,{key:0,onSetupComplete:y,onSetupAlreadyComplete:S[0]||(S[0]=()=>y(!0))})):(O(),A(_e,{key:1},[a.value?(O(),A(_e,{key:0},[d("header",k4,[d("div",w4,[d("div",S4,[d("div",C4,[S[6]||(S[6]=d("img",{src:Ua,alt:"Goli Logo",class:"h-10 w-auto"},null,-1)),S[7]||(S[7]=d("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Goli CI/CD",-1)),d("div",O4,[d("div",{class:me(["w-3 h-3 rounded-full",r.value?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),d("span",A4,L(r.value?"Online":"Offline"),1)])]),d("nav",M4,[d("button",{onClick:S[1]||(S[1]=$=>t.value="dashboard"),class:me(["px-4 py-2 rounded-lg transition-colors",t.value==="dashboard"?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])}," Dashboard ",2),d("button",{onClick:S[2]||(S[2]=$=>t.value="pipelines"),class:me(["px-4 py-2 rounded-lg transition-colors",t.value==="pipelines"?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])}," Pipelines ",2),d("button",{onClick:S[3]||(S[3]=$=>t.value="jobs"),class:me(["px-4 py-2 rounded-lg transition-colors",t.value==="jobs"?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])}," Jobs ",2),d("button",{onClick:S[4]||(S[4]=$=>t.value="settings"),class:me(["px-4 py-2 rounded-lg transition-colors",t.value==="settings"?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])}," Settings ",2),d("button",{onClick:S[5]||(S[5]=$=>xs(e).toggleTheme()),class:"p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:xs(e).currentTheme==="light"?"Switch to dark mode":xs(e).currentTheme==="dark"?"Switch to system theme":"Switch to light mode"},[xs(e).currentTheme==="light"?(O(),A("svg",T4,[...S[8]||(S[8]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])])):xs(e).currentTheme==="dark"?(O(),A("svg",_4,[...S[9]||(S[9]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])])):(O(),A("svg",D4,[...S[10]||(S[10]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])]))],8,P4),d("button",{onClick:m,class:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"}," Logout ")])])])]),d("main",B4,[t.value==="dashboard"?(O(),Me(F1,{key:0,onViewLogs:h})):Q("",!0),t.value==="pipelines"?(O(),Me(yb,{key:1,onViewLogs:h,onCreatePipeline:u,onEditPipeline:u})):Q("",!0),t.value==="jobs"?(O(),Me(qx,{key:2,onViewLogs:h})):Q("",!0),t.value==="settings"?(O(),Me(vv,{key:3})):Q("",!0),t.value==="logs"?(O(),Me(yk,{key:4,"job-id":o.value,onClose:c},null,8,["job-id"])):Q("",!0),t.value==="pipeline-editor"?(O(),Me(x4,{key:5,"pipeline-id":l.value,onClose:f,onSaved:p},null,8,["pipeline-id"])):Q("",!0)])],64)):(O(),Me(Pk,{key:1,onLoggedIn:x}))],64))]))}},E4=Bm($4);E4.mount("#app");
